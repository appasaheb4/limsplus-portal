{"version":3,"file":"static/js/831.bc706c71.chunk.js","mappings":"iQAiBMA,GAAiBC,EAAAA,EAAAA,KAAS,WAAO,IAAD,IACpC,GASIC,EAAAA,EAAAA,MARFC,EAAO,EAAPA,QACAC,EAAmB,EAAnBA,oBACAC,EAAW,EAAXA,YACAC,EAAiB,EAAjBA,kBAEAC,GADwB,EAAxBC,yBACU,EAAVD,YACAE,EAAoB,EAApBA,qBAGF,GAFoB,EAAlBC,oBAE8BC,EAAAA,EAAAA,UAAS,KAAG,eAE5C,GAFe,KAAa,MAOxBC,EAAAA,EAAAA,OAJK,EAAPC,QACY,EAAZC,aACkB,EAAlBC,UAAYC,QAGdC,EAFU,EAARA,UAEO,UAAWb,EAAoBc,cAAcC,SAmCtD,OACE,iCACE,UAAC,KAAM,YACL,iBAAKC,UAAU,mCAAkC,WAC/C,SAAC,KAAW,CAACC,OAAqC,QAA9B,EAAAhB,EAAYiB,0BAAkB,aAA9B,EAAgCD,QAAS,MAC7D,SAAC,KAAgD,CAC/CE,OAAQpB,EACRqB,YAAY,SACZJ,UAAU,MACVK,KAAM,CACJC,KAAMC,IAAAA,OACuB,QADf,EACZrB,EAAkBsB,iBAAS,aAA3B,EAA6BC,QAC3B,SAAAC,GAAI,YAAmBC,IAAfD,EAAKE,KAAmB,IAElC,SAEFC,WAAY,CAAC,UAEfC,SAAU,SAACF,GACT1B,EAAkB6B,oBAAoBC,cAAc,CAClDC,MAAO,CACLR,OAAQ,CAACG,MAAAA,KAGf,EACAM,SAAU,SAAAR,GA0CR,QAIN,SAAC,KAAqB,CAACS,MAAOhC,OAE/BiC,OAAOC,YAAc,KACpB,SAAC,KAAe,CACdC,UACE,+BAEoBjC,EAAqBkC,eACvBlC,EAAqBmC,cAlGzC,gBAAKxB,UAAU,8BAA6B,UAC1C,eAAIA,UAAU,6BAA4B,kGAqG5CyB,SAAS,kBACTC,MAAO,CACLC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,UAAW,SACXC,UAAW,QACX,SAED,gBAAEhD,EAAO,EAAPA,QAAc,EAALiD,MAAK,OACfjD,GACE,qDAEA,mBAAQiB,UAAU,iDAAgD,gCAGnE,KAIL,0BAWR,IACA,W","sources":["features/patient-reports/generate-reports/screens/generate-reports.screen.tsx"],"sourcesContent":["import React, {useState} from 'react';\nimport {observer} from 'mobx-react';\nimport _ from 'lodash';\nimport {\n  Toast,\n  AutoCompleteFilterSingleSelectMultiFieldsDisplay,\n  Header,\n  PageHeading,\n  PageHeadingLabDetails,\n} from '@/library/components';\nimport {useForm} from 'react-hook-form';\n\nimport '@/library/assets/css/accordion.css';\nimport {useStores} from '@/stores';\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport {PDFViewer, PDFDownloadLink} from '@react-pdf/renderer';\n\nconst GenerateReport = observer(() => {\n  const {\n    loading,\n    patientManagerStore,\n    routerStore,\n    patientVisitStore,\n    patientRegistrationStore,\n    loginStore,\n    generateReportsStore,\n    reportSettingStore,\n  } = useStores();\n  const [tempCode, setTempCode] = useState('');\n\n  const {\n    control,\n    handleSubmit,\n    formState: {errors},\n    setValue,\n  } = useForm();\n  setValue('species', patientManagerStore.patientManger.species);\n\n  const getTemplate = (tempCode: string, data: any) => {\n    switch (tempCode) {\n      // case 'TEMP0001':\n      //   return <PdfTPRTemp0001 data={data} />;\n      // case 'TEMP0002':\n      //   return <PdfTPRTemp0002 data={data} />;\n      // case 'TEMP0003':\n      //   return <PdfTPRTemp0003 data={data} />;\n      // case 'TEMP0004':\n      //   return <PdfTemp0004 data={data} />;\n      // case 'TEMP0005':\n      //   return <PdfTemp0005 data={data} />;\n      default:\n        return (\n          <div className='justify-center items-center'>\n            <h4 className='text-center mt-10 text-red'>\n              Template not found. Please select correct template code and labId.\n              ðŸš¨\n            </h4>\n          </div>\n        );\n        break;\n    }\n\n    // return (\n    //   <div className='justify-center items-center'>\n    //     <h4 className='text-center mt-10 text-red'>\n    //       Template not found. Please select correct template code and labId. ðŸš¨\n    //     </h4>\n    //   </div>\n    // );\n  };\n\n  return (\n    <>\n      <Header>\n        <div className='flex flex-row gap-2 items-center'>\n          <PageHeading title={routerStore.selectedComponents?.title || ''} />\n          <AutoCompleteFilterSingleSelectMultiFieldsDisplay\n            loader={loading}\n            placeholder='Lab Id'\n            className='h-4'\n            data={{\n              list: _.uniqBy(\n                patientVisitStore.labIdList?.filter(\n                  item => item.labId !== undefined,\n                ),\n                'labId',\n              ),\n              displayKey: ['labId'],\n            }}\n            onFilter={(labId: string) => {\n              patientVisitStore.patientVisitService.filterByLabId({\n                input: {\n                  filter: {labId},\n                },\n              });\n            }}\n            onSelect={item => {\n              // generateReportsStore.generateReportsService\n              //   .listPatientReports(item.labId)\n              //   .then(res => {\n              //     if (res.getPatientReports.success) {\n              //       const uniqByPatientResult = _.uniqBy(\n              //         res.getPatientReports.data?.patientResultList,\n              //         (item: any) => {\n              //           return item.reportTemplate;\n              //         },\n              //       );\n              //       const reportTemplateList: any[] = [];\n              //       uniqByPatientResult.filter(item => {\n              //         reportTemplateList.push(\n              //           item?.reportTemplate.split(' -')[0],\n              //         );\n              //       });\n              //       if (reportTemplateList?.length > 0) {\n              //         reportSettingStore.templatePatientResultService\n              //           .getTempPatientResultListByTempCodes({\n              //             input: {\n              //               filter: {\n              //                 reportTemplateList,\n              //               },\n              //             },\n              //           })\n              //           .then(res => {\n              //             console.log({res});\n              //           });\n              //       }\n              //     } else {\n              //       alert(res.getPatientReports.message);\n              //     }\n              //     // generateReportsStore.updatePatientReports(res?.data);\n              //     // generateReportsStore.updatePageBranding(\n              //     //   res?.data?.templatePatientResult?.pageBranding,\n              //     // );\n              //   })\n              //   .catch(errors => {\n              //     return Toast.error({\n              //       message: `ðŸ˜” ${errors.message}`,\n              //     });\n              //   });\n            }}\n          />\n        </div>\n        <PageHeadingLabDetails store={loginStore} />\n      </Header>\n      {window.innerWidth <= 768 ? (\n        <PDFDownloadLink\n          document={\n            <>\n              {getTemplate(tempCode, {\n                patientReports: generateReportsStore.patientReports,\n                pageBranding: generateReportsStore.pageBranding,\n              })}\n            </>\n          }\n          fileName='Patient Reports'\n          style={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            textAlign: 'center',\n            minHeight: '100%',\n          }}\n        >\n          {({loading, error}) =>\n            loading ? (\n              <button>Loading document...</button>\n            ) : (\n              <button className='border-2 p-2 rounded-md bg-blue-500 text-white'>\n                Pdf Patient Reports\n              </button>\n            )\n          }\n        </PDFDownloadLink>\n      ) : (\n        <>\n          {/* <PdfTPRTemp0001\n            data={{\n              patientReports: generateReportsStore.patientReports,\n              pageBranding: generateReportsStore.pageBranding,\n            }}\n          /> */}\n        </>\n      )}\n    </>\n  );\n});\nexport default GenerateReport;\n"],"names":["GenerateReport","observer","useStores","loading","patientManagerStore","routerStore","patientVisitStore","loginStore","patientRegistrationStore","generateReportsStore","reportSettingStore","useState","useForm","control","handleSubmit","formState","errors","setValue","patientManger","species","className","title","selectedComponents","loader","placeholder","data","list","_","labIdList","filter","item","undefined","labId","displayKey","onFilter","patientVisitService","filterByLabId","input","onSelect","store","window","innerWidth","document","patientReports","pageBranding","fileName","style","display","justifyContent","alignItems","textAlign","minHeight","error"],"sourceRoot":""}