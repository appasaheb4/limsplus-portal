"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[334],{85334:function(e,t,i){i.r(t),i.d(t,{default:function(){return I}});var o=i(1413),n=i(29439),a=i(47313),r=i(92126),l=i(10044),d=i(75627),s=i(42490),c=i(10658),u=i.n(c),m=i(4942),f=i(43701),x=i(16031),p=i.n(x),g=i(66233),v=i.n(g),h=i(36620),b=i(94118),y=(i(35509),i(46417)),F=g.Search.SearchBar,P=g.Search.ClearSearchButton,C=g.CSVExport.ExportCSVButton,S=function(e){var t=e.id,i=e.data,r=e.totalSize,d=void 0===r?10:r,s=e.searchPlaceholder,c=void 0===s?"Search...":s,x=e.page,g=void 0===x?0:x,S=e.sizePerPage,j=void 0===S?10:S,D=e.columns,w=e.fileName,I=e.isEditModify,N=(e.isSelectRow,e.selectedItem),z=(e.onSelectedRow,e.onUpdateItem),Z=e.onPageSizeChange,k=e.onFilter,E=e.clearAllFilter,T=e.onClickRow,M=(0,a.useState)(),R=(0,n.Z)(M,2),Y=(R[0],R[1],(0,a.useState)(!1)),U=(0,n.Z)(Y,2),A=U[0],_=U[1],J={cutome:!0,totalSize:d,paginationSize:5,pageStartIndex:0,firstPageText:"<<",prePageText:"<",nextPageText:">",lastPageText:">>",disablePageTitle:!0,paginationTotalRenderer:function(e,t,i){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"clearfix"}),(0,y.jsxs)("span",{children:["Showing ",e," to ",t," of ",i," Results"]})]})},hideSizePerPage:!0,showTotal:!1,alwaysShowAllBtns:!0,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50}],hidePageListOnlyOnePage:!0,sizePerPageRenderer:function(e){var t=e.options,i=e.currSizePerPage,o=e.onSizePerPageChange;return(0,y.jsxs)("div",{className:"btn-group items-center",role:"group",children:[(0,y.jsx)("input",{type:"number",min:"0",placeholder:"No",onChange:function(e){e.target.value&&o(e.target.value)},className:"mr-2 ml-2 leading-4 p-2 w-14 focus:outline-none focus:ring block  shadow-sm sm:text-base border border-gray-300 rounded-md"}),t.map((function(e){return(0,y.jsx)("button",{type:"button",onClick:function(){return o(e.page)},className:"btn  ".concat(i==="".concat(e.page)?"bg-primary":"bg-grey"),children:e.text},e.text)}))]})}},O={placeholder:c},L=function(e,t){var i=t.data,o=t.cellEdit,a=t.page,r=t.sizePerPage,l=t.filters,s=t.sortField,c=t.sortOrder,u=t.searchText;if("cellEdit"===e&&I&&z&&z(o.newValue,o.dataField,o.rowId),"pagination"===e&&p().isEmpty(l)&&Z&&Z(a,r),"filter"===e||"pagination"===e&&!p().isEmpty(l)){if("pagination"===e){if(r>d)return alert("You have not more records.");if(a*r>d)return alert("You have not more records.")}for(var f={},x=0,g=Object.entries(l);x<g.length;x++){var v=(0,n.Z)(g[x],2),h=v[0],b=v[1],y=(0,m.Z)({},h,b.filterVal);f=Object.assign(f,y)}k&&k(e,f,"filter"===e&&1===a?0:a,r)}("search"===e&&setTimeout((function(){k&&k(e,{srText:u},a,r)}),2e3),"sort"===e)&&("asc"===c?i.sort((function(e,t){return e[s]>t[s]?1:t[s]>e[s]?-1:0})):i.sort((function(e,t){return e[s]>t[s]?-1:t[s]>e[s]?1:0})))},B=function(e){var t=e.columns,i=e.onColumnToggle,n=e.toggles;return(0,y.jsx)("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons",children:t.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{toggle:n[e.dataField]})})).map((function(e,t){if(t>0)return(0,y.jsx)("button",{type:"button",className:" btn btn-primary  btn-sm whitespace-nowrap ".concat(e.toggle?"active":""),"data-toggle":"button","aria-pressed":e.toggle?"true":"false",onClick:function(){return i(e.dataField)},children:e.text},e.dataField)}))})},Q={onClick:function(e,t,i){T&&T(t,i)}},V=function(e,t){if(e._id==(null===N||void 0===N?void 0:N._id))return{backgroundColor:"#a9a9a9"}};return(0,y.jsx)(h.bN,{pagination:(0,h.ZP)(0!==d?J:{page:g,sizePerPage:j,totalSize:d}),keyField:t,columns:D,data:i,children:function(e){var n=e.paginationProps,a=e.paginationTableProps;return(0,y.jsx)(v(),{keyField:t,bootstrap4:!0,data:i,columns:D,search:!0,exportCSV:{fileName:"".concat(w,"_").concat(u()(new Date).format("YYYY-MM-DD HH:mm"),".csv"),noAutoBOM:!1,blobType:"text/csv;charset=ansi",exportAll:!1,onlyExportFiltered:!0},columnToggle:!0,children:function(e){return(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"flex items-center",children:[(0,y.jsx)(F,(0,o.Z)((0,o.Z)((0,o.Z)({},O),e.searchProps),{},{onChange:function(e){console.log({value:e})}})),(0,y.jsx)(P,(0,o.Z)({className:"inline-flex ml-4 bg-gray-500 items-center small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.searchProps)),(0,y.jsx)("button",{className:"ml-2 px-2 focus:outline-none bg-gray-500 items-center  outline shadow-sm  font-medium  text-center rounded-md h-9 text-white",onClick:E,children:"Clear all filters"}),(0,y.jsx)(C,(0,o.Z)((0,o.Z)({className:"inline-flex m-2.5 bg-gray-500 items-center  small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.csvProps),{},{children:"Export CSV!!"})),A?(0,y.jsx)(l.EK.zx,{size:"medium",type:"outline",onClick:function(){_(!A)},children:(0,y.jsx)(l.PJ.IconFa.FaChevronUp,{})}):(0,y.jsx)(l.EK.zx,{size:"medium",type:"outline",onClick:function(){_(!A)},children:(0,y.jsx)(l.PJ.IconFa.FaChevronDown,{})})]}),A&&(0,y.jsx)("div",{className:"mb-2 overflow-auto h-10",children:(0,y.jsx)(B,(0,o.Z)({contextual:"primary",className:"list-custom-class",btnClassName:"list-btn-custom-class"},e.columnToggleProps))}),(0,y.jsx)("div",{className:"scrollTable",children:(0,y.jsx)(f.Z,(0,o.Z)((0,o.Z)((0,o.Z)({remote:!0},e.baseProps),{},{noDataIndication:"Table is Empty",hover:!0},a),{},{filter:(0,b.ZP)(),headerClasses:"bg-gray-500 text-white whitespace-nowrap",onTableChange:L,rowEvents:Q,rowStyle:V}))}),(0,y.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,y.jsx)(h.dE,(0,o.Z)({},Object.assign({},(0,o.Z)((0,o.Z)({},n),{},{hideSizePerPage:!1})))),(0,y.jsx)(h.yJ,(0,o.Z)({},n))]}),(0,y.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,y.jsx)(h.NJ,(0,o.Z)({},n))})]})}})}})},j=(0,r.Pi)((function(e){var t=(0,a.useState)({}),i=(0,n.Z)(t,2),o=i[0],r=i[1];return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{style:{position:"relative"},children:(0,y.jsx)(S,{id:"_id",data:e.data,totalSize:e.totalSize,selectedItem:o,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"labId",text:"Lab Id",sort:!0,editable:!1},{dataField:"deliveryId",text:"Delivery Id",sort:!0,editable:!1},{dataField:"deliveryDate",text:"Delivery Date",sort:!0,editable:!1,formatter:function(e,t){return(0,y.jsx)(y.Fragment,{children:t.deliveryDate?u()(t.deliveryDate).format("YYYY-MM-DD"):""})}},{dataField:"reportDate",text:"Report Date",sort:!0,editable:!1,formatter:function(e,t){return(0,y.jsx)(y.Fragment,{children:t.reportDate?u()(t.reportDate).format("YYYY-MM-DD"):""})}},{dataField:"deliveryStatus",text:"Delivery Status",sort:!0,editable:!1},{dataField:"reportType",text:"Report Type",sort:!0,editable:!1},{dataField:"deliveryMode",text:"Delivery Mode",sort:!0,editable:!1},{dataField:"destination",text:"Destination",sort:!0,editable:!1},{dataField:"comments",text:"Comments",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"startDate",text:"Start Date",sort:!0,editable:!1,formatter:function(e,t){return(0,y.jsx)(y.Fragment,{children:t.startDate?u()(t.startDate).format("YYYY-MM-DD"):""})}},{dataField:"endDate",text:"End Date",sort:!0,editable:!1,formatter:function(e,t){return(0,y.jsx)(y.Fragment,{children:t.endDate?u()(t.endDate).format("YYYY-MM-DD"):""})}},{dataField:"errorMsg",text:"Error Msg",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"clientCode",text:"Client Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"clientName",text:"Client Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"qrCode",text:"Qr Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"pdf",text:"PDF",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"enteredBy",text:"Entered By",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"userComments",text:"User Comments",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"operation",text:"Action",editable:!1,csvExport:!1,hidden:!e.isDelete,formatter:function(t,i){return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"flex flex-row",children:[(0,y.jsx)(l.u,{tooltipText:"Cancel",position:"bottom",children:(0,y.jsx)(l.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"cancel",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Cancel item"})},children:l.PJ.getIconTag(l.PJ.IconGi.GiCancel)})}),(0,y.jsx)(l.u,{tooltipText:"Hold",position:"bottom",children:(0,y.jsx)(l.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"hold",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Hold item"})},children:l.PJ.getIconTag(l.PJ.Iconmd.MdBackHand)})}),(0,y.jsx)(l.u,{tooltipText:"Generate PDF",position:"bottom",children:(0,y.jsx)(l.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"generatePdf",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Generate pdf"})},children:l.PJ.getIconTag(l.PJ.Iconai.AiOutlineFilePdf)})})]})})},headerClasses:"sticky right-0  bg-gray-500 text-white",classes:function(e,t,i,o){return"sticky right-0 bg-gray-500"}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Report Delivery",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,i,o){e.onUpdateItem&&e.onUpdateItem(t,i,o)},onPageSizeChange:function(t,i){e.onPageSizeChange&&e.onPageSizeChange(t,i)},onFilter:function(t,i,o,n){e.onFilter&&e.onFilter(t,i,o,n)},clearAllFilter:function(){},onClickRow:function(t,i){r(t),e.onClickRow&&e.onClickRow(t,i)}})})})})),D=(0,r.Pi)((function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{style:{position:"relative"},children:(0,y.jsx)(S,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"deliveryId",text:"Delivery Id",sort:!0,editable:!1},{dataField:"labId",text:"Lab Id",sort:!0,editable:!1},{dataField:"orderId",text:"Order Id",sort:!0,editable:!1},{dataField:"panelCode",text:"Panel Code",sort:!0,editable:!1},{dataField:"panelName",text:"Panel Name",sort:!0,editable:!1},{dataField:"testCode",text:"Test Code",sort:!0,editable:!1},{dataField:"testName",text:"Test Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"analyteCode",text:"Analyte Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"analyteName",text:"Analyte Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"rep",text:"Rep",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"delivered",text:"Delivered",sort:!0,csvFormatter:function(e,t){return"".concat(t.delivered&&t.delivered?"Yes":"No")},editable:!1,formatter:function(e,t){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(l.l0.ZD,{disabled:!0,value:t.delivered})})}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Order Delivered",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,i,o){e.onUpdateItem&&e.onUpdateItem(t,i,o)},onPageSizeChange:function(t,i){e.onPageSizeChange&&e.onPageSizeChange(t,i)},onFilter:function(t,i,o,n){e.onFilter&&e.onFilter(t,i,o,n)},clearAllFilter:function(){}})})})})),w=(i(80594),i(74394)),I=(i(9479),(0,r.Pi)((function(){var e,t=(0,w.mZ)(),i=(t.loading,t.deliveryQueueStore),r=t.routerStore,c=(t.administrativeDivisions,t.doctorsStore,t.loginStore),u=(0,d.cI)(),m=(u.control,u.handleSubmit,u.formState.errors,u.setValue,(0,a.useState)()),f=(0,n.Z)(m,2),x=f[0],p=f[1];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(l.h4,{children:[(0,y.jsx)(l.CD,{title:(null===(e=r.selectedComponents)||void 0===e?void 0:e.title)||""}),(0,y.jsx)(l.Nd,{store:c})]}),(0,y.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,y.jsx)("span",{className:"font-bold text-lg underline",children:"Report Delivery"}),(0,y.jsx)(j,{data:i.reportDeliveryList||[],totalSize:i.reportDeliveryListCount,isDelete:s.o.checkPermission(r.userPermission,"Delete"),isEditModify:s.o.checkPermission(r.userPermission,"Edit/Modify"),onUpdate:function(e){return p(e)},onSelectedRow:function(e){p({show:!0,type:"delete",id:e,title:"Are you sure?",body:"Delete selected items!"})},onUpdateItem:function(e,t,i){p({show:!0,type:"update",data:{value:e,dataField:t,id:i},title:"Are you sure?",body:"Update items!"})},onPageSizeChange:function(e,t){},onFilter:function(e,t,i,o){},onClickRow:function(e,t){i.updateOrderDeliveredList([e])}})]}),(0,y.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,y.jsx)("span",{className:"font-bold text-lg underline",children:"Order Delivered"}),(0,y.jsx)(D,{data:i.orderDeliveredList||[],totalSize:i.orderDeliveredListCount,isDelete:s.o.checkPermission(r.userPermission,"Delete"),isEditModify:s.o.checkPermission(r.userPermission,"Edit/Modify"),onDelete:function(e){return p(e)},onSelectedRow:function(e){p({show:!0,type:"delete",id:e,title:"Are you sure?",body:"Delete selected items!"})},onUpdateItem:function(e,t,i){p({show:!0,type:"update",data:{value:e,dataField:t,id:i},title:"Are you sure?",body:"Update items!"})},onPageSizeChange:function(e,t){},onFilter:function(e,t,i,o){}}),(0,y.jsx)(l.WZ,(0,o.Z)((0,o.Z)({},x),{},{click:function(e){i.deliveryQueueService.updateDeliveryQueue({input:{_id:x.id,visitId:null===x||void 0===x?void 0:x.visitId,deliveryStatus:"cancel"==e?"Cancel":"hold"==e?"Hold":"Done"}}).then((function(e){p({show:!1}),e.updateDeliveryQueue.success&&(l.FN.success({message:"\ud83d\ude0a ".concat(e.updateDeliveryQueue.message)}),i.deliveryQueueService.listDeliveryQueue())}))},onClose:function(){p({show:!1})}}))]})]})})))}}]);