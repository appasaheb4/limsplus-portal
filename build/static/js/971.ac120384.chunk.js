"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[971],{19971:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var o,i,r,a,l,s=n(4942),c=n(1413),d=n(29439),u=n(47313),f=n(92126),m=n(48703),h=n(46417),g=(0,f.Pi)((function(e){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{style:{position:"relative"},children:(0,h.jsx)(m.tM,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"lab",text:"Labs",headerClasses:"textHeader2",sort:!0,csvFormatter:function(e){return e||""},filter:(0,m.DN)({getFilter:function(e){o=e}}),editorRenderer:function(t,n,o,i,r,a){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(b,{onSelect:function(t){e.onUpdateItem&&e.onUpdateItem(t.code,i.dataField,o._id)}})})}},{dataField:"header",text:"Header",headerClasses:"textHeader1",sort:!0,csvFormatter:function(e){return e||""},filter:(0,m.DN)({getFilter:function(e){i=e}})},{dataField:"message",text:"Message",sort:!0,csvFormatter:function(e){return e||""},filter:(0,m.DN)({getFilter:function(e){r=e}}),headerClasses:"textHeader2",editorRenderer:function(t,n,o,i,r,a){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(m.l0.$l,{rows:5,name:"message",placeholder:"Message",onBlur:function(t){o.message!==t&&t&&e.onUpdateItem&&e.onUpdateItem(t,i.dataField,o._id)}})})}},{dataField:"action",text:"Action",headerClasses:"textHeader2",sort:!0,csvFormatter:function(e){return e||""},filter:(0,m.DN)({getFilter:function(e){a=e}}),editorRenderer:function(t,n,o,i,r,a){return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("select",{name:"action",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var n=t.target.value;e.onUpdateItem&&e.onUpdateItem(n,i.dataField,o._id)},children:[(0,h.jsx)("option",{selected:!0,children:"Select"}),["login","logout"].map((function(e,t){return(0,h.jsx)("option",{value:e,children:e},t)}))]})})}},{dataField:"opration",text:"Action",editable:!1,csvExport:!1,hidden:!e.isDelete,formatter:function(t,n){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"flex flex-row",children:(0,h.jsx)(m.u,{tooltipText:"Delete",children:(0,h.jsx)(m.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onDelete&&e.onDelete({type:"Delete",show:!0,id:[n._id],title:"Are you sure?",body:"Delete item"})},children:m.PJ.getIconTag(m.PJ.IconBs.BsFillTrashFill)})})})})},headerClasses:"sticky right-0  bg-gray-500 text-white z-50",classes:function(e,t,n,o){return"sticky right-0 bg-gray-500"},style:function(t,n,o,i){var r;return{zIndex:(null===(r=e.data)||void 0===r?void 0:r.length)-o}}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Notice_Boards",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,n,o){e.onUpdateItem&&e.onUpdateItem(t,n,o)},onPageSizeChange:function(t,n){e.onPageSizeChange&&e.onPageSizeChange(t,n)},onFilter:function(t,n,o,i){e.onFilter&&e.onFilter(t,n,o,i)},clearAllFilter:function(){o(""),r(""),a(""),i("")}})})})})),x=n(44030),p=n(65733),b=(0,f.Pi)((function(e){var t,n=e.onSelect,o=(0,p.mZ)(),i=o.loading,r=o.labStore,a=(0,u.useState)(""),l=(0,d.Z)(a,2),s=l[0],c=l[1],f=(0,u.useState)(),g=(0,d.Z)(f,2),b=g[0],v=g[1],j=(0,u.useState)(!1),N=(0,d.Z)(j,2),S=N[0],F=N[1],y=(0,u.useRef)(null);t=y,(0,u.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&S&&(F(!1),c(""))}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,S]),(0,u.useEffect)((function(){v(r.listLabs)}),[r.listLabs]);var w=function(e){r.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})};return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{ref:y,children:[(0,h.jsxs)("div",{className:"flex items-center leading-4 p-2 focus:outline-none focus:ring  w-full shadow-sm sm:text-base border-2  rounded-md",children:[(0,h.jsx)("input",{placeholder:"Search by name",value:s,className:"w-full focus:outline-none bg-none",onKeyUp:function(e){if(8===(e.which?e.which:e.keyCode)){var t=e.target.value;w(t)}},onChange:function(e){var t=e.target.value;c(t),w(t)},onClick:function(){return F(!0)}}),i&&(0,h.jsx)(x.Z,{animation:"border",className:"mr-2 h-4 w-4"}),S?(0,h.jsx)(m.PJ.IconFa.FaChevronUp,{}):(0,h.jsx)(m.PJ.IconFa.FaChevronDown,{})]}),b&&S?b.length>0&&(0,h.jsx)("div",{className:"mt-1 absolute bg-gray-100 p-2 rounded-sm z-50",children:(0,h.jsx)("ul",{children:null===b||void 0===b?void 0:b.map((function(e,t){return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("li",{className:"text-gray-400 flex items-center",onClick:function(){c(e.name),F(!1),r.updateLabList(r.listLabsCopy),n(e)},children:[" ",(0,h.jsxs)("label",{className:"ml-2 mt-1 text-black",children:[" ",e.name]})]},t)})}))})}):null]})})})),v=(n(80594),n(75627)),j=n(42490),N=n(4793),S=(l=(0,f.Pi)((function(){var e,t=(0,p.mZ)(),n=t.loginStore,o=t.labStore,i=t.noticeBoardStore,r=t.routerStore,a=t.loading,l=(0,v.cI)(),f=l.control,x=l.handleSubmit,b=l.formState.errors;(0,l.setValue)("lab",n.login.lab);var S=(0,u.useState)(),F=(0,d.Z)(S,2),y=F[0],w=F[1],C=(0,u.useMemo)((function(){return(0,h.jsx)(g,{data:i.noticeBoardList,totalSize:i.noticeBoardListCount,extraData:{listLabs:o.listLabs},isDelete:j.o.checkPermission((0,N.ZN)(r.userPermission),"Delete"),isEditModify:j.o.checkPermission((0,N.ZN)(r.userPermission),"Edit/Modify"),onDelete:function(e){return w(e)},onSelectedRow:function(e){w({show:!0,type:"Delete",id:e,title:"Are you sure?",body:"Delete selected items!"})},onUpdateItem:function(e,t,n){w({show:!0,type:"Update",data:{value:e,dataField:t,id:n},title:"Are you sure?",body:"Update recoard!"})},onPageSizeChange:function(e,t){i.fetchNoticeBoards(e,t)},onFilter:function(e,t,n,o){i.NoticeBoardService.filter({input:{type:e,filter:t,page:n,limit:o}})}})}),[i.noticeBoardList]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(m.h4,{children:[(0,h.jsx)(m.CD,{title:(null===(e=r.selectedComponents)||void 0===e?void 0:e.title)||""}),(0,h.jsx)(m.Nd,{store:n})]}),(0,h.jsxs)("div",{className:"p-2 rounded-lg shadow-xl",children:[(0,h.jsxs)(m.rj,{cols:2,children:[(0,h.jsxs)(m.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[o.listLabs&&(0,h.jsx)(v.Qr,{control:f,render:function(e){var t=e.field.onChange;return(0,h.jsx)(m.l0.SP,{label:"Lab",id:"labs",hasError:!!b.lab,children:(0,h.jsx)(m.T3,{loader:a,placeholder:"Search by name",disable:!(!n.login||"SYSADMIN"===n.login.role),data:{list:o.listLabs,displayKey:"name",findKey:"name"},hasError:!!b.name,onFilter:function(e){o.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})},onSelect:function(e){t(e.name),i.updateNoticeBoard((0,c.Z)((0,c.Z)({},i.noticeBoard),{},{lab:e.code})),o.updateLabList(o.listLabsCopy)}})})},name:"lab",rules:{required:!0},defaultValue:""}),(0,h.jsx)(v.Qr,{control:f,render:function(e){var t=e.field.onChange;return(0,h.jsx)(m.l0.II,{label:"Header",name:"lblHeader",placeholder:b.header?"Please Enter Header":"Header",hasError:!!b.header,onChange:function(e){t(e),i.updateNoticeBoard((0,c.Z)((0,c.Z)({},i.noticeBoard),{},{header:e}))}})},name:"header",rules:{required:!0},defaultValue:""}),(0,h.jsx)(v.Qr,{control:f,render:function(e){var t=e.field.onChange;return(0,h.jsx)(m.l0.SP,{label:"Action",id:"lblAction",hasError:!!b.action,children:(0,h.jsxs)("select",{name:"action",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(b.action?"border-red-500":"border-gray-300"," rounded-md"),onChange:function(e){var n=e.target.value;t(n),i.updateNoticeBoard((0,c.Z)((0,c.Z)({},i.noticeBoard),{},{action:n}))},children:[(0,h.jsx)("option",{selected:!0,children:"Select"}),["login","logout"].map((function(e,t){return(0,h.jsx)("option",{value:e,children:e},t)}))]})})},name:"action",rules:{required:!0},defaultValue:""})]}),(0,h.jsx)(m.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:(0,h.jsx)(v.Qr,{control:f,render:function(e){var t=e.field.onChange;return(0,h.jsx)(m.l0.$l,{rows:7,label:"Message",name:"lblMessage",hasError:!!b.message,placeholder:b.message?"Please Enter Message":"Message",onChange:function(e){t(e),i.updateNoticeBoard((0,c.Z)((0,c.Z)({},i.noticeBoard),{},{message:e}))}})},name:"message",rules:{required:!1},defaultValue:""})})]}),(0,h.jsx)("br",{}),(0,h.jsxs)(m.aV,{direction:"row",space:3,align:"center",children:[(0,h.jsx)(m.EK.zx,{size:"medium",type:"solid",icon:m.ny.vc,onClick:x((function(){i.NoticeBoardService.addNoticeBoard({input:(0,c.Z)({},i.noticeBoard)}).then((function(e){e.createNoticeBoard.success?(m.FN.success({message:"\ud83d\ude0a ".concat(e.createNoticeBoard.message)}),setTimeout((function(){window.location.reload()}),2e3)):m.FN.warning({message:"\ud83d\ude14 Notice not create.Please try again"})}))})),children:"Save"}),(0,h.jsx)(m.EK.zx,{size:"medium",type:"outline",icon:m.ny.JW,onClick:function(){window.location.reload()},children:"Clear"})]})]}),(0,h.jsx)("div",{className:"p-2 rounded-lg shadow-xl overflow-scroll",style:{overflowX:"scroll"},children:C}),(0,h.jsx)(m.WZ,(0,c.Z)((0,c.Z)({},y),{},{click:function(e){"Delete"===e?i.NoticeBoardService.deleteNoticeBoards({input:{id:y.id}}).then((function(e){e.removeNoticeBoard.success&&(m.FN.success({message:"\ud83d\ude0a ".concat(e.removeNoticeBoard.message)}),w({show:!1}),i.fetchNoticeBoards())})):"Update"===e&&i.NoticeBoardService.updateSingleFiled({input:(0,s.Z)({_id:y.data.id},y.data.dataField,y.data.value)}).then((function(e){e.updateNoticeBoard.success&&(m.FN.success({message:"\ud83d\ude0a ".concat(e.updateNoticeBoard.message)}),w({show:!1}),setTimeout((function(){window.location.reload()}),1e3))}))},onClose:function(){return w({show:!1})}}))]})})),(0,f.Pi)((function(e){var t=(0,p.mZ)(),n=t.loginStore,o=t.noticeBoardStore;return(0,u.useEffect)((function(){n.login&&"SYSADMIN"!==n.login.role&&o.updateNoticeBoard((0,c.Z)((0,c.Z)({},o.noticeBoard),{},{lab:n.login.lab})),o.fetchNoticeBoards()}),[n.login]),(0,h.jsx)(l,(0,c.Z)({},e))}))),F=S}}]);