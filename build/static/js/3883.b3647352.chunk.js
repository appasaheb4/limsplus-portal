"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[3883],{72816:function(e,t,n){n.r(t),n.d(t,{default:function(){return ve}});var r,i,o,a,l,d,s,u,c,f,p,v,m,x,g,h,y,b,C,P,S,F,j,w,D,T=n(1413),I=n(74165),N=n(15861),Z=n(93433),R=n(29439),z=n(72791),E=n(71672),B=n(763),k=n.n(B),M=n(35633),H=n(61134),L=n(10621),A=n(97892),J=n.n(A),O=n(4942),U=n(2002),Q=n(33294),Y=n.n(Q),$=n(36161),_=n(92746),V=(n(26192),n(65028)),W=n(80184),q=Q.Search.SearchBar,K=Q.Search.ClearSearchButton,G=Q.CSVExport.ExportCSVButton,X=function(e){var t=e.id,n=e.data,r=e.totalSize,i=void 0===r?10:r,o=e.searchPlaceholder,a=void 0===o?"Search...":o,l=e.page,d=void 0===l?0:l,s=e.sizePerPage,u=void 0===s?10:s,c=e.columns,f=e.fileName,p=e.isEditModify,v=(e.isSelectRow,e.selectedItem,e.isPagination,e.onSelectedRow,e.onUpdateItem),m=e.onPageSizeChange,x=e.onUpdateDeliveryStatus,g=e.onFilter,h=e.onPagination,y=e.clearAllFilter,b=(e.onClickRow,(0,z.useState)()),C=(0,R.Z)(b,2),P=(C[0],C[1],(0,z.useState)(!1)),S=(0,R.Z)(P,2),F=S[0],j=S[1],w={cutome:!0,totalSize:i,paginationSize:5,pageStartIndex:0,firstPageText:"<<",prePageText:"<",nextPageText:">",lastPageText:">>",disablePageTitle:!0,paginationTotalRenderer:function(e,t,n){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"clearfix"}),(0,W.jsxs)("span",{children:["Showing ",e," to ",t," of ",n," Results"]})]})},hideSizePerPage:!0,showTotal:!1,alwaysShowAllBtns:!0,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50}],hidePageListOnlyOnePage:!0,sizePerPageRenderer:function(e){var t=e.options,n=e.currSizePerPage,r=e.onSizePerPageChange;return(0,W.jsxs)("div",{className:"btn-group items-center",role:"group",children:[(0,W.jsx)("input",{type:"number",min:"0",placeholder:"No",onChange:function(e){e.target.value&&r(e.target.value)},className:"mr-2 ml-2 leading-4 p-2 w-14 focus:outline-none focus:ring block  shadow-sm sm:text-base border border-gray-300 rounded-md"}),t.map((function(e){return(0,W.jsx)("button",{type:"button",onClick:function(){return r(e.page)},className:"btn  ".concat(n==="".concat(e.page)?"bg-primary":"bg-grey"),children:e.text},e.text)}))]})}},D={placeholder:a},Z=function(e,t){var n=t.data,r=t.cellEdit,o=t.page,a=t.sizePerPage,l=t.filters,d=t.sortField,s=t.sortOrder,u=t.searchText;if("cellEdit"===e&&p&&v&&v(r.newValue,r.dataField,r.rowId),"pagination"===e&&k().isEmpty(l)&&m&&m(o,a),"filter"===e||"pagination"===e&&!k().isEmpty(l)){if("pagination"===e){if(a>i)return alert("You have not more records.");if(o*a>i)return alert("You have not more records.")}for(var c={},f=0,x=Object.entries(l);f<x.length;f++){var h=(0,R.Z)(x[f],2),y=h[0],b=h[1],C=(0,O.Z)({},y,b.filterVal);c=Object.assign(c,C)}g&&(0,V.Ds)((function(){g(e,c,"filter"===e&&1===o?0:o,a)}))}("search"===e&&(0,V.Ds)((function(){g&&g(e,{srText:u},o,a)})),"sort"===e)&&("asc"===s?n.sort((function(e,t){return e[d]>t[d]?1:t[d]>e[d]?-1:0})):n.sort((function(e,t){return e[d]>t[d]?-1:t[d]>e[d]?1:0})))},E=function(e){var t=e.columns,n=e.onColumnToggle,r=e.toggles;return(0,W.jsx)("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons",children:t.map((function(e){return(0,T.Z)((0,T.Z)({},e),{},{toggle:r[e.dataField]})})).map((function(e,t){if(t>0)return(0,W.jsx)("button",{type:"button",className:" btn btn-primary  btn-sm whitespace-nowrap ".concat(e.toggle?"active":""),"data-toggle":"button","aria-pressed":e.toggle?"true":"false",onClick:function(){return n(e.dataField)},children:e.text},e.dataField)}))})},B=function(e,t){return null!==e&&void 0!==e&&e.isAnyCritical||null!==e&&void 0!==e&&e.isAnyABNFlag&&null!==e&&void 0!==e&&e.isAnyCritical?{backgroundColor:"#FF0000",color:"#FFFF00"}:null!==e&&void 0!==e&&e.isAnyABNFlag?{backgroundColor:"#FFFF00",color:"#FF0000"}:void 0};return(0,W.jsx)($.bN,{pagination:(0,$.ZP)(0!==i?w:{page:d,sizePerPage:u,totalSize:i}),keyField:t,columns:c,data:n,children:function(e){e.paginationProps;var r=e.paginationTableProps;return(0,W.jsx)(Y(),{keyField:t,bootstrap4:!0,data:n,columns:c,search:!0,exportCSV:{fileName:"".concat(f,"_").concat(J()(new Date).format("YYYY-MM-DD HH:mm"),".csv"),noAutoBOM:!1,blobType:"text/csv;charset=ansi",exportAll:!1,onlyExportFiltered:!0},columnToggle:!0,children:function(e){return(0,W.jsxs)("div",{children:[(0,W.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,W.jsx)(q,(0,T.Z)((0,T.Z)((0,T.Z)({},D),e.searchProps),{},{onChange:function(e){console.log({value:e})},style:{marginTop:10}})),(0,W.jsx)(K,(0,T.Z)({className:"inline-flex bg-gray-500 items-center small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.searchProps)),(0,W.jsx)("button",{className:"px-2 focus:outline-none bg-gray-500 items-center  outline shadow-sm  font-medium  text-center rounded-md h-9 text-white",onClick:y,children:"Clear all filters"}),(0,W.jsx)(G,(0,T.Z)((0,T.Z)({className:"inline-flex bg-gray-500 items-center  small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.csvProps),{},{children:"Export CSV!!"})),F?(0,W.jsx)(M.EK.zx,{size:"medium",type:"outline",onClick:function(){j(!F)},children:(0,W.jsx)(M.PJ.IconFa.FaChevronUp,{})}):(0,W.jsx)(M.EK.zx,{size:"medium",type:"outline",onClick:function(){j(!F)},children:(0,W.jsx)(M.PJ.IconFa.FaChevronDown,{})}),(0,W.jsx)(M.u,{tooltipText:"All generate report update",position:"top",children:(0,W.jsx)(M.EK.zx,{size:"medium",type:"outline",onClick:function(){x&&x()},children:(0,W.jsx)(M.PJ.IconTb.TbExchange,{})})})]}),F&&(0,W.jsx)("div",{className:"mb-2 overflow-auto h-10",children:(0,W.jsx)(E,(0,T.Z)({contextual:"primary",className:"list-custom-class",btnClassName:"list-btn-custom-class"},e.columnToggleProps))}),(0,W.jsx)("div",{className:"scrollTable",children:(0,W.jsx)(U.Z,(0,T.Z)((0,T.Z)((0,T.Z)({remote:!0},e.baseProps),{},{noDataIndication:"Table is Empty",hover:!0},r),{},{filter:(0,_.ZP)(),headerClasses:"bg-gray-500 text-white whitespace-nowrap",onTableChange:Z,rowStyle:B}))}),(0,W.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,W.jsx)(M.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,N.Z)((0,I.Z)().mark((function e(){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h&&h("next");case 1:case"end":return e.stop()}}),e)}))),children:(0,W.jsx)(M.PJ.IconBi.BiSkipNext,{})}),(0,W.jsx)(M.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,N.Z)((0,I.Z)().mark((function e(){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h&&h("prev");case 1:case"end":return e.stop()}}),e)}))),children:(0,W.jsx)(M.PJ.IconBi.BiSkipPrevious,{})})]})]})}})}})},ee=(0,E.Pi)((function(e){var t=(0,z.useState)(""),n=(0,R.Z)(t,2),I=n[0],N=n[1],Z=(0,z.useState)(e.data),E=(0,R.Z)(Z,2),B=E[0],k=E[1];return(0,z.useEffect)((function(){N(e.selectedId||""),k(e.selectedId?e.data.map((function(t){return(0,T.Z)((0,T.Z)({},t),{},{selectedId:e.selectedId})})):e.data)}),[e.selectedId,e.data]),(0,W.jsx)(W.Fragment,{children:(0,W.jsx)("div",{style:{position:"relative"},children:(0,W.jsx)(X,{id:"_id",data:B,totalSize:e.totalSize,isPagination:e.isPagination,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"labId",text:"Lab Id",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader3",filter:(0,M.w9)({getFilter:function(e){r=e}}),filterRenderer:function(e,t){return(0,W.jsx)(M.Tj,{onFilter:e,column:t})}},{dataField:"name",text:"Name",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){i=e}})},{dataField:"deliveryId",text:"Delivery Id",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader3",filter:(0,M.w9)({getFilter:function(e){l=e}}),filterRenderer:function(e,t){return(0,W.jsx)(M.Tj,{onFilter:e,column:t})}},{dataField:"deliveryDate",text:"Delivery Date",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader11",filter:(0,M.w9)({getFilter:function(e){d=e}}),filterRenderer:function(e,t){return(0,W.jsx)(M.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:t.deliveryDate?J()(t.deliveryDate).format("DD-MM-YYYY HH:mm:ss"):""})}},{dataField:"reportDate",text:"Report Date",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader11",filter:(0,M.w9)({getFilter:function(e){s=e}}),filterRenderer:function(e,t){return(0,W.jsx)(M.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:t.reportDate?J()(t.reportDate).format("DD-MM-YYYY HH:mm:ss"):""})}},{dataField:"deliveryStatus",text:"Delivery Status",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){u=e}})},{dataField:"reportType",text:"Report Type",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){c=e}})},{dataField:"reportPriority",text:"Report Priority",headerClasses:"textHeader4",sort:!0,csvFormatter:function(e,t){return null!==t&&void 0!==t&&t.reportPriority?t.reportPriority:""},editable:!1},{dataField:"deliveryMode",text:"Delivery Mode",headerClasses:"textHeader4",sort:!0,csvFormatter:function(e,t){return null!==t&&void 0!==t&&t.deliveryMode?t.deliveryMode:""},editable:!1,formatter:function(e,t){var n;return(0,W.jsx)("div",{className:"flex flex-row flex-wrap gap-2",children:"string"!=typeof(null===t||void 0===t?void 0:t.deliveryMode)&&(null===t||void 0===t||null===(n=t.deliveryMode)||void 0===n?void 0:n.map((function(e){return(0,W.jsx)("span",{className:"bg-blue-800 rounded-md p-2 text-white",children:e.value})})))})}},{dataField:"destination",text:"Destination",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){f=e}})},{dataField:"comments",text:"Comments",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){p=e}})},{dataField:"startDate",text:"Start Date",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader11",filter:(0,M.w9)({getFilter:function(e){v=e}}),filterRenderer:function(e,t){return(0,W.jsx)(M.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:t.startDate?J()(t.startDate).format("DD-MM-YYYY HH:mm:ss"):""})}},{dataField:"endDate",text:"End Date",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader11",filter:(0,M.w9)({getFilter:function(e){m=e}}),filterRenderer:function(e,t){return(0,W.jsx)(M.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:t.endDate?J()(t.endDate).format("DD-MM-YYYY HH:mm:ss"):""})}},{dataField:"errorMsg",text:"Error Msg",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){x=e}})},{dataField:"clientCode",text:"Client Code",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){g=e}})},{dataField:"clientName",text:"Client Name",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){h=e}})},{dataField:"registrationLocation",text:"Registration Location",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader8",filter:(0,M.DN)({getFilter:function(e){y=e}})},{dataField:"registrationLocationCode",text:"Registration Location Code",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader8",filter:(0,M.DN)({getFilter:function(e){b=e}})},{dataField:"doctorCode",text:"Doctor Code",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){C=e}})},{dataField:"doctorName",text:"Doctor Name",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){P=e}})},{dataField:"qrCode",text:"Qr Code",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){S=e}})},{dataField:"pdf",text:"PDF",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){F=e}})},{dataField:"externalLabId",text:"External Lab Id",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){o=e}})},{dataField:"employeeCode",text:"Employee Code",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){a=e}})},{dataField:"enteredBy",text:"Entered By",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){j=e}})},{dataField:"userComments",text:"User Comments",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader3",filter:(0,M.DN)({getFilter:function(e){w=e}})},{text:"Company Code",dataField:"companyCode",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,M.t$)(e,t)},editable:!1,csvFormatter:function(e){return e||""},filter:(0,M.DN)({getFilter:function(e){D=e}}),headerClasses:"textHeader2"},{dataField:"operation",text:"Action",editable:!1,csvExport:!1,hidden:!e.isDelete,formatter:function(t,n){return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)("div",{className:"flex flex-row",children:[(0,W.jsx)(M.u,{tooltipText:"Cancel",position:"bottom",children:(0,W.jsx)(M.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"cancel",visitId:null===n||void 0===n?void 0:n.visitId,show:!0,id:n._id,title:"Are you sure?",body:"Cancel item"})},children:M.PJ.getIconTag(M.PJ.IconGi.GiCancel)})}),(0,W.jsx)(M.u,{tooltipText:"Hold",position:"bottom",children:(0,W.jsx)(M.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"hold",visitId:null===n||void 0===n?void 0:n.visitId,show:!0,id:n._id,title:"Are you sure?",body:"Hold item"})},children:M.PJ.getIconTag(M.PJ.Iconmd.MdBackHand)})}),(0,W.jsx)(M.u,{tooltipText:"Generate Report",children:(0,W.jsx)(M.PJ.IconContext,{color:"#ffffff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"done",visitId:null===n||void 0===n?void 0:n.visitId,show:!0,id:n._id,title:"Are you sure?",body:"Generate pdf status update"})},children:M.PJ.getIconTag(M.PJ.IconTb.TbExchange)})}),(0,W.jsx)(M.u,{tooltipText:"Report",children:(0,W.jsx)(M.PJ.IconContext,{color:"Done"==(null===n||void 0===n?void 0:n.deliveryStatus)?"#ffffff":"#5A5A5A",size:"20",onClick:function(){"Done"==(null===n||void 0===n?void 0:n.deliveryStatus)&&e.onReport&&e.onReport(n)},children:M.PJ.getIconTag(M.PJ.IconBs.BsFilePdf)})}),I==n._id?(0,W.jsx)(M.u,{tooltipText:"Expand",children:(0,W.jsx)(M.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){e.onExpand&&e.onExpand("")},children:M.PJ.getIconTag(M.PJ.Iconai.AiFillMinusCircle)})}):(0,W.jsx)(M.u,{tooltipText:"Expand",children:(0,W.jsx)(M.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){e.onExpand&&e.onExpand(n)},children:M.PJ.getIconTag(M.PJ.Iconai.AiFillPlusCircle)})})]})})},headerClasses:"sticky right-0  bg-gray-500 text-white z-50",classes:function(e,t,n,r){return"sticky right-0 bg-gray-500"},style:function(t,n,r,i){var o;return{zIndex:(null===(o=e.data)||void 0===o?void 0:o.length)-r}}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Report Delivery",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,n,r){e.onUpdateItem&&e.onUpdateItem(t,n,r)},onPageSizeChange:function(t,n){e.onPageSizeChange&&e.onPageSizeChange(t,n)},onFilter:function(t,n,r,i){e.onFilter&&e.onFilter(t,n,r,i)},clearAllFilter:function(){r(""),i(""),o(""),a(""),l(""),d(),s(),u(""),c(""),undefined(""),f(""),p(""),v(),m(),x(""),g(""),h(""),y(""),b(""),C(""),P(""),S(""),F(""),j(""),w(""),D("")},onUpdateDeliveryStatus:function(){e.onUpdateDeliveryStatus&&e.onUpdateDeliveryStatus()},onPagination:function(t){e.onPagination&&e.onPagination(t)}})})})})),te=Q.Search.SearchBar,ne=Q.Search.ClearSearchButton,re=Q.CSVExport.ExportCSVButton,ie=function(e){var t=e.id,n=e.data,r=e.totalSize,i=void 0===r?10:r,o=e.searchPlaceholder,a=void 0===o?"Search...":o,l=e.page,d=void 0===l?0:l,s=e.sizePerPage,u=void 0===s?10:s,c=e.columns,f=e.fileName,p=e.isEditModify,v=(e.isSelectRow,e.selectedItem,e.isPagination),m=void 0===v||v,x=(e.onSelectedRow,e.onUpdateItem),g=e.onPageSizeChange,h=(e.onUpdateDeliveryStatus,e.onFilter),y=e.clearAllFilter,b=e.onClickRow,C=(0,z.useState)(),P=(0,R.Z)(C,2),S=(P[0],P[1],(0,z.useState)(!1)),F=(0,R.Z)(S,2),j=F[0],w=F[1],D={cutome:!0,totalSize:i,paginationSize:5,pageStartIndex:0,firstPageText:"<<",prePageText:"<",nextPageText:">",lastPageText:">>",disablePageTitle:!0,paginationTotalRenderer:function(e,t,n){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"clearfix"}),(0,W.jsxs)("span",{children:["Showing ",e," to ",t," of ",n," Results"]})]})},hideSizePerPage:!0,showTotal:!1,alwaysShowAllBtns:!0,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50}],hidePageListOnlyOnePage:!0,sizePerPageRenderer:function(e){var t=e.options,n=e.currSizePerPage,r=e.onSizePerPageChange;return(0,W.jsxs)("div",{className:"btn-group items-center",role:"group",children:[(0,W.jsx)("input",{type:"number",min:"0",placeholder:"No",onChange:function(e){e.target.value&&r(e.target.value)},className:"mr-2 ml-2 leading-4 p-2 w-14 focus:outline-none focus:ring block  shadow-sm sm:text-base border border-gray-300 rounded-md"}),t.map((function(e){return(0,W.jsx)("button",{type:"button",onClick:function(){return r(e.page)},className:"btn  ".concat(n==="".concat(e.page)?"bg-primary":"bg-grey"),children:e.text},e.text)}))]})}},I={placeholder:a},N=function(e,t){var n=t.data,r=t.cellEdit,o=t.page,a=t.sizePerPage,l=t.filters,d=t.sortField,s=t.sortOrder,u=t.searchText;if("cellEdit"===e&&p&&x&&x(r.newValue,r.dataField,r.rowId),"pagination"===e&&k().isEmpty(l)&&g&&g(o,a),"filter"===e||"pagination"===e&&!k().isEmpty(l)){if("pagination"===e){if(a>i)return alert("You have not more records.");if(o*a>i)return alert("You have not more records.")}for(var c={},f=0,v=Object.entries(l);f<v.length;f++){var m=(0,R.Z)(v[f],2),y=m[0],b=m[1],C=(0,O.Z)({},y,b.filterVal);c=Object.assign(c,C)}h&&(0,V.Ds)((function(){h(e,c,"filter"===e&&1===o?0:o,a)}))}("search"===e&&(0,V.Ds)((function(){h&&h(e,{srText:u},o,a)})),"sort"===e)&&("asc"===s?n.sort((function(e,t){return e[d]>t[d]?1:t[d]>e[d]?-1:0})):n.sort((function(e,t){return e[d]>t[d]?-1:t[d]>e[d]?1:0})))},Z=function(e){var t=e.columns,n=e.onColumnToggle,r=e.toggles;return(0,W.jsx)("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons",children:t.map((function(e){return(0,T.Z)((0,T.Z)({},e),{},{toggle:r[e.dataField]})})).map((function(e,t){if(t>0)return(0,W.jsx)("button",{type:"button",className:" btn btn-primary  btn-sm whitespace-nowrap ".concat(e.toggle?"active":""),"data-toggle":"button","aria-pressed":e.toggle?"true":"false",onClick:function(){return n(e.dataField)},children:e.text},e.dataField)}))})},E={onClick:function(e,t,n){b&&b(t,n)}},B=function(e,t){var n,r,i,o,a;switch(null===e||void 0===e||null===(n=e.colorScheme)||void 0===n?void 0:n.envRangeColor){case"BOTH":return{backgroundColor:null===e||void 0===e||null===(r=e.colorScheme)||void 0===r?void 0:r.cellColor,color:null===e||void 0===e||null===(i=e.colorScheme)||void 0===i?void 0:i.fontColor};case"BACKGROUND":return{backgroundColor:null===e||void 0===e||null===(o=e.colorScheme)||void 0===o?void 0:o.cellColor};case"FONT":return{color:null===e||void 0===e||null===(a=e.colorScheme)||void 0===a?void 0:a.fontColor}}};return(0,W.jsx)($.bN,{pagination:(0,$.ZP)(0!==i?D:{page:d,sizePerPage:u,totalSize:i}),keyField:t,columns:c,data:n,children:function(e){var r=e.paginationProps,i=e.paginationTableProps;return(0,W.jsx)(Y(),{keyField:t,bootstrap4:!0,data:n,columns:c,search:!0,exportCSV:{fileName:"".concat(f,"_").concat(J()(new Date).format("YYYY-MM-DD HH:mm"),".csv"),noAutoBOM:!1,blobType:"text/csv;charset=ansi",exportAll:!1,onlyExportFiltered:!0},columnToggle:!0,children:function(e){return(0,W.jsxs)("div",{children:[(0,W.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,W.jsx)(te,(0,T.Z)((0,T.Z)((0,T.Z)({},I),e.searchProps),{},{onChange:function(e){console.log({value:e})},style:{marginTop:10}})),(0,W.jsx)(ne,(0,T.Z)({className:"inline-flex bg-gray-500 items-center small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.searchProps)),(0,W.jsx)("button",{className:"px-2 focus:outline-none bg-gray-500 items-center  outline shadow-sm  font-medium  text-center rounded-md h-9 text-white",onClick:y,children:"Clear all filters"}),(0,W.jsx)(re,(0,T.Z)((0,T.Z)({className:"inline-flex bg-gray-500 items-center  small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.csvProps),{},{children:"Export CSV!!"})),j?(0,W.jsx)(M.EK.zx,{size:"medium",type:"outline",onClick:function(){w(!j)},children:(0,W.jsx)(M.PJ.IconFa.FaChevronUp,{})}):(0,W.jsx)(M.EK.zx,{size:"medium",type:"outline",onClick:function(){w(!j)},children:(0,W.jsx)(M.PJ.IconFa.FaChevronDown,{})})]}),j&&(0,W.jsx)("div",{className:"mb-2 overflow-auto h-10",children:(0,W.jsx)(Z,(0,T.Z)({contextual:"primary",className:"list-custom-class",btnClassName:"list-btn-custom-class"},e.columnToggleProps))}),(0,W.jsx)("div",{className:"scrollTable",children:(0,W.jsx)(U.Z,(0,T.Z)((0,T.Z)((0,T.Z)({remote:!0},e.baseProps),{},{noDataIndication:"Table is Empty",hover:!0},i),{},{filter:(0,_.ZP)(),headerClasses:"bg-gray-500 text-white whitespace-nowrap",onTableChange:N,rowEvents:E,rowStyle:B}))}),m&&(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,W.jsx)($.dE,(0,T.Z)({},Object.assign({},(0,T.Z)((0,T.Z)({},r),{},{hideSizePerPage:!1})))),(0,W.jsx)($.yJ,(0,T.Z)({},r))]})})]})}})}})},oe=(0,E.Pi)((function(e){return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)("div",{style:{position:"relative"},children:(0,W.jsx)(ie,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"deliveryId",text:"Delivery Id",sort:!0,editable:!1},{dataField:"labId",text:"Lab Id",sort:!0,editable:!1},{dataField:"orderId",text:"Order Id",sort:!0,editable:!1},{dataField:"panelCode",text:"Panel Code",sort:!0,editable:!1},{dataField:"panelName",text:"Panel Name",sort:!0,editable:!1},{dataField:"testCode",text:"Test Code",sort:!0,editable:!1},{dataField:"testName",text:"Test Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"analyteCode",text:"Analyte Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"analyteName",text:"Analyte Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"rep",text:"Rep",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"delivered",text:"Delivered",sort:!0,csvFormatter:function(e,t){return"".concat(t.delivered&&t.delivered?"Yes":"No")},editable:!1,formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(M.l0.ZD,{disabled:!0,value:t.delivered})})}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Order Delivered",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,n,r){e.onUpdateItem&&e.onUpdateItem(t,n,r)},onPageSizeChange:function(t,n){e.onPageSizeChange&&e.onPageSizeChange(t,n)},onFilter:function(t,n,r,i){e.onFilter&&e.onFilter(t,n,r,i)},clearAllFilter:function(){}})})})})),ae=n(79476),le=n(71249),de=n(89238),se=n(32973),ue=n.n(se),ce=function(e){var t=e.show,n=void 0!==t&&t,r=e.data,i=e.templateDetails,o=e.onClose,a=(e.onReceiptUpload,(0,z.useState)()),l=(0,R.Z)(a,2),d=l[0],s=l[1],u=z.useState(n),c=(0,R.Z)(u,2),f=c[0],p=c[1],v=(0,z.useState)(!0),m=(0,R.Z)(v,2),x=m[0],g=m[1],h=(0,z.useState)(!1),y=(0,R.Z)(h,2),b=y[0],C=y[1];(0,z.useEffect)((function(){p(n)}),[n]),(0,z.useEffect)((function(){if(r){for(var e=k().mapKeys(r,(function(e,t){return t.split(" -")[0]})),t=[],n=function(){var e=o[i],n=0;e[1].map((function(t){var r;return null===t||void 0===t||null===(r=t.patientResultList)||void 0===r?void 0:r.map((function(t){var r;(null===(r=t.reportTemplate)||void 0===r?void 0:r.split(" - ")[0])==e[0]&&(n=t.reportTemplateOrder)}))})),t.push({template:e[0],patientReports:e[1],order:n})},i=0,o=Object.entries(e);i<o.length;i++)n();t=k().orderBy(t,"order","asc"),s(t)}}),[r]);var P=function(e){return(0,W.jsx)(le.BB,{title:"Delivery Queue",children:e.map((function(e){return(0,W.jsxs)(W.Fragment,{children:["TEMP0001"==e.template&&k().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(de.g4,{data:{patientReports:(0,T.Z)((0,T.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0001"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===i||void 0===i?void 0:i.find((function(e){return"TEMP0001"==e.templateCode}))},isWithHeader:x})})),"TEMP0002"==e.template&&k().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(de.p3,{data:{patientReports:(0,T.Z)((0,T.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0002"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===i||void 0===i?void 0:i.find((function(e){return"TEMP0002"==e.templateCode}))},isWithHeader:x})})),"TEMP0003"==e.template&&k().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(de.Lk,{data:{patientReports:(0,T.Z)((0,T.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0003"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===i||void 0===i?void 0:i.find((function(e){return"TEMP0003"==e.templateCode}))},isWithHeader:x})})),"TEMP0004"==e.template&&k().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(de.oJ,{data:{patientReports:(0,T.Z)((0,T.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0004"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===i||void 0===i?void 0:i.find((function(e){return"TEMP0004"==(null===e||void 0===e?void 0:e.templateCode)}))},isWithHeader:x})})),"TEMP0005"==e.template&&k().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(de.uf,{data:{patientReports:(0,T.Z)((0,T.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0005"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===i||void 0===i?void 0:i.find((function(e){return"TEMP0005"==e.templateCode}))},isWithHeader:x})})),"TEMP0006"==e.template&&k().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(de.wm,{data:{patientReports:(0,T.Z)((0,T.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0006"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===i||void 0===i?void 0:i.find((function(e){return"TEMP0006"==e.templateCode}))},isWithHeader:x})})),"TEMP0007"==e.template&&k().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(de.Wf,{data:{patientReports:(0,T.Z)((0,T.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0007"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===i||void 0===i?void 0:i.find((function(e){return"TEMP0007"==e.templateCode}))},isWithHeader:x})})),"TEMP0008"==e.template&&k().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(de.Nm,{data:{patientReports:(0,T.Z)((0,T.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0008"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===i||void 0===i?void 0:i.find((function(e){return"TEMP0008"==e.templateCode}))},isWithHeader:x})}))]})}))})};return(0,W.jsxs)(ae.W2,{children:[f&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"justify-center items-center  overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:(0,W.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,W.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,W.jsxs)("div",{className:"flex items-start justify-between p-3 border-b border-solid border-gray-300 rounded-t",children:[(0,W.jsx)("h3",{className:"text-3xl font-semibold",children:"Generate Reports"}),(0,W.jsx)("button",{className:"p-1  border-0 text-black opacity-1 ml-6 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){p(!1),o&&o()},children:(0,W.jsx)("span",{className:" text-black h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})]}),(0,W.jsx)("div",{className:"relative p-2 flex-auto",children:(0,W.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:r&&(0,W.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,W.jsx)(M.l0.rW,{label:"Report Type",labelStyle:{fontWeight:"bold",fontSize:16},value:x?"withHeader":"withoutHeader",values:[{value:"withHeader",label:"With Header"},{value:"withoutHeader",label:"Without Header"}],onChange:function(e){g("withHeader"==e)}}),(0,W.jsxs)("div",{className:"flex flex-row content-center justify-center gap-2",children:[(0,W.jsx)(M.u,{tooltipText:"View",children:(0,W.jsx)(M.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,N.Z)((0,I.Z)().mark((function e(){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),o&&o();case 2:case"end":return e.stop()}}),e)}))),children:M.PJ.getIconTag(M.PJ.Iconmd.MdOutlinePreview)})}),(0,W.jsx)(M.u,{tooltipText:"Print",children:(0,W.jsx)(M.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,N.Z)((0,I.Z)().mark((function e(){var t,n,r;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(d);case 2:return t=e.sent,e.next=5,(0,le.eA)(t).toBlob();case 5:n=e.sent,r=URL.createObjectURL(n),ue()({printable:r,type:"pdf",showModal:!0}),o&&o();case 9:case"end":return e.stop()}}),e)}))),children:M.PJ.getIconTag(M.PJ.IconBi.BiPrinter)})})]})]})})}),(0,W.jsxs)("div",{className:"flex items-center  p-3 border-t border-solid border-gray-300 rounded-b justify-between",children:[(0,W.jsx)("span",{className:"text-red",children:"Note: ResultType FR & BO report opening new tab runtime"}),(0,W.jsx)("button",{className:"text-red background-transparent font-bold uppercase  text-sm outline-none focus:outline-none",type:"button",style:{transition:"all .15s ease"},onClick:function(){p(!1),o&&o()},children:"Close"})]})]})})}),(0,W.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}),(0,W.jsx)(M.u_,{title:"Delivery Queue Reports",show:b,close:function(){C(!1)},autoClose:(k().has(d,"TEMP0007")||!!k().has(d,"TEMP0008"))&&1==k().size(d),children:b?(0,W.jsx)(le.Z$,{style:{width:window.innerWidth,height:window.innerHeight/1.2},showToolbar:!1,children:P(d)}):null})]})},fe=(n(70042),n(22414)),pe=(n(3069),(0,E.Pi)((function(){var e,t,r=(0,fe.mZ)(),i=r.deliveryQueueStore,o=r.routerStore,a=r.loginStore,l=r.reportSettingStore,d=(0,H.cI)(),s=(d.control,d.handleSubmit,d.formState.errors,d.setValue,(0,z.useState)()),u=(0,R.Z)(s,2),c=u[0],f=u[1],p=(0,z.useState)(""),v=(0,R.Z)(p,2),m=v[0],x=v[1],g=(0,z.useState)(!1),h=(0,R.Z)(g,2),y=h[0],b=h[1];(0,z.useEffect)((function(){!function(){var e=a.login;"CORPORATE_PORTAL"==(null===e||void 0===e?void 0:e.role)?i.deliveryQueueService.findByFields({input:{filter:{clientCode:e.lab}}}).then((function(e){var t,n,r;e.findByFieldsDeliveryQueue.success&&i.updateReportDeliveryList({deliveryQueues:{data:null===(t=e.findByFieldsDeliveryQueue)||void 0===t?void 0:t.data,paginatorInfo:{count:null===(n=e.findByFieldsDeliveryQueue)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.length}}})})):i.deliveryQueueService.listDeliveryQueue()}()}),[]);var C=function(e){return"string"===typeof e?null===e||void 0===e?void 0:e.toUpperCase():e},P=function(e,t){var n=Object.keys(t);return e.filter((function(e){return n.every((function(n){return console.log({key:n}),!t[n].length||t[n].find((function(t){return C(t)===C(e[n])}))}))}))},S=function(e){var t=[],n=k().groupBy(e,"reportPriority");if(null!==n&&void 0!==n&&n.Progressive){var r=null===n||void 0===n?void 0:n.Progressive,i=k().map(k().groupBy(r,(function(e){return e.labId&&e.panelCode})),(function(e){return k().maxBy(e,"deliveryId")}));t.push.apply(t,(0,Z.Z)(i))}if(n["All Together"]){var o=n["All Together"],a=k().map(k().groupBy(o,"labId"),(function(e){return k().maxBy(e,"deliveryId")}));t.push.apply(t,(0,Z.Z)(a))}if(n["One Today"]){var l=n["One Today"],d=k().map(k().groupBy(l,(function(e){return e.labId&&e.approvalDate})));null===d||void 0===d||d.filter((function(e){null!==e&&void 0!==e&&e.find((function(e){return"Final"==(null===e||void 0===e?void 0:e.reportType)}))?t.push(null===e||void 0===e?void 0:e.find((function(e){return"Final"==(null===e||void 0===e?void 0:e.reportType)}))):t.push.apply(t,(0,Z.Z)(k().map(k().groupBy(e,(function(e){return e.labId&&e.approvalDate})),(function(e){return k().maxBy(e,"deliveryId")}))))}))}if(n.Daily){var s=n.Daily,u=k().map(k().groupBy(s,(function(e){return e.labId&&e.approvalDate})));null===u||void 0===u||u.filter((function(e){null!==e&&void 0!==e&&e.find((function(e){return"Final"==(null===e||void 0===e?void 0:e.reportType)}))?t.push(null===e||void 0===e?void 0:e.find((function(e){return"Final"==(null===e||void 0===e?void 0:e.reportType)}))):t.push.apply(t,(0,Z.Z)(k().map(k().groupBy(e,(function(e){return e.labId&&e.approvalDate})),(function(e){return k().maxBy(e,"deliveryId")}))))}))}return t},F=function(){var e=(0,N.Z)((0,I.Z)().mark((function e(t){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r={};r="Progressive"==t.reportPriority?{labId:t.labId,panelCode:t.panelCode}:"One Today"!=t.reportPriority&&"Daily"!=t.reportPriority||"Interim"!=t.reportType?{labId:t.labId}:{labId:t.labId,reportType:"Interim",approvalDate:null===t||void 0===t?void 0:t.approvalDate},i.deliveryQueueService.findByFields({input:{filter:r}}).then((function(t){if(t.findByFieldsDeliveryQueue.success){var n=t.findByFieldsDeliveryQueue.data;n=k().unionBy(n,(function(e){return e.patientResultId})),n=k().orderBy(n,"deliveryId","desc"),e(n)}}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,N.Z)((0,I.Z)().mark((function e(t){var r,o,a,l,d,s,u,c,f,p,v,m,x,g,h,C,P,S;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=t.type,s=t.id,u=t.visitId,c=t.ids,"cancel"!=d&&"hold"!=d&&"done"!=d){e.next=6;break}return e.next=4,i.deliveryQueueService.updateDeliveryQueue({input:{_id:s,visitId:u,deliveryStatus:"cancel"==d?"Cancel":"hold"==d?"Hold":"Done"}}).then((function(e){e.updateDeliveryQueue.success&&M.FN.success({message:"\ud83d\ude0a ".concat(e.updateDeliveryQueue.message)})}));case 4:e.next=8;break;case 6:return e.next=8,i.deliveryQueueService.updateDeliveryQueueByVisitIds({input:{filter:{ids:c,visitId:u,deliveryStatus:"Done"}}}).then((function(e){e.updateByVisitIdsDeliveryQueue.success&&M.FN.success({message:"\ud83d\ude0a ".concat(e.updateByVisitIdsDeliveryQueue.message)})}));case 8:"pagination"==(null===(r=n.g)||void 0===r||null===(o=r.filter)||void 0===o?void 0:o.mode)?i.deliveryQueueService.listDeliveryQueue(null===(f=n.g)||void 0===f||null===(p=f.filter)||void 0===p?void 0:p.pageNo,100):"filter"==(null===(a=n.g)||void 0===a||null===(l=a.filter)||void 0===l?void 0:l.mode)?i.deliveryQueueService.filter({input:{type:null===(v=n.g)||void 0===v||null===(m=v.filter)||void 0===m?void 0:m.type,filter:null===(x=n.g)||void 0===x||null===(g=x.filter)||void 0===g?void 0:g.filter,page:null===(h=n.g)||void 0===h||null===(C=h.filter)||void 0===C?void 0:C.page,limit:null===(P=n.g)||void 0===P||null===(S=P.filter)||void 0===S?void 0:S.limit}}):i.deliveryQueueService.listDeliveryQueue(),b(!y);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=(0,z.useMemo)((function(){var e,t;return(0,W.jsx)(ee,{data:S(i.reportDeliveryList)||[],totalSize:null===(e=S(i.reportDeliveryList))||void 0===e?void 0:e.length,isPagination:"SYSADMIN"==(null===(t=a.login)||void 0===t?void 0:t.role),selectedId:m,isDelete:L.o.checkPermission(o.userPermission,"Delete"),isEditModify:L.o.checkPermission(o.userPermission,"Edit/Modify"),onUpdate:function(e){return j(e)},onFilter:function(e,t,r,o){var l;if(n.g.filter={mode:"filter",type:e,filter:t,page:r,limit:o},"SYSADMIN"==(null===(l=a.login)||void 0===l?void 0:l.role))i.deliveryQueueService.filter({input:{type:e,filter:t,page:r,limit:o}});else if("filter"==e)console.log({list:P(i.reportDeliveryListCopy,t)});else{if(""==t.srText)return i.updateReportDeliveryList(i.reportDeliveryListCopy);var d=i.reportDeliveryListCopy,s=null===d||void 0===d?void 0:d.filter((function(e){var n;return JSON.stringify(e).toLocaleLowerCase().match(null===(n=t.srText)||void 0===n?void 0:n.toLocaleLowerCase())}));i.updateReportDeliveryList(s)}},onExpand:function(){var e=(0,N.Z)((0,I.Z)().mark((function e(t){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t._id),"object"==typeof t?F(t).then((function(e){i.updateOrderDeliveredList(e)})):i.updateOrderDeliveredList([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onUpdateDeliveryStatus:function(){var e,t;j({type:"updateAllDeliveryStatus",ids:null===(e=i.reportDeliveryList)||void 0===e?void 0:e.map((function(e){return e._id})),visitId:null===(t=i.reportDeliveryList)||void 0===t?void 0:t.map((function(e){return e.visitId})),show:!0,title:"Are you sure?",body:"All generate pdf status update"})},onReport:function(){var e=(0,N.Z)((0,I.Z)().mark((function e(t){var n,r;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t);case 2:r=e.sent,i.deliveryQueueService.listPatientReports(null===(n=r[0])||void 0===n?void 0:n.labId).then((function(e){if(e.getPatientReports.success){var t=[];null===r||void 0===r||r.filter((function(n){null!==n&&void 0!==n&&n.reportTemplate&&t.push((0,T.Z)((0,T.Z)({},e.getPatientReports.data),{},{patientResult:n}))}));var n=k().uniqBy(r,(function(e){return null===e||void 0===e?void 0:e.reportTemplate})),i=[];n.filter((function(e){var t;i.push(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])})),(null===i||void 0===i?void 0:i.length)>0&&l.templatePatientResultService.getTempPatientResultListByTempCodes({input:{filter:{reportTemplateList:i}}}).then(function(){var e=(0,N.Z)((0,I.Z)().mark((function e(n){var r;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t.filter((function(e){var t=n.getTempPatientResultListByTempCodes.list.find((function(t){return t.templateCode==e.patientResult.reportTemplate.split(" -")[0]}));return Object.assign(e,{reportSettings:t})})),r=k().groupBy(t,(function(e){return e.patientResult.reportTemplate})),!k().isEmpty(r)){e.next=6;break}return e.abrupt("return",M.FN.error({message:"\ud83d\ude0c Report template not found."}));case 6:f({show:!0,data:r,templateDetails:n.getTempPatientResultListByTempCodes.list});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else alert(e.getPatientReports.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPagination:function(e){var t=i.orderDeliveryPageNo;"next"==e?t=i.orderDeliveryPageNo+1:0==t?t=0:t-=1,i.deliveryQueueService.listDeliveryQueue(t,100),i.updateOrderDeliveryPageNo(t),n.g.filter={mode:"pagination",pageNo:t,limit:100}}})}),[i.reportDeliveryList,m,y]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(M.h4,{children:[(0,W.jsx)(M.CD,{title:(null===(e=o.selectedComponents)||void 0===e?void 0:e.title)||""}),(0,W.jsx)(M.Nd,{store:a})]}),(0,W.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,W.jsx)("span",{className:"font-bold text-lg underline",children:"Report Delivery"}),w]}),(null===(t=i.orderDeliveredList)||void 0===t?void 0:t.length)>0&&(0,W.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,W.jsx)("span",{className:"font-bold text-lg underline",children:"Order Delivered"}),(0,W.jsx)(oe,{data:i.orderDeliveredList||[],totalSize:i.orderDeliveredListCount})]}),(0,W.jsx)(ce,(0,T.Z)((0,T.Z)({},c),{},{onClose:function(){f({show:!1})}}))]})}))),ve=pe}}]);
//# sourceMappingURL=3883.b3647352.chunk.js.map