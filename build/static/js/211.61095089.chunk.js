"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[211],{67211:function(e,t,i){i.r(t),i.d(t,{default:function(){return ae}});var n,r,o,a,l,s,d,u,c,f,p,x,v,m,g,h,y,b,F,C,D,j,P,S,w=i(1413),N=i(29439),I=i(72791),R=i(8907),T=i(763),E=i.n(T),k=i(40408),z=i(61134),Z=i(10621),M=i(97892),H=i.n(M),L=i(4942),U=i(2002),B=i(33294),Y=i.n(B),Q=i(36161),A=i(92746),J=(i(26192),i(96)),O=i(80184),_=B.Search.SearchBar,V=B.Search.ClearSearchButton,q=B.CSVExport.ExportCSVButton,W=function(e){var t=e.id,i=e.data,n=e.totalSize,r=void 0===n?10:n,o=e.searchPlaceholder,a=void 0===o?"Search...":o,l=e.page,s=void 0===l?0:l,d=e.sizePerPage,u=void 0===d?10:d,c=e.columns,f=e.fileName,p=e.isEditModify,x=(e.isSelectRow,e.selectedItem),v=e.isPagination,m=void 0===v||v,g=(e.onSelectedRow,e.onUpdateItem),h=e.onPageSizeChange,y=e.onUpdateDeliveryStatus,b=e.onFilter,F=e.clearAllFilter,C=e.onClickRow,D=(0,I.useState)(),j=(0,N.Z)(D,2),P=(j[0],j[1],(0,I.useState)(!1)),S=(0,N.Z)(P,2),R=S[0],T=S[1],z={cutome:!0,totalSize:r,paginationSize:5,pageStartIndex:0,firstPageText:"<<",prePageText:"<",nextPageText:">",lastPageText:">>",disablePageTitle:!0,paginationTotalRenderer:function(e,t,i){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:"clearfix"}),(0,O.jsxs)("span",{children:["Showing ",e," to ",t," of ",i," Results"]})]})},hideSizePerPage:!0,showTotal:!1,alwaysShowAllBtns:!0,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50}],hidePageListOnlyOnePage:!0,sizePerPageRenderer:function(e){var t=e.options,i=e.currSizePerPage,n=e.onSizePerPageChange;return(0,O.jsxs)("div",{className:"btn-group items-center",role:"group",children:[(0,O.jsx)("input",{type:"number",min:"0",placeholder:"No",onChange:function(e){e.target.value&&n(e.target.value)},className:"mr-2 ml-2 leading-4 p-2 w-14 focus:outline-none focus:ring block  shadow-sm sm:text-base border border-gray-300 rounded-md"}),t.map((function(e){return(0,O.jsx)("button",{type:"button",onClick:function(){return n(e.page)},className:"btn  ".concat(i==="".concat(e.page)?"bg-primary":"bg-grey"),children:e.text},e.text)}))]})}},Z={placeholder:a},M=function(e,t){var i=t.data,n=t.cellEdit,o=t.page,a=t.sizePerPage,l=t.filters,s=t.sortField,d=t.sortOrder,u=t.searchText;if("cellEdit"===e&&p&&g&&g(n.newValue,n.dataField,n.rowId),"pagination"===e&&E().isEmpty(l)&&h&&h(o,a),"filter"===e||"pagination"===e&&!E().isEmpty(l)){if("pagination"===e){if(a>r)return alert("You have not more records.");if(o*a>r)return alert("You have not more records.")}for(var c={},f=0,x=Object.entries(l);f<x.length;f++){var v=(0,N.Z)(x[f],2),m=v[0],y=v[1],F=(0,L.Z)({},m,y.filterVal);c=Object.assign(c,F)}b&&(0,J.Ds)((function(){b(e,c,"filter"===e&&1===o?0:o,a)}))}("search"===e&&(0,J.Ds)((function(){b&&b(e,{srText:u},o,a)})),"sort"===e)&&("asc"===d?i.sort((function(e,t){return e[s]>t[s]?1:t[s]>e[s]?-1:0})):i.sort((function(e,t){return e[s]>t[s]?-1:t[s]>e[s]?1:0})))},B=function(e){var t=e.columns,i=e.onColumnToggle,n=e.toggles;return(0,O.jsx)("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons",children:t.map((function(e){return(0,w.Z)((0,w.Z)({},e),{},{toggle:n[e.dataField]})})).map((function(e,t){if(t>0)return(0,O.jsx)("button",{type:"button",className:" btn btn-primary  btn-sm whitespace-nowrap ".concat(e.toggle?"active":""),"data-toggle":"button","aria-pressed":e.toggle?"true":"false",onClick:function(){return i(e.dataField)},children:e.text},e.dataField)}))})},W={onClick:function(e,t,i){C&&C(t,i)}},G=function(e,t){if(e._id==(null===x||void 0===x?void 0:x._id))return{backgroundColor:"#a9a9a9"}};return(0,O.jsx)(Q.bN,{pagination:(0,Q.ZP)(0!==r?z:{page:s,sizePerPage:u,totalSize:r}),keyField:t,columns:c,data:i,children:function(e){var n=e.paginationProps,r=e.paginationTableProps;return(0,O.jsx)(Y(),{keyField:t,bootstrap4:!0,data:i,columns:c,search:!0,exportCSV:{fileName:"".concat(f,"_").concat(H()(new Date).format("YYYY-MM-DD HH:mm"),".csv"),noAutoBOM:!1,blobType:"text/csv;charset=ansi",exportAll:!1,onlyExportFiltered:!0},columnToggle:!0,children:function(e){return(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,O.jsx)(_,(0,w.Z)((0,w.Z)((0,w.Z)({},Z),e.searchProps),{},{onChange:function(e){console.log({value:e})},style:{marginTop:10}})),(0,O.jsx)(V,(0,w.Z)({className:"inline-flex bg-gray-500 items-center small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.searchProps)),(0,O.jsx)("button",{className:"px-2 focus:outline-none bg-gray-500 items-center  outline shadow-sm  font-medium  text-center rounded-md h-9 text-white",onClick:F,children:"Clear all filters"}),(0,O.jsx)(q,(0,w.Z)((0,w.Z)({className:"inline-flex bg-gray-500 items-center  small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.csvProps),{},{children:"Export CSV!!"})),R?(0,O.jsx)(k.EK.zx,{size:"medium",type:"outline",onClick:function(){T(!R)},children:(0,O.jsx)(k.PJ.IconFa.FaChevronUp,{})}):(0,O.jsx)(k.EK.zx,{size:"medium",type:"outline",onClick:function(){T(!R)},children:(0,O.jsx)(k.PJ.IconFa.FaChevronDown,{})}),(0,O.jsx)(k.u,{tooltipText:"All records delivery status update",position:"top",children:(0,O.jsx)(k.EK.zx,{size:"medium",type:"outline",onClick:function(){y&&y()},children:(0,O.jsx)(k.PJ.IconTb.TbExchange,{})})})]}),R&&(0,O.jsx)("div",{className:"mb-2 overflow-auto h-10",children:(0,O.jsx)(B,(0,w.Z)({contextual:"primary",className:"list-custom-class",btnClassName:"list-btn-custom-class"},e.columnToggleProps))}),(0,O.jsx)("div",{className:"scrollTable",children:(0,O.jsx)(U.Z,(0,w.Z)((0,w.Z)((0,w.Z)({remote:!0},e.baseProps),{},{noDataIndication:"Table is Empty",hover:!0},r),{},{filter:(0,A.ZP)(),headerClasses:"bg-gray-500 text-white whitespace-nowrap",onTableChange:M,rowEvents:W,rowStyle:G}))}),m&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,O.jsx)(Q.dE,(0,w.Z)({},Object.assign({},(0,w.Z)((0,w.Z)({},n),{},{hideSizePerPage:!1})))),(0,O.jsx)(Q.yJ,(0,w.Z)({},n))]}),(0,O.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,O.jsx)(Q.NJ,(0,w.Z)({},n))})]})]})}})}})},G=(0,R.Pi)((function(e){var t=(0,I.useState)({}),i=(0,N.Z)(t,2),w=i[0],R=i[1];return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)("div",{style:{position:"relative"},children:(0,O.jsx)(W,{id:"_id",data:e.data,totalSize:e.totalSize,selectedItem:w,isPagination:e.isPagination,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"labId",text:"Lab Id",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){n=e}})},{dataField:"externalLabId",text:"External Lab Id",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){r=e}})},{dataField:"employeeCode",text:"Employee Code",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){o=e}})},{dataField:"deliveryId",text:"Delivery Id",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.w9)({getFilter:function(e){a=e}}),filterRenderer:function(e,t){return(0,O.jsx)(k.Tj,{onFilter:e,column:t})}},{dataField:"deliveryDate",text:"Delivery Date",sort:!0,editable:!1,headerClasses:"textHeader11",filter:(0,k.w9)({getFilter:function(e){l=e}}),filterRenderer:function(e,t){return(0,O.jsx)(k.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,O.jsx)(O.Fragment,{children:t.deliveryDate?H()(t.deliveryDate).format("YYYY-MM-DD"):""})}},{dataField:"reportDate",text:"Report Date",sort:!0,editable:!1,headerClasses:"textHeader11",filter:(0,k.w9)({getFilter:function(e){s=e}}),filterRenderer:function(e,t){return(0,O.jsx)(k.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,O.jsx)(O.Fragment,{children:t.reportDate?H()(t.reportDate).format("YYYY-MM-DD"):""})}},{dataField:"deliveryStatus",text:"Delivery Status",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){d=e}})},{dataField:"reportType",text:"Report Type",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){u=e}})},{dataField:"deliveryMode",text:"Delivery Mode",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){c=e}})},{dataField:"destination",text:"Destination",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){f=e}})},{dataField:"comments",text:"Comments",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){p=e}})},{dataField:"startDate",text:"Start Date",sort:!0,editable:!1,headerClasses:"textHeader11",filter:(0,k.w9)({getFilter:function(e){x=e}}),filterRenderer:function(e,t){return(0,O.jsx)(k.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,O.jsx)(O.Fragment,{children:t.startDate?H()(t.startDate).format("YYYY-MM-DD"):""})}},{dataField:"endDate",text:"End Date",sort:!0,editable:!1,headerClasses:"textHeader11",filter:(0,k.w9)({getFilter:function(e){v=e}}),filterRenderer:function(e,t){return(0,O.jsx)(k.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,O.jsx)(O.Fragment,{children:t.endDate?H()(t.endDate).format("YYYY-MM-DD"):""})}},{dataField:"errorMsg",text:"Error Msg",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){m=e}})},{dataField:"clientCode",text:"Client Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){g=e}})},{dataField:"clientName",text:"Client Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){h=e}})},{dataField:"registrationLocation",text:"Registration Location",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader8",filter:(0,k.DN)({getFilter:function(e){y=e}})},{dataField:"registrationLocationCode",text:"Registration Location Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader8",filter:(0,k.DN)({getFilter:function(e){b=e}})},{dataField:"doctorCode",text:"Doctor Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){F=e}})},{dataField:"doctorName",text:"Doctor Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){C=e}})},{dataField:"qrCode",text:"Qr Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){D=e}})},{dataField:"pdf",text:"PDF",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){j=e}})},{dataField:"enteredBy",text:"Entered By",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){P=e}})},{dataField:"userComments",text:"User Comments",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){S=e}})},{dataField:"operation",text:"Action",editable:!1,csvExport:!1,hidden:!e.isDelete,formatter:function(t,i){return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)("div",{className:"flex flex-row",children:[(0,O.jsx)(k.u,{tooltipText:"Cancel",position:"bottom",children:(0,O.jsx)(k.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"cancel",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Cancel item"})},children:k.PJ.getIconTag(k.PJ.IconGi.GiCancel)})}),(0,O.jsx)(k.u,{tooltipText:"Hold",position:"bottom",children:(0,O.jsx)(k.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"hold",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Hold item"})},children:k.PJ.getIconTag(k.PJ.Iconmd.MdBackHand)})}),(0,O.jsx)(k.u,{tooltipText:"Delivery Status",children:(0,O.jsx)(k.PJ.IconContext,{color:"#ffffff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"generatePdf",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Generate pdf status update"})},children:k.PJ.getIconTag(k.PJ.IconTb.TbExchange)})}),(0,O.jsx)(k.u,{tooltipText:"Medical Report",children:(0,O.jsx)(k.PJ.IconContext,{color:"#ffffff",size:"20",onClick:function(){return e.onReport&&e.onReport(null===i||void 0===i?void 0:i.labId)},children:k.PJ.getIconTag(k.PJ.IconBs.BsFilePdf)})})]})})},headerClasses:"sticky right-0  bg-gray-500 text-white z-50",classes:function(e,t,i,n){return"sticky right-0 bg-gray-500"},style:function(t,i,n,r){var o;return{zIndex:(null===(o=e.data)||void 0===o?void 0:o.length)-n}}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Report Delivery",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,i,n){e.onUpdateItem&&e.onUpdateItem(t,i,n)},onPageSizeChange:function(t,i){e.onPageSizeChange&&e.onPageSizeChange(t,i)},onFilter:function(t,i,n,r){e.onFilter&&e.onFilter(t,i,n,r)},clearAllFilter:function(){n(""),r(""),o(""),a(""),l(),s(),d(""),u(""),c(""),f(""),p(""),x(),v(),m(""),g(""),h(""),y(""),b(""),F(""),C(""),D(""),j(""),P(""),S("")},onClickRow:function(t,i){R(t),e.onClickRow&&e.onClickRow(t,i)},onUpdateDeliveryStatus:function(){e.onUpdateDeliveryStatus&&e.onUpdateDeliveryStatus()}})})})})),K=(0,R.Pi)((function(e){return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)("div",{style:{position:"relative"},children:(0,O.jsx)(W,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"deliveryId",text:"Delivery Id",sort:!0,editable:!1},{dataField:"labId",text:"Lab Id",sort:!0,editable:!1},{dataField:"orderId",text:"Order Id",sort:!0,editable:!1},{dataField:"panelCode",text:"Panel Code",sort:!0,editable:!1},{dataField:"panelName",text:"Panel Name",sort:!0,editable:!1},{dataField:"testCode",text:"Test Code",sort:!0,editable:!1},{dataField:"testName",text:"Test Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"analyteCode",text:"Analyte Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"analyteName",text:"Analyte Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"rep",text:"Rep",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"delivered",text:"Delivered",sort:!0,csvFormatter:function(e,t){return"".concat(t.delivered&&t.delivered?"Yes":"No")},editable:!1,formatter:function(e,t){return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(k.l0.ZD,{disabled:!0,value:t.delivered})})}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Order Delivered",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,i,n){e.onUpdateItem&&e.onUpdateItem(t,i,n)},onPageSizeChange:function(t,i){e.onPageSizeChange&&e.onPageSizeChange(t,i)},onFilter:function(t,i,n,r){e.onFilter&&e.onFilter(t,i,n,r)},clearAllFilter:function(){}})})})})),$=i(74165),X=i(15861),ee=i(79476),te=i(94016),ie=i(89238),ne=function(e){var t=e.show,i=void 0!==t&&t,n=e.data,r=e.onClose,o=(e.onReceiptUpload,(0,I.useState)()),a=(0,N.Z)(o,2),l=a[0],s=a[1],d=I.useState(i),u=(0,N.Z)(d,2),c=u[0],f=u[1],p=(0,I.useState)("withHeader"),x=(0,N.Z)(p,2),v=x[0],m=x[1];(0,I.useEffect)((function(){f(i)}),[i]),(0,I.useEffect)((function(){if(n){var e=E().mapKeys(n,(function(e,t){return t.split(" -")[0]}));s(e),console.log({newObj:e})}}),[n]);var g=function(e){return(0,O.jsx)(te.Z$,{style:{width:"100%",height:"90%"},showToolbar:!0,children:(0,O.jsxs)(te.BB,{title:"Delivery Queue",children:[e.TEMP0001&&E().uniqBy(l.TEMP0001,"labId").map((function(e){return(0,O.jsx)(ie.g4,{data:{patientReports:e}})})),e.TEMP0002&&E().uniqBy(l.TEMP0002,"labId").map((function(e){return(0,O.jsx)(ie.p3,{data:{patientReports:e}})})),e.TEMP0003&&E().uniqBy(l.TEMP0003,"labId").map((function(e){return(0,O.jsx)(ie.Lk,{data:{patientReports:e}})})),e.TEMP0004&&E().uniqBy(l.TEMP0004,"labId").map((function(e){return(0,O.jsx)(ie.oJ,{data:{patientReports:e}})})),e.TEMP0005&&E().uniqBy(l.TEMP0005,"labId").map((function(e){return(0,O.jsx)(ie.uf,{data:{patientReports:e}})}))]})})};return(0,O.jsx)(ee.W2,{children:c&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:"justify-center items-center  overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:(0,O.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,O.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,O.jsxs)("div",{className:"flex items-start justify-between p-3 border-b border-solid border-gray-300 rounded-t",children:[(0,O.jsx)("h3",{className:"text-3xl font-semibold",children:"Generate Reports"}),(0,O.jsx)("button",{className:"p-1  border-0 text-black opacity-1 ml-6 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){f(!1),r&&r()},children:(0,O.jsx)("span",{className:" text-black h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})]}),(0,O.jsx)("div",{className:"relative p-2 flex-auto",children:(0,O.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:n&&(0,O.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,O.jsx)(k.l0.rW,{label:"Report Type",labelStyle:{fontWeight:"bold",fontSize:16},value:v,values:[{value:"withHeader",label:"With Header"},{value:"withoutHeader",label:"Without Header"}],onChange:function(e){m(e)}}),(0,O.jsxs)("div",{className:"flex flex-row content-center justify-center gap-2",children:[(0,O.jsx)(k.u,{tooltipText:"Download",children:(0,O.jsx)(k.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,X.Z)((0,$.Z)().mark((function e(){return(0,$.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(l);case 1:case"end":return e.stop()}}),e)}))),children:k.PJ.getIconTag(k.PJ.Iconhi.HiOutlineFolderDownload)})}),l&&g(l)]})]})})}),(0,O.jsx)("div",{className:"flex items-center justify-end p-3 border-t border-solid border-gray-300 rounded-b",children:(0,O.jsx)("button",{className:"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1",type:"button",style:{transition:"all .15s ease"},onClick:function(){f(!1),r&&r()},children:"Close"})})]})})}),(0,O.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})})},re=(i(70042),i(78697)),oe=(i(3069),(0,R.Pi)((function(){var e,t=(0,re.mZ)(),i=(t.loading,t.deliveryQueueStore),n=t.routerStore,r=t.loginStore,o=(t.receiptStore,t.reportSettingStore),a=(0,z.cI)(),l=(a.control,a.handleSubmit,a.formState.errors,a.setValue,(0,I.useState)()),s=(0,N.Z)(l,2),d=s[0],u=s[1],c=(0,I.useState)(),f=(0,N.Z)(c,2),p=f[0],x=f[1],v=(0,I.useState)(),m=(0,N.Z)(v,2);m[0],m[1];(0,I.useEffect)((function(){!function(){var e=r.login;"SYSADMIN"!=(null===e||void 0===e?void 0:e.role)?"CORPORATE_PORTAL"!=(null===e||void 0===e?void 0:e.role)?k.FN.warning({message:"\ud83d\ude1e You don't have access permission for delivery queue. Please contact to admin"}):i.deliveryQueueService.findByFields({input:{filter:{clientCode:e.lab}}}).then((function(e){var t,n,r;e.findByFieldsDeliveryQueue.success&&i.updateReportDeliveryList({deliveryQueues:{data:null===(t=e.findByFieldsDeliveryQueue)||void 0===t?void 0:t.data,paginatorInfo:{count:null===(n=e.findByFieldsDeliveryQueue)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.length}}})})):i.deliveryQueueService.listDeliveryQueue()}()}),[]);var g=function(e){return"string"===typeof e?e.toUpperCase():e},h=function(e,t){var i=Object.keys(t);return e.filter((function(e){return console.log({item:e}),i.every((function(i){return console.log({key:i}),!t[i].length||t[i].find((function(t){return g(t)===g(e[i])}))}))}))},y=(0,I.useMemo)((function(){var e;return(0,O.jsx)(G,{data:i.reportDeliveryList||[],totalSize:i.reportDeliveryListCount,isPagination:"SYSADMIN"==(null===(e=r.login)||void 0===e?void 0:e.role),isDelete:Z.o.checkPermission(n.userPermission,"Delete"),isEditModify:Z.o.checkPermission(n.userPermission,"Edit/Modify"),onUpdate:function(e){return u(e)},onPageSizeChange:function(e,t){i.deliveryQueueService.listDeliveryQueue(e,t)},onFilter:function(e,t,n,o){var a;if("SYSADMIN"==(null===(a=r.login)||void 0===a?void 0:a.role))i.deliveryQueueService.filter({input:{type:e,filter:t,page:n,limit:o}});else if("filter"==e)console.log({list:h(i.reportDeliveryListCopy,t)});else{if(""==t.srText)return i.updateReportDeliveryList(i.reportDeliveryListCopy);var l=i.reportDeliveryListCopy,s=null===l||void 0===l?void 0:l.filter((function(e){var i;return JSON.stringify(e).toLocaleLowerCase().match(null===(i=t.srText)||void 0===i?void 0:i.toLocaleLowerCase())}));i.updateReportDeliveryList(s)}},onClickRow:function(e,t){i.updateOrderDeliveredList([e])},onUpdateDeliveryStatus:function(){var e,t;u({type:"updateAllDeliveryStatus",ids:null===(e=i.reportDeliveryList)||void 0===e?void 0:e.map((function(e){return e._id})),visitId:null===(t=i.reportDeliveryList)||void 0===t?void 0:t.map((function(e){return e.visitId})),show:!0,title:"Are you sure?",body:"All generate pdf status update"})},onReport:function(e){i.deliveryQueueService.listPatientReports(e).then((function(e){if(e.getPatientReports.success){var t,i,n,r=[];null===(t=e.getPatientReports.data)||void 0===t||null===(i=t.patientResultList)||void 0===i||i.filter((function(t){t.reportTemplate&&r.push((0,w.Z)((0,w.Z)({},e.getPatientReports.data),{},{patientResult:t}))}));var a=E().uniqBy(null===(n=e.getPatientReports.data)||void 0===n?void 0:n.patientResultList,(function(e){return e.reportTemplate})),l=[];a.filter((function(e){l.push(null===e||void 0===e?void 0:e.reportTemplate.split(" -")[0])})),(null===l||void 0===l?void 0:l.length)>0&&o.templatePatientResultService.getTempPatientResultListByTempCodes({input:{filter:{reportTemplateList:l}}}).then((function(e){r=r.filter((function(t){var i=e.getTempPatientResultListByTempCodes.list.find((function(e){return e.templateCode==t.patientResult.reportTemplate.split(" -")[0]}));return Object.assign(t,{reportSettings:i})}));var t=E().groupBy(r,(function(e){return e.patientResult.reportTemplate}));x({show:!0,data:t})}))}else alert(e.getPatientReports.message)}))}})}),[i.reportDeliveryList]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(k.h4,{children:[(0,O.jsx)(k.CD,{title:(null===(e=n.selectedComponents)||void 0===e?void 0:e.title)||""}),(0,O.jsx)(k.Nd,{store:r})]}),(0,O.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,O.jsx)("span",{className:"font-bold text-lg underline",children:"Report Delivery"}),y]}),(0,O.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,O.jsx)("span",{className:"font-bold text-lg underline",children:"Order Delivered"}),(0,O.jsx)(K,{data:i.orderDeliveredList||[],totalSize:i.orderDeliveredListCount,isDelete:Z.o.checkPermission(n.userPermission,"Delete"),isEditModify:Z.o.checkPermission(n.userPermission,"Edit/Modify"),onDelete:function(e){return u(e)},onSelectedRow:function(e){u({show:!0,type:"delete",id:e,title:"Are you sure?",body:"Delete selected items!"})},onUpdateItem:function(e,t,i){u({show:!0,type:"update",data:{value:e,dataField:t,id:i},title:"Are you sure?",body:"Update items!"})},onPageSizeChange:function(e,t){},onFilter:function(e,t,i,n){}}),(0,O.jsx)(k.WZ,(0,w.Z)((0,w.Z)({},d),{},{click:function(e){"cancel"==e||"hold"==e||"generatePdf"==e?i.deliveryQueueService.updateDeliveryQueue({input:{_id:d.id,visitId:null===d||void 0===d?void 0:d.visitId,deliveryStatus:"cancel"==e?"Cancel":"hold"==e?"Hold":"Done"}}).then((function(e){u({show:!1}),e.updateDeliveryQueue.success&&(k.FN.success({message:"\ud83d\ude0a ".concat(e.updateDeliveryQueue.message)}),i.deliveryQueueService.listDeliveryQueue())})):i.deliveryQueueService.updateDeliveryQueueByVisitIds({input:{filter:{ids:null===d||void 0===d?void 0:d.ids,visitId:null===d||void 0===d?void 0:d.visitId,deliveryStatus:"Done"}}}).then((function(e){u({show:!1}),e.updateByVisitIdsDeliveryQueue.success&&(k.FN.success({message:"\ud83d\ude0a ".concat(e.updateByVisitIdsDeliveryQueue.message)}),i.deliveryQueueService.listDeliveryQueue())}))},onClose:function(){u({show:!1})}})),(0,O.jsx)(ne,(0,w.Z)((0,w.Z)({},p),{},{onClose:function(){x({show:!1})},onReceiptUpload:function(e,t){}}))]})]})}))),ae=oe}}]);
//# sourceMappingURL=211.61095089.chunk.js.map