"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[9791],{29791:function(e,t,i){i.r(t),i.d(t,{default:function(){return q}});var n=i(1413),o=i(74165),l=i(15861),s=i(29439),a=i(16296),r=i(72791),c=i(71672),u=i(3485),d=i(89103),m=(i(70042),i(79476)),h=i(22414),p=i(80184),f=function(e){var t=e.hostDetails,i=e.isConnect,o=void 0!==i&&i,l=e.onDisConnect,s=e.onConnect,a=e.onChange;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(m.iA,{striped:!0,bordered:!0,hover:!0,children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{style:{color:"white"},children:"Communication Setting"}),(0,p.jsx)("th",{style:{color:"white"},children:"Value"})]})}),(0,p.jsxs)("tbody",{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Host IP address"}),(0,p.jsx)("td",{children:(0,p.jsx)(u.l0.II,{id:"hostIpAddress",placeholder:"Host Ip Address",value:null===t||void 0===t?void 0:t.host,onChange:function(e){a((0,n.Z)((0,n.Z)({},t),{},{host:e}))}})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Port number"}),(0,p.jsxs)("td",{children:[" ",(0,p.jsx)(u.l0.II,{id:"portNumber",placeholder:"Port Number",value:null===t||void 0===t?void 0:t.port.toString(),onChange:function(e){a((0,n.Z)((0,n.Z)({},t),{},{port:Number.parseInt(e)}))}})]})]}),(0,p.jsx)("tr",{className:"items-center",children:(0,p.jsxs)("td",{colSpan:2,className:"items-center",children:[(0,p.jsx)(u.EK.zx,{size:"medium",type:"solid",buttonStyle:{backgroundColor:o?"green":null},onClick:function(){o?l&&l(t):s&&s(t)},children:o?"Disconnect":"Connect"}),(0,p.jsx)("span",{className:"text-red mt-4",children:"Note: Please run limsplus.exe file then communication machine to web start."}),(0,p.jsx)("br",{}),(0,p.jsx)("a",{className:"mt-2 text-blue-800",href:"https://limsplussolutions.blob.core.windows.net/assets/limsplus.exe",children:"Download limsplus.exe"})]})})]})]})})},v=[{title:"COM1"},{title:"COM2"},{title:"COM3"},{title:"COM4"},{title:"COM5"}],x=[{title:"110"},{title:"300"},{title:"600"},{title:"1200"},{title:"2400"},{title:"4800"},{title:"9600"},{title:"14400"},{title:"19200"},{title:"38400"},{title:"57600"},{title:"115200"},{title:"128000"},{title:"256000"}],g=[{title:"1"},{title:"1.5"},{title:"2"}],C=[{title:"7"},{title:"8"}],j=[{title:"None (N)"},{title:"Odd (O)"},{title:"Even \u20ac"},{title:"Mark (M)"},{title:"Space (S)"}],b=[{title:"On"},{title:"Off"},{title:"None"},{title:"Hardware"}],y=[{title:"1381"},{title:"1394"}],Z=(0,c.Pi)((function(){var e,t,i,o,l,s,a,r,c,u,d,f,Z,S,w=(0,h.mZ)().hostCommunicationStore;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(m.iA,{striped:!0,bordered:!0,hover:!0,children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{style:{color:"white"},children:"Communication Settings"}),(0,p.jsx)("th",{style:{color:"white"},children:"Value"})]})}),(0,p.jsxs)("tbody",{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Com Port"}),(0,p.jsx)("td",{children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(e=w.hostCommuication)||void 0===e||null===(t=e.serialPortCommunication)||void 0===t?void 0:t.comPort,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t,i=e.target.value;w.updateHostCommuication((0,n.Z)((0,n.Z)({},w.hostCommuication),{},{serialPortCommunication:(0,n.Z)((0,n.Z)({},null===(t=w.hostCommuication)||void 0===t?void 0:t.serialPortCommunication),{},{comPort:i})}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),v.map((function(e){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Baud rate"}),(0,p.jsxs)("td",{children:[" ",(0,p.jsxs)("select",{name:"defualtLab",value:null===(i=w.hostCommuication)||void 0===i||null===(o=i.serialPortCommunication)||void 0===o?void 0:o.baudRate,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t,i=e.target.value;w.updateHostCommuication((0,n.Z)((0,n.Z)({},w.hostCommuication),{},{serialPortCommunication:(0,n.Z)((0,n.Z)({},null===(t=w.hostCommuication)||void 0===t?void 0:t.serialPortCommunication),{},{baudRate:i})}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),x.map((function(e){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})]})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Data bits"}),(0,p.jsx)("td",{children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(l=w.hostCommuication)||void 0===l||null===(s=l.serialPortCommunication)||void 0===s?void 0:s.dataBits,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t,i=e.target.value;w.updateHostCommuication((0,n.Z)((0,n.Z)({},w.hostCommuication),{},{serialPortCommunication:(0,n.Z)((0,n.Z)({},null===(t=w.hostCommuication)||void 0===t?void 0:t.serialPortCommunication),{},{dataBits:i})}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),C.map((function(e){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Stop bits"}),(0,p.jsx)("td",{children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(a=w.hostCommuication)||void 0===a||null===(r=a.serialPortCommunication)||void 0===r?void 0:r.stopBits,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t,i=e.target.value;w.updateHostCommuication((0,n.Z)((0,n.Z)({},w.hostCommuication),{},{serialPortCommunication:(0,n.Z)((0,n.Z)({},null===(t=w.hostCommuication)||void 0===t?void 0:t.serialPortCommunication),{},{stopBits:i})}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),g.map((function(e){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Parity"}),(0,p.jsxs)("td",{children:[" ",(0,p.jsxs)("select",{name:"defualtLab",value:null===(c=w.hostCommuication)||void 0===c||null===(u=c.serialPortCommunication)||void 0===u?void 0:u.parity,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t,i=e.target.value;w.updateHostCommuication((0,n.Z)((0,n.Z)({},w.hostCommuication),{},{serialPortCommunication:(0,n.Z)((0,n.Z)({},null===(t=w.hostCommuication)||void 0===t?void 0:t.serialPortCommunication),{},{parity:i})}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),j.map((function(e){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})]})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Flow control (Handshaking)"}),(0,p.jsxs)("td",{children:[" ",(0,p.jsxs)("select",{name:"defualtLab",value:null===(d=w.hostCommuication)||void 0===d||null===(f=d.serialPortCommunication)||void 0===f?void 0:f.flowControl,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t,i=e.target.value;w.updateHostCommuication((0,n.Z)((0,n.Z)({},w.hostCommuication),{},{serialPortCommunication:(0,n.Z)((0,n.Z)({},null===(t=w.hostCommuication)||void 0===t?void 0:t.serialPortCommunication),{},{flowControl:i})}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),b.map((function(e){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})]})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Protocol"}),(0,p.jsxs)("td",{children:[" ",(0,p.jsxs)("select",{name:"defualtLab",value:null===(Z=w.hostCommuication)||void 0===Z||null===(S=Z.serialPortCommunication)||void 0===S?void 0:S.protocol,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t,i=e.target.value;w.updateHostCommuication((0,n.Z)((0,n.Z)({},w.hostCommuication),{},{serialPortCommunication:(0,n.Z)((0,n.Z)({},null===(t=w.hostCommuication)||void 0===t?void 0:t.serialPortCommunication),{},{protocol:i})}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),y.map((function(e){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})]})]})]})]})})})),S=function(e){var t=(0,r.useState)(e.data[0][1]),i=(0,s.Z)(t,2),n=i[0],o=i[1],l=(0,r.useState)(e.data[0][0]),a=(0,s.Z)(l,2),c=a[0],d=a[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(u.aV,{space:2,direction:"row",justify:"center",fill:!0,children:(0,p.jsx)("div",{children:e.data.map((function(e,t){return(0,p.jsx)("div",{className:"mb-2",style:{display:"inline-block",marginLeft:2,marginBottom:2},children:(0,p.jsx)(u.EK.zx,{size:"medium",type:"solid",onClick:function(){o(e[1]),d(e[0])},style:{margin:4},children:e[0]},t)},t)}))})})}),(0,p.jsx)("div",{className:"rounded-lg overflow-auto",children:(0,p.jsxs)(m.iA,{bordered:!0,children:[(0,p.jsxs)("thead",{children:[(0,p.jsx)("th",{style:{color:"white"},children:c}),(0,p.jsx)("th",{style:{color:"white"},children:"Value"})]}),(0,p.jsx)("tbody",{children:n.map((function(e,t){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"text-white",children:"".concat(e.field_no,". ").concat(e.filed.charAt(0).toUpperCase()+e.filed.slice(1).replaceAll("_"," "))}),(0,p.jsx)("th",{className:"text-white",children:e.value})]},t)}))})]})})]})},w=i(4942),N=i(93433),k=i(37762),P=i(43144),T=i(15671),I=i(763),_=i.n(I),A=(0,P.Z)((function e(t){var i=this;(0,T.Z)(this,e),this._blockStart=void 0,this._blockEnd=void 0,this._fileds=void 0,this._instrumentType="",this.parseSegment=function(e){var t=e.split(i._fileds.FIELD_DELIMITER),n=t.shift();return{fields:n,values:[n].concat(t)}},this.parse=function(e){switch(i._instrumentType){case"ERP":case"ERP_REG":if("MSH"!==e.slice(0,3))return null;break;case"URISED":if(e.slice(0,4)!==i._blockStart)return null;if(e.slice(e.length-12)!==i._blockEnd)return null;e=e.slice(4,-12);break;case"HORIBA_H550":if(e.slice(0,5)!==i._blockStart)return null;if(e.slice(e.length-9)!==i._blockEnd)return null;e=e.slice(5,-9)}var t,n=[],o=new RegExp(i._fileds.NEW_LINE),l=e.split(o),s=(0,k.Z)(l);try{for(s.s();!(t=s.n()).done;){var a=t.value;if(""!==a){var r=a.replace(/  +/g,""),c=i.parseSegment(r);n.push(c)}}}catch(u){s.e(u)}finally{s.f()}return n},this.parseString=function(e){return e&&"string"===typeof e?e=i.parse(e):null},this._blockStart=_().isEmpty(t.blockStart)?void 0:t.blockStart.replaceAll(/&amp;/g,"&").replaceAll(/&gt;/g,">").replaceAll(/&lt;/g,"<").replaceAll(/&quot;/g,'"').replaceAll(/\xe2\x80\x99/g,"\u2019").replaceAll(/\xe2\x80\xa6/g,"\u2026").toString(),this._blockEnd=_().isEmpty(t.blockEnd)?void 0:t.blockEnd.replaceAll(/&amp;/g,"&").replaceAll(/&gt;/g,">").replaceAll(/&lt;/g,"<").replaceAll(/&quot;/g,'"').replaceAll(/\xe2\x80\x99/g,"\u2019").replaceAll(/\xe2\x80\xa6/g,"\u2026").toString();var n={};t.fileds.map((function(e){return n[e.filed]=e.value.replaceAll(/&amp;/g,"&").replaceAll(/&gt;/g,">").replaceAll(/&lt;/g,"<").replaceAll(/&quot;/g,'"').replaceAll(/\xe2\x80\x99/g,"\u2019").replaceAll(/\xe2\x80\xa6/g,"\u2026").toString()})),this._fileds=n,this._instrumentType=t.instrumentType})),H=function(){function e(t,i,n){(0,T.Z)(this,e),this._message=void 0,this._config=void 0,t=new A(i).parseString(t),this._message=t,this._config=n}return(0,P.Z)(e,[{key:"getSegmentsByType",value:function(e){return this._message.segments.filter((function(t){return t.name===e}))}},{key:"process",value:function(){var e,t=[],i=(0,k.Z)(this._message);try{for(i.s();!(e=i.n()).done;){var n=e.value,o=[];if(this._config.mapping[n.fields.toLowerCase()]){var l,s=(0,k.Z)(this._config.mapping[n.fields.toLowerCase()].values);try{for(s.s();!(l=s.n()).done;){var a=l.value;if(void 0!==a&&a.field&&n instanceof Object){var r=a.component[0],c=this._generateObject(a.field,n.values[r-1],a.field_no);a.mandatory&&o.push(c)}}}catch(u){s.e(u)}finally{s.f()}o.sort((function(e,t){return e.field_no-t.field_no})),t.push([[n.fields],o])}}}catch(u){i.e(u)}finally{i.f()}return t}},{key:"_generateObject",value:function(e,t,i){return{filed:e.split(".")[1],value:t,field_no:i}}}]),e}(),M=function(){function e(t,i,n){(0,T.Z)(this,e),this._message=void 0,this._interfaceManager=void 0,this._config=void 0,this._decoder=void 0,this._message=t,this._interfaceManager=i,this._config=n,this._decoder=this._setDynamicDecoder()}return(0,P.Z)(e,[{key:"decode",value:function(){return this._message?this._decoder.process():null}},{key:"_setDynamicDecoder",value:function(){return new H(this._message,this._interfaceManager,this._config)}}]),e}();function O(e,t,i){return new M(e,t,i).decode()}var D,L=(0,P.Z)((function e(){var t=this;(0,T.Z)(this,e),this.mapping=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t){var i,n,l,s,a,r,c,u,d,m,p,f,v;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],e.next=3,h.gg.segmentMappingStore.segmentMappingService.findByFields({input:{filter:{instType:t.instrumentType}}}).then((function(e){if(!e.findByFieldsSegmentMapping.success)return alert("Not found equipment type");i=e.findByFieldsSegmentMapping.data}));case 3:n=[],l=[],s=(0,k.Z)(i);try{for(s.s();!(a=s.n()).done;)(r=a.value).instType===t.instrumentType&&l.push({segments:r.segments,field:"".concat(null===(c=r.segments)||void 0===c?void 0:c.toLowerCase(),".").concat(null===(u=r.elementName)||void 0===u?void 0:u.toLowerCase().replaceAll(" ","_")),component:[Number(r.elementNo),1],field_no:Number(r.elementNo),mandatory:r.requiredForLims,default:""})}catch(o){s.e(o)}finally{s.f()}for(d=l.reduce((function(e,t){return e[t.segments]=[].concat((0,N.Z)(e[t.segments]||[]),[t]),e}),{}),m=Object.entries(d),p=0,f=m;p<f.length;p++)v=f[p],n.push((0,w.Z)({},v[0].toLowerCase()||"",{values:v[1]}));return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.convetTo=function(e,i,s){return new Promise(function(){var e=(0,l.Z)((0,o.Z)().mark((function e(l,a){var r,c,u,d,m,p,f,v,x,g;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.mapping(i);case 3:r=e.sent,c={},u=(0,k.Z)(r);try{for(u.s();!(d=u.n()).done;)for(m=d.value,p=0,f=Object.keys(m);p<f.length;p++)v=f[p],c[v]=m[v]}catch(o){u.e(o)}finally{u.f()}if(x={mapping:c},g=O(s,h.gg.hostCommunicationStore.selectedInterfaceManager,x)){e.next=11;break}return e.abrupt("return",alert("Please enter correct message"));case 11:h.gg.hostCommunicationStore.updateConvertTo((0,n.Z)((0,n.Z)({},h.gg.hostCommunicationStore.convertTo),{},{hl7:g})),h.gg.hostCommunicationStore.updateHostCommuication((0,n.Z)({},h.gg.hostCommunicationStore.hostCommuication)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),a(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,i){return e.apply(this,arguments)}}())},this.newMessage=function(e){h.gg.hostCommunicationStore.updateHostCommuication((0,n.Z)((0,n.Z)({},h.gg.hostCommunicationStore.hostCommuication),{},{txtDataReceivefromInstrument:e,convertTo:""})),h.gg.hostCommunicationStore.updateConvertTo((0,n.Z)((0,n.Z)({},h.gg.hostCommunicationStore.convertTo),{},{hl7:void 0}))}})),R=new L,F=(0,P.Z)((function e(t,i){var n=this;(0,T.Z)(this,e),this._message=void 0,this._config=void 0,this.decode=function(){var e,t="",i=n._message.split(/[\n, ]+/),o=(0,k.Z)(i);try{var l=function(){var i=e.value,o=n._config.filter((function(e){return e.hexadecimal===i}));t=Array.isArray(o)&&o.length>0?t+o[0].ascii:t};for(o.s();!(e=o.n()).done;)l()}catch(s){o.e(s)}finally{o.f()}return t},this._message=t,this._config=i})),E=i(84098),z=(0,P.Z)((function e(){var t=this;(0,T.Z)(this,e),this.conversationMapping=(0,l.Z)((0,o.Z)().mark((function e(){var t,i,n,l,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=h.gg.dataConversationStore.listdataConversation,i=[],n=(0,k.Z)(t);try{for(n.s();!(l=n.n()).done;)s=l.value,i.push({hexadecimal:s.hexadecimal,ascii:void 0!==s.ascii?s.ascii.replaceAll(/&amp;/g,"&").replaceAll(/&gt;/g,">").replaceAll(/&lt;/g,"<").replaceAll(/&quot;/g,'"').replaceAll(/\xe2\x80\x99/g,"\u2019").replaceAll(/\xe2\x80\xa6/g,"\u2026").toString():void 0})}catch(o){n.e(o)}finally{n.f()}return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))),this.hextoascii=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(i){var l,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.conversationMapping();case 2:return l=e.sent,e.next=5,l;case 5:if(e.t0=e.sent.length,!(e.t0>0)){e.next=9;break}o=i,a=(0,E.ZN)(l),s=new F(o,a).decode(),h.gg.hostCommunicationStore.updateHostCommuication((0,n.Z)((0,n.Z)({},h.gg.hostCommunicationStore.hostCommuication),{},{txtDataReceivefromInstrument:s}));case 9:case"end":return e.stop()}var o,a}),e)})));return function(t){return e.apply(this,arguments)}}()})),V=new z,B=i(10621),K=i(42803),Q=(D=(0,c.Pi)((function(){var e,t,i,c,v,x,g,C,j,b,y,w,N,k,P,T=(0,h.mZ)(),I=T.loginStore,_=T.interfaceManagerStore,A=T.dataConversationStore,H=T.hostCommunicationStore,M=T.routerStore,O=T.segmentMappingStore,D=(0,r.useState)({}),L=(0,s.Z)(D,2),F=L[0],z=(L[1],(0,r.useState)({})),Q=(0,s.Z)(z,2),q=Q[0],U=Q[1],$=(0,r.useState)(!0),G=(0,s.Z)($,2),W=G[0],J=G[1],X=(0,r.useState)(""),Y=(0,s.Z)(X,2),ee=Y[0],te=(Y[1],function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var t,i,n,l,s,r,c,u,d,m,h,p,f,v,x;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:"limsplus-portal-prod-fezny",timeout:1e5},i=new K.gV(t),n=K.cN.anonymous(),e.next=6,i.logIn(n);case 6:return e.prev=6,l=i.currentUser.mongoClient("mongodb-atlas"),s=l.db("limsplus-prod").collection("tcpips"),e.next=11,i.logIn(n);case 11:r=e.sent,c=!1,u=!1,e.prev=15,m=(0,a.Z)(s.watch());case 17:return e.next=19,m.next();case 19:if(!(c=!(h=e.sent).done)){e.next=32;break}if("insert"!=(null===(p=h.value)||void 0===p?void 0:p.operationType)||"duplicate"!=(null===p||void 0===p||null===(f=p.fullDocument)||void 0===f?void 0:f.documentType)){e.next=29;break}return v=H.hostCommuication.tcpipCommunication,e.next=25,r.functions.tcpipCommunicaiton({ipAddress:null===v||void 0===v?void 0:v.host,port:null===v||void 0===v?void 0:v.port,documentType:"duplicate"});case 25:return(null===(x=e.sent)||void 0===x?void 0:x.length)>0&&H.updateArrTcpIpMessage(JSON.parse(x[0].message)),e.next=29,r.functions.tcpIpDeleteRecords({ipAddress:null===v||void 0===v?void 0:v.host,port:null===v||void 0===v?void 0:v.port,documentType:"duplicate"});case 29:c=!1,e.next=17;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(15),u=!0,d=e.t0;case 38:if(e.prev=38,e.prev=39,!c||null==m.return){e.next=43;break}return e.next=43,m.return();case 43:if(e.prev=43,!u){e.next=46;break}throw d;case 46:return e.finish(43);case 47:return e.finish(38);case 48:e.next=53;break;case 50:e.prev=50,e.t1=e.catch(6),console.error({err:e.t1});case 53:case"end":return e.stop()}}),e,null,[[6,50],[15,34,38,48],[39,,43,47]])})));return function(){return e.apply(this,arguments)}}());return(0,r.useEffect)((function(){te()}),[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u._q,{title:(null===(e=M.selectedComponents)||void 0===e?void 0:e.title)||"",store:I}),B.o.checkPermission((0,E.ZN)(M.userPermission),"Add")&&(0,p.jsx)(u.EK.Kn,{show:W,onClick:function(e){return J(!W)}}),(0,p.jsxs)("div",{className:"mx-auto",children:[(0,p.jsxs)("div",{className:"p-2 rounded-lg shadow-xl",children:[(0,p.jsxs)(u.rj,{cols:3,children:[(0,p.jsxs)(u.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,p.jsxs)(u.rj,{cols:2,children:[(0,p.jsx)(u.l0.ZD,{label:null!==(t=H.hostCommuication)&&void 0!==t&&t.manualAutomaticMode?"Automatic":"Manual",id:"manualMode",value:null===(i=H.hostCommuication)||void 0===i?void 0:i.manualAutomaticMode,onChange:function(e){H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{manualAutomaticMode:e}))}}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{children:["Connection Estabilished :"," ","".concat(H.hostCommuication.connectStatus?"On":"Off")]}),(0,p.jsx)("label",{style:{color:null!==(c=H.hostCommuication)&&void 0!==c&&c.connectStatus?"green":"red"},children:(null===(v=H.hostCommuication)||void 0===v?void 0:v.connectMessage)||""})]})]}),(0,p.jsx)(u.l0.SP,{label:"Inst Type",children:(0,p.jsxs)("select",{value:null===(x=H.hostCommuication)||void 0===x?void 0:x.instType,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t,i=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{instType:i}));var o=null===(t=_.listInterfaceManager)||void 0===t?void 0:t.find((function(e){return e.instrumentType===i}));H.updateSelectedInterfaceManager(o),H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{instrumentName:null===o||void 0===o?void 0:o.instrumentName}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),null===(g=_.listInterfaceManager)||void 0===g?void 0:g.map((function(e){var t,i,n,o,l,s,a;return(0,p.jsx)("option",{value:e.instrumentType,children:"".concat(e.instrumentType," - ").concat(null===(t=e.dataFlowFrom)||void 0===t||null===(i=t.replaceAll(/&amp;/g,"&"))||void 0===i||null===(n=i.replaceAll(/&gt;/g,">"))||void 0===n||null===(o=n.replaceAll(/&lt;/g,"<"))||void 0===o||null===(l=o.replaceAll(/&quot;/g,'"'))||void 0===l||null===(s=l.replaceAll(/\xe2\x80\x99/g,"\u2019"))||void 0===s||null===(a=s.replaceAll(/\xe2\x80\xa6/g,"\u2026"))||void 0===a?void 0:a.toString())},e.instrumentType)}))]})}),(0,p.jsx)(u.l0.II,{label:"Instrument Name",id:"instrumentName",placeholder:"Instrument Name",value:null===(C=H.hostCommuication)||void 0===C?void 0:C.instrumentName,onChange:function(e){H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{instrumentName:e}))}}),(0,p.jsx)(u.l0.SP,{label:"Mode of Communication",id:"modeOfCommunication",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(j=H.hostCommuication)||void 0===j?void 0:j.modeOfCommunication,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{modeOfCommunication:t}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Broadcasting"},{title:"Host Query"},{title:"File based"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),(0,p.jsx)(u.l0.SP,{label:"Type of Query",id:"typeOfQuery",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(b=H.hostCommuication)||void 0===b?void 0:b.typeOfQuery,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{typeOfQuery:t}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Unidirectional"},{title:"Bidirectional"},{title:"Host Query\xa0"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})})]}),(0,p.jsxs)(u.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,p.jsx)(u.l0.SP,{label:"Mode of Connection ",id:"modeOfConnection",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(y=H.hostCommuication)||void 0===y?void 0:y.modeOfConnection,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{modeOfConnection:t}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Serial Port Communication"},{title:"TCP/IP Communication"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),"Serial Port Communication"===(null===(w=H.hostCommuication)||void 0===w?void 0:w.modeOfConnection)&&(0,p.jsx)(Z,{}),"TCP/IP Communication"===(null===(N=H.hostCommuication)||void 0===N?void 0:N.modeOfConnection)&&(0,p.jsx)(f,{hostDetails:H.hostCommuication.tcpipCommunication,isConnect:H.hostCommuication.connectStatus,onChange:function(e){H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{tcpipCommunication:e}))},onConnect:function(e){if(!H.hostCommuication.instType)return alert("Please select inst type.");H.hostCommunicationService.connectHostCommunication({input:(0,n.Z)((0,n.Z)({},e),{},{instType:H.hostCommuication.instType,pushToken:I.login.webPushTokenFcm,type:"tcpIP",isConnect:!1})}).then((function(e){var t,i;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{connectMessage:null===(t=e.connectHostCommunication)||void 0===t?void 0:t.message,connectStatus:null===(i=e.connectHostCommunication)||void 0===i?void 0:i.success}))}))},onDisConnect:function(e){H.hostCommunicationService.connectHostCommunication({input:(0,n.Z)((0,n.Z)({},e),{},{instType:H.hostCommuication.instType,pushToken:I.login.webPushTokenFcm,type:"tcpIP",isConnect:!0})}).then((function(e){console.log({res:e}),H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{connectMessage:"Connection established closed.",connectStatus:!1}))}))}})]}),(0,p.jsxs)(u.aV,{direction:"col",space:10,align:"between",justify:"center",children:[(0,p.jsx)("label",{children:"Status : Pending"}),(0,p.jsx)("div",{className:"flex",children:(0,p.jsx)(u.EK.zx,{size:"medium",type:"solid",onClick:function(){},children:"Save Setting"})}),(0,p.jsx)("div",{className:"flex mb-2",children:(0,p.jsx)(u.EK.zx,{size:"medium",type:"solid",onClick:function(){},children:"Generate Driver"})})]}),(0,p.jsx)("div",{className:"clearfix"})]}),(0,p.jsxs)(u.rj,{cols:2,children:[(0,p.jsx)(u.l0.SP,{label:"Apply Filtr on",id:"applyFiltrOn",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(k=H.hostCommuication)||void 0===k?void 0:k.applyFiltrOn,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{applyFiltrOn:t}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Patient Data / QC Data"},{title:"Output Filter"},{title:"Import"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),(0,p.jsx)(u.l0.II,{label:"Log File",id:"logFileDataReceivefromInstrument",placeholder:"Log File",onChange:function(e){H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{logFileDataReceivefromInstrument:e}))}}),(0,p.jsx)("div",{className:"clerfix"})]}),(0,p.jsx)(m.iA,{striped:!0,bordered:!0,hover:!0,children:(0,p.jsx)("tbody",{children:(null===(P=H.arrTcpIpMessage)||void 0===P?void 0:P.length)>0&&H.arrTcpIpMessage.map((function(e){return(0,p.jsx)("tr",{children:(0,p.jsx)("td",{children:e})})}))})}),(0,p.jsx)(d.UQ,{allowMultiple:!0,children:[{title:"Hex to ASCII"},{title:"Source File"},{title:"Send data to Intrument"},{title:"Convert to"},{title:"Output in"}].map((function(e){var t,i,s,a,r,c,m,h,f,v,x,g,C,j,b,y,Z;return(0,p.jsxs)(d.Qd,{title:"".concat(e.title),children:["Hex to ASCII"===e.title&&(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(u.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,p.jsx)("div",{className:"grid grid-cols-3 gap-4",children:(0,p.jsx)("div",{className:"col-span-2",children:(0,p.jsx)(u.l0.$l,{label:"",id:"txtHexToAscii",disabled:void 0==A.listdataConversation||void 0===(null===(t=H.hostCommuication)||void 0===t?void 0:t.instType)||!((null===(i=A.listdataConversation)||void 0===i?void 0:i.length)>0),placeholder:"Hex",value:ee,onChange:function(e){V.hextoascii(e),H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{hex:e}))}})})}),(0,p.jsx)("div",{className:"clearfix"})]})}),"Source File"===e.title&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(u.rj,{cols:2,children:[(0,p.jsx)(u.l0.SP,{label:"Source File",id:"sourceFileDataReceivefromInstrument",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(s=H.hostCommuication)||void 0===s?void 0:s.sourceFileDataReceivefromInstrument,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{sourceFileDataReceivefromInstrument:t}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Hex decimal"},{title:"HL7"},{title:"ASTM"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),(0,p.jsx)(u.l0.SP,{label:"Source Repository",id:"SourceRepositoryDataReceivefromInstrument",children:(0,p.jsxs)("select",{name:"defualtLab",disabled:void 0==O.listSegmentMapping||void 0===(null===(a=H.hostCommuication)||void 0===a?void 0:a.instType)||!((null===(r=O.listSegmentMapping)||void 0===r?void 0:r.length)>0),value:null===(c=H.hostCommuication)||void 0===c?void 0:c.SourceRepositoryDataReceivefromInstrument,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;if(H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{SourceRepositoryDataReceivefromInstrument:t})),"Phiysical file Location"===t){var i;if(H.hostCommuication,null===(i=H.hostCommuication)||void 0===i||!i.instType)return alert("Please entery instrument type");U({show:!0,title:"Import file!"})}},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Phiysical file Location"},{title:"Collection of a database"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),(0,p.jsx)("div",{className:"clearfix"})]}),(0,p.jsxs)(u.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,p.jsx)("div",{className:"col-span-2",children:(0,p.jsx)(u.l0.$l,{label:"",id:"txtDataReceivefromInstrument",placeholder:"Source file (Data Received Data from Instrument)",disabled:void 0==O.listSegmentMapping||void 0===(null===(m=H.hostCommuication)||void 0===m?void 0:m.instType)||!((null===(h=O.listSegmentMapping)||void 0===h?void 0:h.length)>0),value:null===(f=H.hostCommuication)||void 0===f?void 0:f.txtDataReceivefromInstrument,onChange:function(e){R.newMessage(e)}})}),(0,p.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,p.jsx)("div",{children:(0,p.jsx)(u.EK.zx,{size:"medium",type:"solid",onClick:function(){},children:"Send"})})})]}),(0,p.jsx)("div",{className:"clearfix"})]})]}),"Send data to Intrument"===e.title&&(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,p.jsx)("div",{className:"col-span-2",children:(0,p.jsx)(u.l0.$l,{label:"",id:"txtSendDatafromInstrument",placeholder:"Send data to Instrument",value:null===(v=H.hostCommuication)||void 0===v?void 0:v.txtSendDatafromInstrument,onChange:function(e){H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{txtSendDatafromInstrument:e}))}})}),(0,p.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,p.jsx)("div",{children:(0,p.jsx)(u.EK.zx,{size:"medium",type:"solid",onClick:function(){},children:"Send"})})})]})}),"Convert to"===e.title&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(u.rj,{cols:2,children:[(0,p.jsx)(u.l0.SP,{label:"Convert to",id:"convertTo",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(x=H.hostCommuication)||void 0===x?void 0:x.convertTo,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t){var i,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.target.value,H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{convertTo:l,SourceRepositoryDataReceivefromInstrument:""})),e.next=4,R.convetTo(l,H.selectedInterfaceManager,(null===(i=H.hostCommuication)||void 0===i?void 0:i.txtDataReceivefromInstrument)||"");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Hex decimal"},{title:"HL7"},{title:"ASTM"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),(0,p.jsx)(u.l0.SP,{label:"Output Repository",id:"outputRepository",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(g=H.hostCommuication)||void 0===g?void 0:g.outputRepository,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{outputRepository:t}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Phiysical file Location"},{title:"Collection of a database"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),(0,p.jsx)("div",{className:"clearfix"})]}),(0,p.jsxs)(u.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,p.jsx)("div",{className:"col-span-2",children:void 0!==(null===(C=H.convertTo)||void 0===C?void 0:C.hl7)&&(0,p.jsx)(S,{data:(0,E.ZN)(H.convertTo.hl7)})}),(0,p.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,p.jsx)("div",{children:(0,p.jsx)(u.EK.zx,{size:"medium",type:"solid",onClick:function(){console.log({message:H.convertTo.hl7}),H.hostCommunicationService.createTransmittedMessage({input:{filter:{message:H.convertTo.hl7,instType:H.hostCommuication.instType}}}).then((function(e){e.createTransmittedMessage.success&&u.FN.success({message:"\ud83d\ude0a ".concat(e.createTransmittedMessage.message)})}))},children:"Save"})})})]}),(0,p.jsx)("div",{className:"clearfix"})]})]}),"Output in"===e.title&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(u.aV,{direction:"col",space:4,justify:"start",children:[(0,p.jsx)(u.l0.SP,{label:"Output in",id:"outPutIn",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(j=H.hostCommuication)||void 0===j?void 0:j.outPutIn,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{outPutIn:t}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"PDF"},{title:"CSV"},{title:"TXT"},{title:"Table/Collection"},{title:"API"},{title:"Graph"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),(0,p.jsx)("div",{className:"clearfix"})]}),(0,p.jsxs)(u.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,p.jsx)("div",{className:"col-span-2",children:(0,p.jsx)(u.l0.$l,{id:"txtOutputin",placeholder:"Output in",value:null===(b=H.hostCommuication)||void 0===b?void 0:b.txtOutputin,onChange:function(e){H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{txtOutputin:e}))}})}),(0,p.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,p.jsx)("div",{children:(0,p.jsx)(u.EK.zx,{size:"medium",type:"solid",onClick:function(){},children:"Output"})})})]}),(0,p.jsx)("div",{className:"clearfix"})]}),(0,p.jsxs)(u.rj,{cols:2,children:[(0,p.jsx)(u.l0.SP,{label:"Output for Third party Software",id:"outputforThirdpartySoftware",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(y=H.hostCommuication)||void 0===y?void 0:y.outputforThirdpartySoftware,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{outputforThirdpartySoftware:t}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Serial to Serial"},{title:"HL7"},{title:"ASTM"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),(0,p.jsx)(u.l0.SP,{label:"Output Repository",id:"SourceRepositoryThiredPartySoftare",children:(0,p.jsxs)("select",{name:"defualtLab",value:null===(Z=H.hostCommuication)||void 0===Z?void 0:Z.SourceRepositoryThiredPartySoftare,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(e){var t=e.target.value;H.updateHostCommuication((0,n.Z)((0,n.Z)({},H.hostCommuication),{},{SourceRepositoryThiredPartySoftare:t}))},children:[(0,p.jsx)("option",{selected:!0,children:"Select"}),[{title:"Phiysical file Location"},{title:"Collection of a database"}].map((function(e,t){return(0,p.jsx)("option",{value:e.title,children:e.title},e.title)}))]})}),(0,p.jsx)("div",{className:"clearfix"})]})]})]})}))}),(0,p.jsx)("br",{}),(0,p.jsxs)(u.aV,{direction:"row",space:3,align:"center",children:[(0,p.jsx)(u.EK.zx,{size:"medium",type:"solid",icon:u.ny.vc,onClick:function(){},children:"Save"}),(0,p.jsx)(u.EK.zx,{size:"medium",type:"outline",icon:u.ny.JW,onClick:function(){window.location.reload()},children:"Clear"})]})]}),(0,p.jsx)("br",{}),(0,p.jsx)(u.WZ,(0,n.Z)((0,n.Z)({},F),{},{click:function(){}}))]}),(0,p.jsx)(u.Z9,(0,n.Z)((0,n.Z)({accept:".csv,.xlsx,.xls,.txt,.hl7"},q),{},{click:function(e){U({show:!1});var t=new FileReader;t.addEventListener("load",(function(e){var t=e.target.result.split(/\r/).join("\n");R.newMessage(t)})),t.addEventListener("error",(function(e){return alert(e.target.error.name)})),t.readAsText(e)},close:function(){U({show:!1})}}))]})})),(0,c.Pi)((function(e){return(0,p.jsx)(D,(0,n.Z)({},e))}))),q=Q}}]);
//# sourceMappingURL=9791.47fdb32f.chunk.js.map