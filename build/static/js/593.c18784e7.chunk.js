"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[593],{68593:function(e,s,n){n.r(s),n.d(s,{Login:function(){return I},default:function(){return C}});var o=n(93433),r=n(1413),t=n(74165),i=n(15861),l=n(29439),a=n(47313),c=n(92126),d=n(10044),u=n(40560),h=n(2767),f=n(75627),m=n(73654),g=n(74394),x=n(46417),p=(0,c.Pi)((function(e){var s=a.useState(e.show),n=(0,l.Z)(s,2),o=n[0],t=n[1],i=(0,g.mZ)().loginStore;(0,a.useEffect)((function(){t(e.show)}),[e]);var c=(0,f.cI)(),p=c.control,v=c.handleSubmit,b=c.formState.errors;return(0,x.jsx)(u.W2,{children:o&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"justify-center items-center  overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:(0,x.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,x.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,x.jsx)("div",{children:(0,x.jsx)("button",{className:"p-1  border-0 text-black opacity-1 ml-6 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){return e.onClose()},children:(0,x.jsx)("span",{className:" text-black h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})}),(0,x.jsxs)("div",{className:"flex  flex-col  items-center justify-between p-2 border-b border-solid border-gray-300 rounded-t",children:[(0,x.jsxs)("div",{className:"items-center justify-center flex mb-2",children:[(0,x.jsx)("img",{src:h.jY,className:" img-thumbnail img-fluid",style:{width:70,height:55,marginRight:10},alt:"lims plus"}),(0,x.jsx)("h4",{className:"font-semibold",children:"Lims Plus"})]}),(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"items-center justify-center flex",children:(0,x.jsx)("h1",{className:"text-4xl",children:"Forgot Password"})})})]}),(0,x.jsx)("div",{className:"relative ml-24 mr-24 p-2 flex-auto",children:(0,x.jsxs)(d.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,x.jsx)(f.Qr,{control:p,render:function(e){var s,n=e.field.onChange;return(0,x.jsx)(d.l0.II,{label:"User Id",placeholder:"User Id",hasError:!!b.userId,value:null===(s=i.forgotPassword)||void 0===s?void 0:s.userId,onChange:function(e){n(e),i.updateForgotPassword((0,r.Z)((0,r.Z)({},i.forgotPassword),{},{userId:e.toUpperCase()}))}})},name:"userId",rules:{required:!0},defaultValue:""}),(0,x.jsx)(f.Qr,{control:p,render:function(e){var s,n=e.field.onChange;return(0,x.jsx)(d.l0.II,{type:"mail",label:"Email",placeholder:"Email",hasError:!!b.email,value:null===(s=i.forgotPassword)||void 0===s?void 0:s.email,onChange:function(e){n(e),i.updateForgotPassword((0,r.Z)((0,r.Z)({},i.forgotPassword),{},{email:e}))}})},name:"email",rules:{required:!1,pattern:m.w.patterns.email},defaultValue:""}),(0,x.jsx)("span",{className:"text-center",children:"OR"}),(0,x.jsx)(f.Qr,{control:p,render:function(e){var s,n=e.field.onChange;return(0,x.jsx)(d.l0.II,{pattern:m.w.patterns.mobileNo,label:"Mobile Number",placeholder:"Mobile Number",hasError:!!b.mobileNo,value:null===(s=i.forgotPassword)||void 0===s?void 0:s.mobileNo,onChange:function(e){n(e),i.updateForgotPassword((0,r.Z)((0,r.Z)({},i.forgotPassword),{},{mobileNo:e}))}})},name:"mobileNo",rules:{required:!1},defaultValue:""})]})}),(0,x.jsx)("div",{className:"flex items-center justify-center p-2 border-t border-solid border-gray-300 rounded-b",children:(0,x.jsx)("button",{className:"bg-black text-white active:bg-green-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1",type:"button",style:{transition:"all .15s ease"},onClick:v((function(){var s,n;void 0===(null===(s=i.forgotPassword)||void 0===s?void 0:s.email)&&void 0===(null===(n=i.forgotPassword)||void 0===n?void 0:n.mobileNo)||e.onClick(i.forgotPassword)})),children:"Send"})}),(0,x.jsx)("div",{className:"justify-center items-center flex",children:(0,x.jsx)("p",{children:"Powered by Lims Plus Solutions Pvt Ltd."})})]})})}),(0,x.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})})})),v=n(38928),b=n(12854),w=function(e){var s=a.useState(e.show),n=(0,l.Z)(s,2),o=n[0],r=n[1];return(0,a.useEffect)((function(){r(e.show)}),[e]),(0,x.jsx)(u.W2,{children:o&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"justify-center items-center  overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",onClick:function(){return r(!1)},children:(0,x.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,x.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,x.jsx)("div",{children:(0,x.jsx)("button",{className:"p-1  border-0 text-black opacity-1 ml-6 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){return e.onClose()},children:(0,x.jsx)("span",{className:" text-black h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})}),(0,x.jsxs)("div",{className:"flex  flex-col  items-center justify-between p-2 border-b border-solid border-gray-300 rounded-t",children:[(0,x.jsxs)("div",{className:"items-center justify-center flex mb-2",children:[(0,x.jsx)("img",{src:h.jY,className:" img-thumbnail img-fluid",style:{width:70,height:55,marginRight:10},alt:"lims plus"}),(0,x.jsx)("h4",{className:"font-semibold",children:"Lims Plus"})]}),(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"items-center justify-center flex",children:["login"!==e.data.action&&(0,x.jsx)(v.Z,{size:60,color:b.z.D.BLACK,style:{marginRight:10}}),(0,x.jsx)("h1",{className:"text-4xl",children:"".concat(e.data.header)})]})})]}),(0,x.jsx)("div",{className:"relative p-6 flex-auto",children:(0,x.jsx)("p",{className:"my-4 text-gray-600 text-lg leading-relaxed",children:(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:e.data.message}})})}),(0,x.jsx)("div",{className:"flex items-center justify-center p-2 border-t border-solid border-gray-300 rounded-b",children:(0,x.jsx)("button",{className:"bg-black text-white active:bg-green-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1",type:"button",style:{transition:"all .15s ease"},onClick:function(){e.click(e.data.action)},children:"login"!==e.data.action?"Logout":"Login"})}),(0,x.jsx)("div",{className:"justify-center items-center flex",children:(0,x.jsx)("p",{children:"Powered by Lims Plus Solutions Pvt Ltd."})})]})})}),(0,x.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})})},j=n(59866),y=n(10658),N=n.n(y),Z=n(63830),L=n(86512),I=(0,c.Pi)((function(){var e,s,n,c,v=(0,g.mZ)(),b=v.loading,y=v.userStore,I=v.loginStore,C=v.rootStore,P=v.labStore,k=v.roleStore,S=v.bannerStore,F=(0,Z.k6)(),U=(0,a.useState)({}),E=(0,l.Z)(U,2),z=E[0],A=E[1],D=(0,a.useState)(window.innerWidth),V=(0,l.Z)(D,2),R=V[0],_=V[1],W=(0,a.useState)({labList:[],roleList:[]}),B=(0,l.Z)(W,2),M=B[0],Q=B[1],T=(0,a.useRef)(),q=(0,a.useState)(),Y=(0,l.Z)(q,2),H=Y[0],J=Y[1],O=(0,a.useState)(),K=(0,l.Z)(O,2),X=K[0],G=K[1],$=(0,a.useState)(),ee=(0,l.Z)($,2),se=ee[0],ne=ee[1],oe=(0,f.cI)(),re=oe.control,te=oe.handleSubmit,ie=oe.formState,le=ie.errors,ae=(ie.isDirty,oe.setValue),ce=oe.clearErrors,de=function(){_(window.innerWidth)};(0,a.useEffect)((function(){S.fetchListAllBanner()}),[]),(0,a.useEffect)((function(){var e;return C.isLogin().then((function(e){e?F.push("/dashboard/default"):F.push("/")})),T.current&&(null===(e=T.current)||void 0===e||e.focus()),window.addEventListener("resize",de),function(){window.removeEventListener("resize",de)}}),[I.login]);var ue=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(s){var n,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=I.loginFailedCount||0)>4?I.LoginService.accountStatusUpdate({input:{userId:null===(o=I.inputLogin)||void 0===o?void 0:o.userId,status:"D"}}).then((function(e){e.userAccountStatusUpdate.success&&(d.FN.error({message:"\ud83d\ude14 ".concat(e.userAccountStatusUpdate.message)}),I.updateLoginFailedCount(0))})):I.LoginService.onLogin({input:{user:I.inputLogin,loginActivity:{device:R<=768?"Mobile":"Desktop",platform:"Web"}}}).then((function(e){console.log({res:e}),1==e.login.success?(I.updateLoginFailedCount(0),e.login.data.user.passChanged?void 0!==e.login.data.user.noticeBoard?A({show:!0,userInfo:e.login.data.user,data:e.login.data.user.noticeBoard}):(d.FN.success({message:"\ud83d\ude0a ".concat(e.login.message)}),I.saveLogin(e.login.data.user),I.clearInputUser(),setTimeout((function(){F.push("/dashboard/default")}),1e3)):G({show:!0})):2==e.login.success?ne({show:!0,data:e.login.data.loginActivityListByUserId}):(I.updateLoginFailedCount(n+1),d.FN.error({message:"\ud83d\ude14 ".concat(e.login.message)}))})).catch((function(e){I.updateLoginFailedCount(n+1),d.FN.error({message:"\ud83d\ude14 ".concat(e.message)})}));case 2:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),he=R<=768?300:500;return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"flex h-screen bg-[#394D7F]  w-full  justify-center items-center",children:[(0,x.jsx)("svg",{width:"80%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{position:"absolute",left:0,right:0},children:(0,x.jsx)("path",{d:"M0,0  L100,0 C4,30 130,100 0,120",fill:"#FF6C99"})}),(0,x.jsx)("div",{style:{zIndex:0,marginTop:-window.innerHeight/1.14,marginLeft:window.innerWidth/16,position:"absolute"},children:(0,x.jsx)("img",{src:h.Wc.limsplusTran,alt:"appIcon",style:{width:200}})}),(0,x.jsxs)("div",{className:"flex flex-row  w-fit m-auto rounded-3xl shadow-lg bg-white items-center absolute  p-2 gap-4 from-blue-600 bg-gradient-to-r",style:{minWidth:"70%"},children:[(0,x.jsx)(u.JX,{md:"6",sm:"12",xs:"12",children:(0,x.jsx)("div",{className:"flex justify-center items-center",children:(0,x.jsx)(j.Z,{style:{width:he,height:he},indicators:!1,children:S.listAllBanner.map((function(e,s){return(0,x.jsx)(j.Z.Item,{interval:3e3,children:(0,x.jsx)("img",{src:e.image,alt:s.toString(),style:{width:he,height:he,borderRadius:he/2}},s)},s)}))})})}),(0,x.jsxs)(u.JX,{md:"6",sm:"12",xs:"12",children:[(0,x.jsx)("div",{className:"flex justify-center items-center",children:(0,x.jsxs)("div",{className:"flex flex-col mt-2 rounded-3xl bg-[#F3F6FF] shadow-inner",children:[(0,x.jsx)("div",{className:"flex mt-2 p-2",children:(0,x.jsx)("label",{className:"font-bold text-lg text-black underline ml-4",children:"Sign In"})}),(0,x.jsxs)("div",{className:"rounded-2xl bg-white p-4 shadow-[inset_0_-2px_4px_rgba(0,0,0,0.6)]",children:[(0,x.jsxs)(d.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,x.jsx)(f.Qr,{control:re,render:function(e){var s,n=e.field.onChange;return(0,x.jsx)(d.l0.II,{label:"User Id",id:"userId",name:"userId",inputRef:T,wrapperStyle:{color:"black"},placeholder:le.userId?"Please enter userId":"UserId",hasError:!!le.userId,value:null===(s=I.inputLogin)||void 0===s?void 0:s.userId,onChange:function(e){n(e),I.updateInputUser((0,r.Z)((0,r.Z)({},I.inputLogin),{},{userId:e.toUpperCase()}))},onBlur:function(e){e&&y.UsersService.serviceUser.checkExitsUserId(e.trim()).then((function(e){if(e.checkUserExitsUserId.success){var s=e.checkUserExitsUserId.data.user;ae("lab",s.defaultLab),ce("lab"),1==s.role.length&&ae("role",s.role[0].code),ce("role"),I.updateInputUser((0,r.Z)((0,r.Z)({},I.inputLogin),{},{lab:s.defaultLab,role:1==s.role.length?s.role[0].code:""})),P.fetchListLab(),k.fetchListRole(),Q({labList:s.lab,roleList:s.role})}else d.FN.error({message:"\ud83d\ude14 ".concat(e.checkUserExitsUserId.message)})}))}})},name:"userId",rules:{required:!0},defaultValue:null===(e=I.inputLogin)||void 0===e?void 0:e.userId}),(0,x.jsx)(f.Qr,{control:re,render:function(e){var s,n=e.field.onChange;return(0,x.jsx)(d.l0.II,{type:"password",label:"Password",wrapperStyle:{color:"black"},placeholder:le.password?"Please enter password":"Password",hasError:!!le.password,value:null===(s=I.inputLogin)||void 0===s?void 0:s.password,onChange:function(e){n(e),I.updateInputUser((0,r.Z)((0,r.Z)({},I.inputLogin),{},{password:e}))}})},name:"password",rules:{required:!0,pattern:m.w.patterns.password},defaultValue:null===(s=I.inputLogin)||void 0===s?void 0:s.password}),(0,x.jsx)(f.Qr,{control:re,render:function(e){var s,n,o=e.field.onChange;return(0,x.jsx)(d.l0.SP,{label:"Lab",hasError:!!le.lab,style:{color:"black"},children:(0,x.jsxs)("select",{value:null===(s=I.inputLogin)||void 0===s?void 0:s.lab,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(le.lab?"border-red-500":"border-gray-300"," rounded-md cursor-pointer "),onChange:function(e){var s=e.target.value;o(s),I.updateInputUser((0,r.Z)((0,r.Z)({},I.inputLogin),{},{lab:s}))},children:[(0,x.jsx)("option",{children:"Select"}),null===M||void 0===M||null===(n=M.labList)||void 0===n?void 0:n.map((function(e){return(0,x.jsx)("option",{value:e.code,children:e.name},e.code)}))]})})},name:"lab",rules:{required:!0},defaultValue:null===(n=I.inputLogin)||void 0===n?void 0:n.lab}),(0,x.jsx)(f.Qr,{control:re,render:function(e){var s,n=e.field.onChange;return(0,x.jsx)(d.l0.SP,{label:"Role",hasError:!!le.role,style:{color:"black"},children:(0,x.jsxs)("select",{value:null===(s=I.inputLogin)||void 0===s?void 0:s.role,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(le.role?"border-red-500":"border-gray-300"," rounded-md cursor-pointer"),onChange:function(e){var s=e.target.value;n(s),I.updateInputUser((0,r.Z)((0,r.Z)({},I.inputLogin),{},{role:s}))},children:[(0,x.jsx)("option",{selected:!0,children:"Select"}),M.roleList.map((function(e){return(0,x.jsx)("option",{value:e.code,children:e.description},e.code)}))]})})},name:"role",rules:{required:!0},defaultValue:null===(c=I.inputLogin)||void 0===c?void 0:c.role})]}),(0,x.jsx)("br",{}),(0,x.jsx)(d.aV,{direction:"row",space:3,align:"center",children:(0,x.jsx)(d.EK.zx,{size:"medium",type:"solid",icon:d.ny.Jr,onClick:te(ue),className:"cursor-pointer",disabled:b,children:(0,L.t)("common:login").toString()})}),(0,x.jsxs)("div",{className:"flex p-4 flex-row  w-full justify-between gap-4",children:[(0,x.jsx)("a",{href:"#",onClick:function(){return J({show:!0})},className:"text-black text-sm cursor-pointer",children:"Forgot Password"}),(0,x.jsx)("a",{href:"privacy-policy",className:"text-black text-sm cursor-pointer",children:"Privacy and Policy"})]})]})]})}),(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsx)("span",{className:"underline font-bold",children:"Quick Access :"}),(0,x.jsxs)("a",{href:"#",className:"flex flex-row items-center gap-2 cursor-pointer",children:[" ","1.",(0,x.jsx)(d.PJ.Iconmd.MdPayments,{size:20}),"Online Payment"]})]})]})]}),(0,x.jsx)(w,(0,r.Z)((0,r.Z)({},z),{},{click:function(){var e=(0,i.Z)((0,t.Z)().mark((function e(s){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A((0,r.Z)((0,r.Z)({},z),{},{show:!1})),"login"!==s?(d.FN.warning({message:"\ud83d\ude14 Please use diff lab"}),setTimeout((function(){window.location.reload()}),3e3)):(d.FN.success({message:"\ud83d\ude0a Welcome ".concat(z.userInfo.fullName)}),I.saveLogin(z.userInfo),I.clearInputUser(),setTimeout((function(){F.push("/dashboard/default")}),1e3));case 2:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),onClose:function(){A((0,r.Z)((0,r.Z)({},z),{},{show:!1}))}})),(0,x.jsx)(p,(0,r.Z)((0,r.Z)({},H),{},{onClick:function(e){I.LoginService.forgotPassword({input:(0,r.Z)({},e)}).then((function(e){e.userForgotPassword.success?(J({show:!1}),I.updateForgotPassword(),d.FN.success({message:"\ud83d\ude0a ".concat(e.userForgotPassword.message)})):d.FN.error({message:"\ud83d\ude14 ".concat(e.userForgotPassword.message)})}))},onClose:function(){J({show:!1})}})),(0,x.jsx)(d.wg,(0,r.Z)((0,r.Z)({},X),{},{onClick:function(){var e=new Date(N()(new Date).add(30,"days").format("YYYY-MM-DD")),s=Object.assign(I.inputLogin,y.changePassword);s=(0,r.Z)((0,r.Z)({},s),{},{exipreDate:e}),y.UsersService.changePassword({input:(0,r.Z)({},s)}).then((function(s){s.userChnagePassword.success?(I.updateLogin((0,r.Z)((0,r.Z)({},I.login),{},{exipreDate:e,passChanged:!0})),y.updateChangePassword((0,r.Z)((0,r.Z)({},y.changePassword),{},{tempHide:!0})),d.FN.success({message:"\ud83d\ude0a ".concat(s.userChnagePassword.message)}),G({show:!1})):d.FN.error({message:"\ud83d\ude14 ".concat(s.userChnagePassword.message)})}))},onClose:function(){I.updateLogin((0,r.Z)((0,r.Z)({},I.login),{},{passChanged:!0})),y.updateChangePassword((0,r.Z)((0,r.Z)({},y.changePassword),{},{tempHide:!0})),G({show:!1})}})),(0,x.jsx)(d.h,(0,r.Z)((0,r.Z)({},se),{},{onClick:function(e,s,n){var r;I.LoginService.sessionAllowedLogout({input:{_id:s._id,userId:null===(r=I.inputLogin)||void 0===r?void 0:r.userId,accessToken:s.user.accessToken}}).then(function(){var s=(0,i.Z)((0,t.Z)().mark((function s(r){var i,l,a;return(0,t.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r.usersSessionAllowedLogout.success&&(d.FN.success({message:"\ud83d\ude0a ".concat(r.usersSessionAllowedLogout.message)}),i=e.slice(0,n)||[],l=e.slice(n+1)||[],a=[].concat((0,o.Z)(i),(0,o.Z)(l)),ne({show:a.length>0,data:a}));case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}())},onClose:function(){}}))]})})})),C=I}}]);