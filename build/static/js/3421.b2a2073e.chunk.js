"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[3421],{17227:function(e,t,i){i.r(t),i.d(t,{default:function(){return se}});var n,r,o,l,a,d,s,u,c,v,p,f,m,x,h,g,y,b,C,P,S,w,j=i(1413),D=i(74165),F=i(15861),T=i(93433),R=i(29439),I=i(72791),N=i(71672),Z=i(763),E=i.n(Z),B=i(20500),k=i(61134),z=i(10621),H=i(97892),L=i.n(H),M=i(4942),A=i(2002),O=i(33294),Q=i.n(O),J=i(36161),U=i(92746),Y=(i(26192),i(65028)),W=i(80184),_=O.Search.SearchBar,V=O.Search.ClearSearchButton,$=O.CSVExport.ExportCSVButton,q=function(e){var t=e.id,i=e.data,n=e.totalSize,r=void 0===n?10:n,o=e.searchPlaceholder,l=void 0===o?"Search...":o,a=e.page,d=void 0===a?0:a,s=e.sizePerPage,u=void 0===s?10:s,c=e.columns,v=e.fileName,p=(e.isDelete,e.isEditModify),f=e.isExport,m=void 0===f||f,x=(e.isSelectRow,e.selectedItem,e.isPagination,e.onSelectedRow,e.onUpdateItem),h=e.onPageSizeChange,g=e.onUpdateDeliveryStatus,y=e.onFilter,b=e.onPagination,C=e.clearAllFilter,P=(e.onClickRow,e.onFindDeliveryStatus),S=(0,I.useState)(),w=(0,R.Z)(S,2),T=(w[0],w[1],(0,I.useState)(!1)),N=(0,R.Z)(T,2),Z=N[0],k=N[1],z=(0,I.useState)(null),H=(0,R.Z)(z,2),O=(H[0],H[1],[{code:"Pending",value:"Pending",color:"blue"},{code:"Hold",value:"Hold",color:"green"},{code:"Cancel",value:"Cancel",color:"red"},{code:"Done",value:"Done",color:"orange"},{code:"All",value:"All",color:"red"}]),q={cutome:!0,totalSize:r,paginationSize:5,pageStartIndex:0,firstPageText:"<<",prePageText:"<",nextPageText:">",lastPageText:">>",disablePageTitle:!0,paginationTotalRenderer:function(e,t,i){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"clearfix"}),(0,W.jsxs)("span",{children:["Showing ",e," to ",t," of ",i," Results"]})]})},hideSizePerPage:!0,showTotal:!1,alwaysShowAllBtns:!0,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50}],hidePageListOnlyOnePage:!0,sizePerPageRenderer:function(e){var t=e.options,i=e.currSizePerPage,n=e.onSizePerPageChange;return(0,W.jsxs)("div",{className:"btn-group items-center",role:"group",children:[(0,W.jsx)("input",{type:"number",min:"0",placeholder:"No",onChange:function(e){e.target.value&&n(e.target.value)},className:"mr-2 ml-2 leading-4 p-2 w-14 focus:outline-none focus:ring block  shadow-sm sm:text-base border border-gray-300 rounded-md"}),t.map((function(e){return(0,W.jsx)("button",{type:"button",onClick:function(){return n(e.page)},className:"btn  ".concat(i==="".concat(e.page)?"bg-primary":"bg-grey"),children:e.text},e.text)}))]})}},G={placeholder:l},K=function(e,t){var i=t.data,n=t.cellEdit,o=t.page,l=t.sizePerPage,a=t.filters,d=t.sortField,s=t.sortOrder,u=t.searchText;if("cellEdit"===e&&p&&x&&x(n.newValue,n.dataField,n.rowId),"pagination"===e&&E().isEmpty(a)&&h&&h(o,l),"filter"===e||"pagination"===e&&!E().isEmpty(a)){if("pagination"===e){if(l>r)return alert("You have not more records.");if(o*l>r)return alert("You have not more records.")}for(var c={},v=0,f=Object.entries(a);v<f.length;v++){var m=(0,R.Z)(f[v],2),g=m[0],b=m[1],C=(0,M.Z)({},g,b.filterVal);c=Object.assign(c,C)}y&&(0,Y.Ds)((function(){y(e,c,"filter"===e&&1===o?0:o,l)}))}("search"===e&&(0,Y.Ds)((function(){y&&y(e,{srText:u},o,l)})),"sort"===e)&&("asc"===s?i.sort((function(e,t){return e[d]>t[d]?1:t[d]>e[d]?-1:0})):i.sort((function(e,t){return e[d]>t[d]?-1:t[d]>e[d]?1:0})))},X=function(e){var t=e.columns,i=e.onColumnToggle,n=e.toggles;return(0,W.jsx)("div",{className:"flex btn-group btn-group-toggle","data-toggle":"buttons",children:t.map((function(e){return(0,j.Z)((0,j.Z)({},e),{},{toggle:n[e.dataField]})})).map((function(e,t){if(t>0)return(0,W.jsx)("button",{type:"button",className:" btn btn-primary border-white  btn-sm whitespace-nowrap ".concat(e.toggle?"active":"inactive"),style:{height:"31px"},"data-toggle":"button","aria-pressed":e.toggle?"true":"false",onClick:function(){return i(e.dataField)},children:e.text},e.dataField)}))})},ee=function(e,t){var i,n,r,o,l;switch(null===e||void 0===e||null===(i=e.colorScheme)||void 0===i?void 0:i.envRangeColor){case"BOTH":return{backgroundColor:null===e||void 0===e||null===(n=e.colorScheme)||void 0===n?void 0:n.cellColor,color:null===e||void 0===e||null===(r=e.colorScheme)||void 0===r?void 0:r.fontColor};case"BACKGROUND":return{backgroundColor:null===e||void 0===e||null===(o=e.colorScheme)||void 0===o?void 0:o.cellColor};case"FONT":return{color:null===e||void 0===e||null===(l=e.colorScheme)||void 0===l?void 0:l.fontColor}}};return(0,W.jsx)(J.bN,{pagination:(0,J.ZP)(0!==r?q:{page:d,sizePerPage:u,totalSize:r}),keyField:t,columns:c,data:i,children:function(e){e.paginationProps;var n=e.paginationTableProps;return(0,W.jsx)(Q(),{keyField:t,bootstrap4:!0,data:i,columns:c,search:!0,exportCSV:{fileName:"".concat(v,"_").concat(L()(new Date).format("YYYY-MM-DD HH:mm"),".csv"),noAutoBOM:!1,blobType:"text/csv;charset=ansi",exportAll:!1,onlyExportFiltered:!0},columnToggle:!0,children:function(e){return(0,W.jsxs)("div",{children:[(0,W.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,W.jsx)(_,(0,j.Z)((0,j.Z)((0,j.Z)({},G),e.searchProps),{},{onChange:function(e){console.log({value:e})},style:{marginTop:10}})),(0,W.jsx)(V,(0,j.Z)({className:"inline-flex bg-gray-500 items-center small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.searchProps)),(0,W.jsx)("button",{className:"px-2 focus:outline-none bg-gray-500 items-center  outline shadow-sm  font-medium  text-center rounded-md h-9 text-white",onClick:C,children:"Clear all filters"}),m&&(0,W.jsx)($,(0,j.Z)((0,j.Z)({className:"inline-flex bg-gray-500 items-center  small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.csvProps),{},{children:"Export CSV!!"})),Z?(0,W.jsx)(B.EK.zx,{size:"medium",type:"outline",onClick:function(){k(!Z)},children:(0,W.jsx)(B.PJ.IconFa.FaChevronUp,{})}):(0,W.jsx)(B.EK.zx,{size:"medium",type:"outline",onClick:function(){k(!Z)},children:(0,W.jsx)(B.PJ.IconFa.FaChevronDown,{})}),(0,W.jsx)(B.u,{tooltipText:"All generate report update",position:"top",children:(0,W.jsx)(B.EK.zx,{size:"medium",type:"outline",disabled:!i.some((function(e){return"Pending"===(null===e||void 0===e?void 0:e.deliveryStatus)})),onClick:function(){g&&g()},children:(0,W.jsx)(B.PJ.IconTb.TbExchange,{})})}),(0,W.jsx)("div",{className:"flex gap-2",children:O.map((function(e){return(0,W.jsx)("button",{className:"px-2 py-2 bg-".concat(e.color,"-600 text-white rounded w-20"),onClick:function(){return null===P||void 0===P?void 0:P(e.code)},children:e.value},e.code)}))})]}),Z&&(0,W.jsx)("div",{className:"mb-2 flex overflow-auto",children:(0,W.jsx)(X,(0,j.Z)({contextual:"primary",className:"list-custom-class",btnClassName:"list-btn-custom-class"},e.columnToggleProps))}),(0,W.jsx)("div",{className:"scrollTable",children:(0,W.jsx)(A.Z,(0,j.Z)((0,j.Z)((0,j.Z)({remote:!0},e.baseProps),{},{noDataIndication:"Table is Empty",hover:!0},n),{},{filter:(0,U.ZP)(),headerClasses:"bg-gray-500 text-white whitespace-nowrap",onTableChange:K,rowStyle:ee}))}),(0,W.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,W.jsx)(B.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,F.Z)((0,D.Z)().mark((function e(){return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b&&b("next");case 1:case"end":return e.stop()}}),e)}))),children:(0,W.jsx)(B.PJ.IconBi.BiSkipNext,{})}),(0,W.jsx)(B.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,F.Z)((0,D.Z)().mark((function e(){return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b&&b("prev");case 1:case"end":return e.stop()}}),e)}))),children:(0,W.jsx)(B.PJ.IconBi.BiSkipPrevious,{})})]})]})}})}})},G=(0,N.Pi)((function(e){var t=(0,I.useState)(""),i=(0,R.Z)(t,2),D=i[0],F=i[1],T=(0,I.useState)(e.data),N=(0,R.Z)(T,2),Z=N[0],E=N[1];return(0,I.useEffect)((function(){var t,i;F(e.selectedId||""),E(e.selectedId?null===(t=e.data)||void 0===t||null===(i=t.filter((function(t){return t._id===e.selectedId})))||void 0===i?void 0:i.map((function(t){return(0,j.Z)((0,j.Z)({},t),{},{selectedId:e.selectedId})})):function(e,t){switch(t){case"Hold":return e.filter((function(e){return"Hold"===(null===e||void 0===e?void 0:e.deliveryStatus)}));case"Pending":return e.filter((function(e){return"Pending"===(null===e||void 0===e?void 0:e.deliveryStatus)}));case"Done":return e.filter((function(e){return"Done"===(null===e||void 0===e?void 0:e.deliveryStatus)}));default:return e}}(e.data,e.holdRecord))}),[e.selectedId,e.data,e.holdRecord]),(0,W.jsx)(W.Fragment,{children:(0,W.jsx)("div",{className:"".concat(e.isView?"shown":"hidden"),children:(0,W.jsx)(q,{id:"_id",data:Z,totalSize:e.totalSize,isPagination:e.isPagination,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"deliveryId",text:"Delivery Id",sort:!0,editable:!1,headerClasses:"textHeaderxxs"},{dataField:"labId",text:"Lab Id",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},editable:!1,headerClasses:"textHeader2",filter:(0,B.w9)({getFilter:function(e){n=e}}),filterRenderer:function(e,t){return(0,W.jsx)(B.Tj,{onFilter:e,column:t})}},{dataField:"name",text:"Name",sort:!0,headerStyle:{fontSize:0},style:{textTransform:"uppercase",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,maxWidth:"250px",position:"relative"},formatter:function(e,t){return(0,W.jsx)("span",{title:t.name,children:e})},sortCaret:function(e,t){return(0,B.t$)(e,t)},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Name",getFilter:function(e){r=e}})},{dataField:"deliveryDate",text:"Delivery Date",headerStyle:{fontSize:0},editable:!1,headerClasses:"textHeaderm",filter:(0,B.w9)({getFilter:function(e){a=e}}),filterRenderer:function(e,t){return(0,W.jsx)(B.rQ,{onFilter:e,column:t})},formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:t.deliveryDate?L()(t.deliveryDate).format("DD-MM-YYYY HH:mm:ss"):""})}},{dataField:"reportDate",text:"Report Date",headerStyle:{fontSize:0},editable:!1,headerClasses:"textHeaderm",filter:(0,B.w9)({getFilter:function(e){d=e}}),filterRenderer:function(e,t){return(0,W.jsx)(B.rQ,{onFilter:e,column:t})},formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:t.reportDate?L()(t.reportDate).format("DD-MM-YYYY HH:mm:ss"):""})}},{dataField:"deliveryStatus",text:"Delivery Status",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Delivery Status",getFilter:function(e){s=e}})},{dataField:"reportType",text:"Report Type",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Report Type",getFilter:function(e){u=e}})},{dataField:"reportPriority",text:"Report Priority",sort:!0,csvFormatter:function(e,t){return null!==t&&void 0!==t&&t.reportPriority?t.reportPriority:""},editable:!1},{dataField:"deliveryMode",text:"Delivery Mode",sort:!0,csvFormatter:function(e,t){return null!==t&&void 0!==t&&t.deliveryMode?t.deliveryMode:""},editable:!1,formatter:function(e,t){var i;return(0,W.jsx)("div",{className:"flex flex-row flex-wrap gap-2",children:null===t||void 0===t||null===(i=t.deliveryMode)||void 0===i?void 0:i.map((function(e){return(0,W.jsx)("span",{className:"bg-blue-800 rounded-md p-2 text-white",children:e.code})}))})}},{dataField:"destination",text:"Destination",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Destination",getFilter:function(e){c=e}})},{dataField:"comments",text:"Comments",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Comments",getFilter:function(e){v=e}})},{dataField:"startDate",text:"Start Date",headerStyle:{fontSize:0},editable:!1,headerClasses:"textHeaderm",filter:(0,B.w9)({getFilter:function(e){p=e}}),filterRenderer:function(e,t){return(0,W.jsx)(B.rQ,{onFilter:e,column:t})},formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:t.startDate?L()(t.startDate).format("DD-MM-YYYY HH:mm:ss"):""})}},{dataField:"endDate",text:"End Date",headerStyle:{fontSize:0},editable:!1,headerClasses:"textHeaderm",filter:(0,B.w9)({getFilter:function(e){f=e}}),filterRenderer:function(e,t){return(0,W.jsx)(B.rQ,{onFilter:e,column:t})},formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:t.endDate?L()(t.endDate).format("DD-MM-YYYY HH:mm:ss"):""})}},{dataField:"errorMsg",text:"Error Msg",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Error Msg",getFilter:function(e){m=e}})},{dataField:"clientCode",text:"Client Code - Name",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Client Code - Name",getFilter:function(e){x=e}}),style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,maxWidth:"250px",position:"relative"},formatter:function(e,t){return(0,W.jsxs)("span",{title:"".concat(t.clientCode," - ").concat(t.clientName),children:[e," - ",t.clientName]})}},{dataField:"registrationLocationCode",text:"Registration Location Code - Name",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Registration Location Code - Name",getFilter:function(e){h=e}}),style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,maxWidth:"250px",position:"relative"},formatter:function(e,t){return(0,W.jsxs)("span",{title:"".concat(t.registrationLocationCode," - ").concat(t.registrationLocation),children:[e," - ",t.registrationLocation]})}},{dataField:"doctorCode",text:"Doctor Code",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Doctor Code",getFilter:function(e){g=e}})},{dataField:"doctorName",text:"Doctor Name",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Doctor Name",getFilter:function(e){y=e}})},{dataField:"qrCode",text:"Qr Code",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Qr Code",getFilter:function(e){b=e}})},{dataField:"pdf",text:"PDF",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"PDF",getFilter:function(e){C=e}})},{dataField:"externalLabId",text:"External Lab Id",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"External Lab Id",getFilter:function(e){o=e}})},{dataField:"employeeCode",text:"Employee Code",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Employee Code",getFilter:function(e){l=e}})},{dataField:"userComments",text:"User Comments",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"User Comments",getFilter:function(e){S=e}})},{dataField:"enteredBy",text:"Entered By",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader",filter:(0,B.DN)({placeholder:"Entered By",getFilter:function(e){P=e}})},{dataField:"environment",text:"Environment",headerClasses:"textHeader",sort:!0,headerStyle:{fontSize:0},editable:!1,sortCaret:function(e,t){return(0,B.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,B.DN)({placeholder:"Environment",getFilter:function(e){w=e}})},{dataField:"operation",text:"Action",editable:!1,csvExport:!1,formatter:function(t,i){return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)("div",{className:"flex flex-row",children:[e.isGenerateReport&&(0,W.jsx)(B.u,{tooltipText:"Generate Report",children:(0,W.jsx)(B.PJ.IconContext,{color:"Done"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&"Cancel"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&"Hold"!==(null===i||void 0===i?void 0:i.deliveryStatus)?"#ffffff":"#5A5A5A",size:"20",onClick:function(){"Done"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&"Cancel"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&"Hold"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&e.onUpdate&&e.onUpdate({type:"Done",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Generate pdf status update"})},children:B.PJ.getIconTag(B.PJ.IconTb.TbExchange)})}),e.isHold&&(0,W.jsx)(B.u,{tooltipText:"".concat("Hold"===(null===i||void 0===i?void 0:i.deliveryStatus)?"Pending":"Hold"),position:"bottom",children:(0,W.jsx)(B.PJ.IconContext,{color:"Cancel"!==(null===i||void 0===i?void 0:i.deliveryStatus)?"#ffffff":"#5A5A5A",size:"20",onClick:function(){"Cancel"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&e.onUpdate&&e.onUpdate({type:"Hold"===(null===i||void 0===i?void 0:i.deliveryStatus)?"Pending":"Hold",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Delivery status update"})},children:B.PJ.getIconTag(B.PJ.Iconmd.MdBackHand)})}),e.isCancel&&(0,W.jsx)(B.u,{tooltipText:"Cancel",position:"bottom",children:(0,W.jsx)(B.PJ.IconContext,{color:"Hold"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&"Cancel"!==(null===i||void 0===i?void 0:i.deliveryStatus)?"#ffffff":"#5A5A5A",size:"20",onClick:function(){"Hold"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&"Cancel"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&e.onUpdate&&e.onUpdate({type:"Cancel",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Cancel item"})},children:B.PJ.getIconTag(B.PJ.IconGi.GiCancel)})}),e.isReport&&(0,W.jsx)(B.u,{tooltipText:"Report",children:(0,W.jsx)(B.PJ.IconContext,{color:"Done"==(null===i||void 0===i?void 0:i.deliveryStatus)&&"Hold"!==(null===i||void 0===i?void 0:i.deliveryStatus)?"#ffffff":"#5A5A5A",size:"20",onClick:function(){"Done"==(null===i||void 0===i?void 0:i.deliveryStatus)&&"Hold"!==(null===i||void 0===i?void 0:i.deliveryStatus)&&e.onReport&&e.onReport(i)},children:B.PJ.getIconTag(B.PJ.IconBs.BsFilePdf)})}),D===i._id?(0,W.jsx)(B.u,{tooltipText:"Expand",children:(0,W.jsx)(B.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){e.onExpand&&e.onExpand("")},children:B.PJ.getIconTag(B.PJ.Iconai.AiFillMinusCircle)})}):(0,W.jsx)(B.u,{tooltipText:"Expand",children:(0,W.jsx)(B.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){e.onExpand&&e.onExpand(i)},children:B.PJ.getIconTag(B.PJ.Iconai.AiFillPlusCircle)})})]})})},headerClasses:"sticky right-0  bg-gray-500 text-white z-50",classes:function(e,t,i,n){return"sticky right-0 bg-gray-500"},style:function(t,i,n,r){var o;return{zIndex:(null===(o=e.data)||void 0===o?void 0:o.length)-n}}}],isDelete:e.isDelete,isEditModify:e.isUpdate,isExport:e.isExport,isSelectRow:!0,fileName:"Report Delivery",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,i,n){e.onUpdateItem&&e.onUpdateItem(t,i,n)},onPageSizeChange:function(t,i){e.onPageSizeChange&&e.onPageSizeChange(t,i)},onFilter:function(t,i,n,r){e.onFilter&&e.onFilter(t,i,n,r)},clearAllFilter:function(){n(""),r(""),o(""),l(""),undefined(""),a(),d(),s(""),u(""),undefined(""),c(""),v(""),p(),f(),m(""),x(""),undefined(""),undefined(""),h(""),g(""),y(""),b(""),C(""),P(""),S(""),undefined(""),w("")},onUpdateDeliveryStatus:function(){e.onUpdateDeliveryStatus&&e.onUpdateDeliveryStatus()},onPagination:function(t){e.onPagination&&e.onPagination(t)},onFindDeliveryStatus:function(t){e.onFindDeliveryStatus&&e.onFindDeliveryStatus(t)}})})})})),K=(O.Search.SearchBar,O.Search.ClearSearchButton,O.CSVExport.ExportCSVButton,function(e){var t=e.id,i=e.data,n=e.totalSize,r=void 0===n?10:n,o=(e.searchPlaceholder,e.page),l=void 0===o?0:o,a=e.sizePerPage,d=void 0===a?10:a,s=e.columns,u=e.fileName,c=e.isEditModify,v=(e.isSelectRow,e.selectedItem,e.isPagination,e.onSelectedRow,e.onUpdateItem),p=e.onPageSizeChange,f=(e.onUpdateDeliveryStatus,e.onFilter),m=(e.clearAllFilter,e.onClickRow),x=(0,I.useState)(),h=(0,R.Z)(x,2),g=(h[0],h[1],(0,I.useState)(!1)),y=(0,R.Z)(g,2),b=(y[0],y[1],{cutome:!0,totalSize:r,paginationSize:5,pageStartIndex:0,firstPageText:"<<",prePageText:"<",nextPageText:">",lastPageText:">>",disablePageTitle:!0,paginationTotalRenderer:function(e,t,i){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"clearfix"}),(0,W.jsxs)("span",{children:["Showing ",e," to ",t," of ",i," Results"]})]})},hideSizePerPage:!0,showTotal:!1,alwaysShowAllBtns:!0,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50}],hidePageListOnlyOnePage:!0,sizePerPageRenderer:function(e){var t=e.options,i=e.currSizePerPage,n=e.onSizePerPageChange;return(0,W.jsxs)("div",{className:"btn-group items-center",role:"group",children:[(0,W.jsx)("input",{type:"number",min:"0",placeholder:"No",onChange:function(e){e.target.value&&n(e.target.value)},className:"mr-2 ml-2 leading-4 p-2 w-14 focus:outline-none focus:ring block  shadow-sm sm:text-base border border-gray-300 rounded-md"}),t.map((function(e){return(0,W.jsx)("button",{type:"button",onClick:function(){return n(e.page)},className:"btn  ".concat(i==="".concat(e.page)?"bg-primary":"bg-grey"),children:e.text},e.text)}))]})}}),C=function(e,t){var i=t.data,n=t.cellEdit,o=t.page,l=t.sizePerPage,a=t.filters,d=t.sortField,s=t.sortOrder,u=t.searchText;if("cellEdit"===e&&c&&v&&v(n.newValue,n.dataField,n.rowId),"pagination"===e&&E().isEmpty(a)&&p&&p(o,l),"filter"===e||"pagination"===e&&!E().isEmpty(a)){if("pagination"===e){if(l>r)return alert("You have not more records.");if(o*l>r)return alert("You have not more records.")}for(var m={},x=0,h=Object.entries(a);x<h.length;x++){var g=(0,R.Z)(h[x],2),y=g[0],b=g[1],C=(0,M.Z)({},y,b.filterVal);m=Object.assign(m,C)}f&&(0,Y.Ds)((function(){f(e,m,"filter"===e&&1===o?0:o,l)}))}("search"===e&&(0,Y.Ds)((function(){f&&f(e,{srText:u},o,l)})),"sort"===e)&&("asc"===s?i.sort((function(e,t){return e[d]>t[d]?1:t[d]>e[d]?-1:0})):i.sort((function(e,t){return e[d]>t[d]?-1:t[d]>e[d]?1:0})))},P={onClick:function(e,t,i){m&&m(t,i)}},S=function(e,t){var i,n,r,o,l;switch(null===e||void 0===e||null===(i=e.colorScheme)||void 0===i?void 0:i.envRangeColor){case"BOTH":return{backgroundColor:null===e||void 0===e||null===(n=e.colorScheme)||void 0===n?void 0:n.cellColor,color:null===e||void 0===e||null===(r=e.colorScheme)||void 0===r?void 0:r.fontColor};case"BACKGROUND":return{backgroundColor:null===e||void 0===e||null===(o=e.colorScheme)||void 0===o?void 0:o.cellColor};case"FONT":return{color:null===e||void 0===e||null===(l=e.colorScheme)||void 0===l?void 0:l.fontColor}}};return(0,W.jsx)(J.bN,{pagination:(0,J.ZP)(0!==r?b:{page:l,sizePerPage:d,totalSize:r}),keyField:t,columns:s,data:i,children:function(e){e.paginationProps;var n=e.paginationTableProps;return(0,W.jsx)(Q(),{keyField:t,bootstrap4:!0,data:i,columns:s,search:!0,exportCSV:{fileName:"".concat(u,"_").concat(L()(new Date).format("YYYY-MM-DD HH:mm"),".csv"),noAutoBOM:!1,blobType:"text/csv;charset=ansi",exportAll:!1,onlyExportFiltered:!0},columnToggle:!0,children:function(e){return(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{className:"flex items-center gap-2 flex-wrap"}),(0,W.jsx)("div",{className:"scrollTable",children:(0,W.jsx)(A.Z,(0,j.Z)((0,j.Z)((0,j.Z)({remote:!0},e.baseProps),{},{noDataIndication:"Table is Empty",hover:!0},n),{},{filter:(0,U.ZP)(),headerClasses:"bg-gray-500 text-white whitespace-nowrap",onTableChange:C,rowEvents:P,rowStyle:S}))})]})}})}})}),X=(0,N.Pi)((function(e){return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)("div",{style:{position:"relative"},children:(0,W.jsx)(K,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"deliveryId",text:"Delivery Id",sort:!0,editable:!1},{dataField:"labId",text:"Lab Id",sort:!0,editable:!1},{dataField:"panelCode",text:"Panel Code",sort:!0,editable:!1},{dataField:"panelName",text:"Panel Name",sort:!0,editable:!1,headerClasses:"textHeadersxm",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,maxWidth:"150px",position:"relative"},formatter:function(e,t){return(0,W.jsx)("span",{title:t.panelName,children:e})}},{dataField:"testCode",text:"Test Code",sort:!0,editable:!1},{dataField:"testName",text:"Test Name",sort:!0,headerClasses:"textHeadersxm",csvFormatter:function(e){return e||""},editable:!1,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,maxWidth:"150px",position:"relative"},formatter:function(e,t){return(0,W.jsx)("span",{title:t.testName,children:e})}},{dataField:"analyteCode",text:"Analyte Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"analyteName",text:"Analyte Name",sort:!0,headerClasses:"textHeadersxm",csvFormatter:function(e){return e||""},editable:!1,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,maxWidth:"150px",position:"relative"},formatter:function(e,t){return(0,W.jsx)("span",{title:t.analyteName,children:e})}},{dataField:"rep",text:"Rep",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"delivered",text:"Delivered",sort:!0,csvFormatter:function(e,t){return"".concat(t.delivered&&t.delivered?"Yes":"No")},editable:!1,formatter:function(e,t){return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(B.l0.ZD,{disabled:!0,value:t.delivered})})}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Order Delivered",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,i,n){e.onUpdateItem&&e.onUpdateItem(t,i,n)},onPageSizeChange:function(t,i){e.onPageSizeChange&&e.onPageSizeChange(t,i)},onFilter:function(t,i,n,r){e.onFilter&&e.onFilter(t,i,n,r)},clearAllFilter:function(){}})})})})),ee=i(79476),te=i(71249),ie=i(32973),ne=i.n(ie),re=function(e){var t=I.useState(e.show),i=(0,R.Z)(t,2),n=i[0],r=i[1];(0,I.useRef)(null);return(0,I.useEffect)((function(){r(e.show),e.autoClose&&setTimeout((function(){e.close&&e.close()}),1e3)}),[e]),(0,W.jsx)(ee.W2,{children:n&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"justify-center items-center  overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:(0,W.jsx)("div",{className:"relative w-auto my-5 mx-auto max-w-7xl",children:(0,W.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col bg-white outline-none focus:outline-none",children:[(0,W.jsxs)("div",{className:"flex items-start justify-between p-2 border-b border-solid border-gray-300 rounded-t",children:[(0,W.jsx)("h3",{className:"text-xl font-semibold",children:e.title}),(0,W.jsxs)("div",{className:"flex gap-4",children:[(0,W.jsx)(B.u,{tooltipText:"Print",children:(0,W.jsx)(B.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,F.Z)((0,D.Z)().mark((function t(){var i,n,r;return(0,D.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onGetReports();case 2:return i=t.sent,t.next=5,(0,te.eA)(i).toBlob();case 5:n=t.sent,r=URL.createObjectURL(n),ne()({printable:r,type:"pdf",showModal:!0}),e.close();case 9:case"end":return t.stop()}}),t)}))),children:B.PJ.getIconTag(B.PJ.IconBi.BiPrinter)})}),(0,W.jsx)(B.u,{tooltipText:"Download",children:(0,W.jsx)(B.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,F.Z)((0,D.Z)().mark((function t(){var i,n,r,o;return(0,D.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onGetReports();case 2:return i=t.sent,t.next=5,(0,te.eA)(i).toBlob();case 5:n=t.sent,r=URL.createObjectURL(new Blob([n])),(o=document.createElement("a")).href=r,o.download="Delivery-Queue-Reports_".concat(L()().format("DD-MM-YYYY"),".pdf"),document.body.append(o),o.click(),o.remove(),URL.revokeObjectURL(r),e.close();case 15:case"end":return t.stop()}}),t)}))),children:B.PJ.getIconTag(B.PJ.IconFa.FaDownload)})}),(0,W.jsx)("button",{className:"p-1  border-0 text-black opacity-1 ml-6 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){e.close(),r(!1)},children:(0,W.jsx)("span",{className:" text-black h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})]})]}),(0,W.jsx)("div",{className:"flex p-2 w-auto h-auto ",children:e.children})]})})}),(0,W.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})})},oe=i(89238),le=function(e){var t=e.show,i=void 0!==t&&t,n=e.data,r=e.templateDetails,o=e.onClose,l=(e.onReceiptUpload,(0,I.useState)()),a=(0,R.Z)(l,2),d=a[0],s=a[1],u=I.useState(i),c=(0,R.Z)(u,2),v=c[0],p=c[1],f=(0,I.useState)(!0),m=(0,R.Z)(f,2),x=m[0],h=m[1],g=(0,I.useState)(!1),y=(0,R.Z)(g,2),b=y[0],C=y[1];console.log({data:n,templateDetails:r}),(0,I.useEffect)((function(){p(i)}),[i]),(0,I.useEffect)((function(){if(n){for(var e=E().mapKeys(n,(function(e,t){return t.split(" -")[0]})),t=[],i=function(){var e=o[r],i=0;e[1].map((function(t){var n;return null===t||void 0===t||null===(n=t.patientResultList)||void 0===n?void 0:n.map((function(t){var n;(null===(n=t.reportTemplate)||void 0===n?void 0:n.split(" - ")[0])==e[0]&&(i=t.reportTemplateOrder)}))})),t.push({template:e[0],patientReports:e[1],order:i})},r=0,o=Object.entries(e);r<o.length;r++)i();t=E().orderBy(t,"order","asc"),s(t)}}),[n]);var P=function(e){return(0,W.jsx)(te.BB,{title:"Delivery Queue",children:e.map((function(e){return(0,W.jsxs)(W.Fragment,{children:["TEMP0001"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.g4,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0001"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0001"==e.templateCode}))},isWithHeader:x})})),"TEMP0002"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.p3,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0002"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0002"==e.templateCode}))},isWithHeader:x})})),"TEMP0003"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.Lk,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0003"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0003"==e.templateCode}))},isWithHeader:x})})),"TEMP0004"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.oJ,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0004"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0004"==(null===e||void 0===e?void 0:e.templateCode)}))},isWithHeader:x})})),"TEMP0005"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.uf,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0005"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0005"==e.templateCode}))},isWithHeader:x})})),"TEMP0006"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.wm,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0006"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0006"==e.templateCode}))},isWithHeader:x})})),"TEMP0007"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.Wf,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0007"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0007"==e.templateCode}))},isWithHeader:x})})),"TEMP0008"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.Nm,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0008"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0008"==e.templateCode}))},isWithHeader:x})})),"TEMP0009"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.X0,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0009"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0009"==(null===e||void 0===e?void 0:e.templateCode)}))},isWithHeader:x})})),"TEMP0010"==e.template&&E().uniqBy(null===e||void 0===e?void 0:e.patientReports,"labId").map((function(e){var t;return(0,W.jsx)(oe.vg,{data:{patientReports:(0,j.Z)((0,j.Z)({},e),{},{patientResultList:null===e||void 0===e||null===(t=e.patientResultList)||void 0===t?void 0:t.filter((function(e){var t;return"TEMP0010"==(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])}))}),pageBranding:null===r||void 0===r?void 0:r.find((function(e){return"TEMP0010"==(null===e||void 0===e?void 0:e.templateCode)}))},isWithHeader:x})}))]})}))})};return(0,W.jsxs)(ee.W2,{children:[v&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"justify-center items-center  overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:(0,W.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,W.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,W.jsxs)("div",{className:"flex items-start justify-between p-3 border-b border-solid border-gray-300 rounded-t",children:[(0,W.jsx)("h3",{className:"text-3xl font-semibold",children:"Generate Reports"}),(0,W.jsx)("button",{className:"p-1  border-0 text-black opacity-1 ml-6 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){p(!1),o&&o()},children:(0,W.jsx)("span",{className:" text-black h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})]}),(0,W.jsx)("div",{className:"relative p-2 flex-auto",children:(0,W.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:n&&(0,W.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,W.jsx)(B.l0.rW,{label:"Report Type",labelStyle:{fontWeight:"bold",fontSize:16},value:x?"withHeader":"withoutHeader",values:[{value:"withHeader",label:"With Header"},{value:"withoutHeader",label:"Without Header"}],onChange:function(e){h("withHeader"==e)}}),(0,W.jsxs)("div",{className:"flex flex-row content-center justify-center gap-2",children:[(0,W.jsx)(B.u,{tooltipText:"View",children:(0,W.jsx)(B.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,F.Z)((0,D.Z)().mark((function e(){return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),o&&o();case 2:case"end":return e.stop()}}),e)}))),children:B.PJ.getIconTag(B.PJ.Iconmd.MdOutlinePreview)})}),(0,W.jsx)(B.u,{tooltipText:"Print",children:(0,W.jsx)(B.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,F.Z)((0,D.Z)().mark((function e(){var t,i,n;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(d);case 2:return t=e.sent,e.next=5,(0,te.eA)(t).toBlob();case 5:i=e.sent,n=URL.createObjectURL(i),ne()({printable:n,type:"pdf",showModal:!0}),o&&o();case 9:case"end":return e.stop()}}),e)}))),children:B.PJ.getIconTag(B.PJ.IconBi.BiPrinter)})})]})]})})}),(0,W.jsxs)("div",{className:"flex items-center  p-3 border-t border-solid border-gray-300 rounded-b justify-between",children:[(0,W.jsx)("span",{className:"text-red",children:"Note: ResultType FR & BO report opening new tab runtime"}),(0,W.jsx)("button",{className:"text-red background-transparent font-bold uppercase  text-sm outline-none focus:outline-none",type:"button",style:{transition:"all .15s ease"},onClick:function(){p(!1),o&&o()},children:"Close"})]})]})})}),(0,W.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}),(0,W.jsx)(re,{title:"Delivery Queue Reports",show:b,reportList:d,close:function(){C(!1)},onGetReports:function(){return P(d)},autoClose:(E().has(d,"TEMP0007")||!!E().has(d,"TEMP0008"))&&1==E().size(d),children:b?(0,W.jsx)(te.Z$,{style:{width:window.innerWidth,height:window.innerHeight/1.2},showToolbar:!1,children:P(d)}):null})]})},ae=(i(70042),i(53946)),de=(i(3069),(0,N.Pi)((function(){var e,t,n=(0,ae.mZ)(),r=n.deliveryQueueStore,o=n.routerStore,l=n.loginStore,a=n.reportSettingStore,d=(0,k.cI)(),s=(d.control,d.handleSubmit,d.formState.errors,d.setValue,(0,I.useState)()),u=(0,R.Z)(s,2),c=u[0],v=u[1],p=(0,I.useState)(""),f=(0,R.Z)(p,2),m=f[0],x=f[1],h=(0,I.useState)(!1),g=(0,R.Z)(h,2),y=g[0],b=g[1],C=(0,I.useState)(""),P=(0,R.Z)(C,2),S=P[0];P[1];(0,I.useEffect)((function(){!function(){var e=l.login;"CORPORATE_PORTAL"==(null===e||void 0===e?void 0:e.role)?r.deliveryQueueService.findByFields({input:{filter:{clientCode:e.lab,isReCall:!1}}}).then((function(e){var t,i,n;e.findByFieldsDeliveryQueue.success&&r.updateReportDeliveryList({deliveryQueues:{data:null===(t=e.findByFieldsDeliveryQueue)||void 0===t?void 0:t.data,paginatorInfo:{count:null===(i=e.findByFieldsDeliveryQueue)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.length}}})})):r.deliveryQueueService.listDeliveryQueue()}()}),[]);var w=function(e){return"string"===typeof e?null===e||void 0===e?void 0:e.toUpperCase():e},N=function(e,t){var i=Object.keys(t);return e.filter((function(e){return i.every((function(i){return console.log({key:i}),!t[i].length||t[i].find((function(t){return w(t)===w(e[i])}))}))}))},Z=function(e){var t=[],i=E().groupBy(e,"reportPriority");if(null!==i&&void 0!==i&&i.Progressive){var n=null===i||void 0===i?void 0:i.Progressive,r=E().map(E().groupBy(n,(function(e){return e.labId&&e.panelCode})),(function(e){var t=null===e||void 0===e?void 0:e.find((function(e){return null===e||void 0===e?void 0:e.critical}));if(!E().isEmpty(t))return t;var i=null===e||void 0===e?void 0:e.find((function(e){return null===e||void 0===e?void 0:e.abnFlag}));return E().isEmpty(i)?E().maxBy(e,"deliveryId"):i}));t.push.apply(t,(0,T.Z)(r))}if(i["All Together"]){var o=i["All Together"],l=E().map(E().groupBy(o,"labId"),(function(e){var t=null===e||void 0===e?void 0:e.find((function(e){return null===e||void 0===e?void 0:e.critical}));if(!E().isEmpty(t))return t;var i=null===e||void 0===e?void 0:e.find((function(e){return null===e||void 0===e?void 0:e.abnFlag}));return E().isEmpty(i)?E().maxBy(e,"deliveryId"):i}));t.push.apply(t,(0,T.Z)(l))}if(i["One Today"]){var a=i["One Today"],d=E().map(E().groupBy(a,(function(e){return e.labId&&e.approvalDate})));null===d||void 0===d||d.filter((function(e){null!==e&&void 0!==e&&e.find((function(e){return"Final"==(null===e||void 0===e?void 0:e.reportType)}))?t.push(null===e||void 0===e?void 0:e.find((function(e){return"Final"==(null===e||void 0===e?void 0:e.reportType)}))):t.push.apply(t,(0,T.Z)(E().map(E().groupBy(e,(function(e){return e.labId&&e.approvalDate})),(function(e){var t=null===e||void 0===e?void 0:e.find((function(e){return null===e||void 0===e?void 0:e.critical}));if(!E().isEmpty(t))return t;var i=null===e||void 0===e?void 0:e.find((function(e){return null===e||void 0===e?void 0:e.abnFlag}));return E().isEmpty(i)?E().maxBy(e,"deliveryId"):i}))))}))}if(i.Daily){var s=i.Daily,u=E().map(E().groupBy(s,(function(e){return e.labId&&e.approvalDate})));null===u||void 0===u||u.filter((function(e){null!==e&&void 0!==e&&e.find((function(e){return"Final"==(null===e||void 0===e?void 0:e.reportType)}))?t.push(null===e||void 0===e?void 0:e.find((function(e){return"Final"==(null===e||void 0===e?void 0:e.reportType)}))):t.push.apply(t,(0,T.Z)(E().map(E().groupBy(e,(function(e){return e.labId&&e.approvalDate})),(function(e){var t=null===e||void 0===e?void 0:e.find((function(e){return null===e||void 0===e?void 0:e.critical}));if(!E().isEmpty(t))return t;var i=null===e||void 0===e?void 0:e.find((function(e){return null===e||void 0===e?void 0:e.abnFlag}));return E().isEmpty(i)?E().maxBy(e,"deliveryId"):i}))))}))}return E().orderBy(t,"dateOfEntry","desc")},H=function(){var e=(0,F.Z)((0,D.Z)().mark((function e(t){return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){var n={};n="Progressive"==t.reportPriority?{labId:t.labId,panelCode:t.panelCode}:"One Today"!=t.reportPriority&&"Daily"!=t.reportPriority||"Interim"!=t.reportType?{labId:t.labId}:{labId:t.labId,reportType:"Interim",approvalDate:null===t||void 0===t?void 0:t.approvalDate},r.deliveryQueueService.findByFields({input:{filter:n}}).then((function(t){if(t.findByFieldsDeliveryQueue.success){var i=t.findByFieldsDeliveryQueue.data;i=E().unionBy(i,(function(e){return e.patientResultId})),i=E().orderBy(i,"deliveryId","desc"),e(i)}}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,F.Z)((0,D.Z)().mark((function e(t){var n,o,l,a,d,s,u,c,v,p,f,m,x,h,g,C,P,S;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=t.type,s=t.id,u=t.visitId,c=t.ids,Array.isArray(u)){e.next=6;break}return e.next=4,r.deliveryQueueService.updateDeliveryQueue({input:{_id:s,visitId:u,deliveryStatus:d}}).then((function(e){e.updateDeliveryQueue.success&&B.FN.success({message:"\ud83d\ude0a ".concat(e.updateDeliveryQueue.message)})}));case 4:e.next=8;break;case 6:return e.next=8,r.deliveryQueueService.updateDeliveryQueueByVisitIds({input:{filter:{ids:c,visitId:u,deliveryStatus:"Done"}}}).then((function(e){e.updateByVisitIdsDeliveryQueue.success&&B.FN.success({message:"\ud83d\ude0a ".concat(e.updateByVisitIdsDeliveryQueue.message)})}));case 8:"pagination"==(null===(n=i.g)||void 0===n||null===(o=n.filter)||void 0===o?void 0:o.mode)?r.deliveryQueueService.listDeliveryQueue(null===(v=i.g)||void 0===v||null===(p=v.filter)||void 0===p?void 0:p.pageNo,100):"filter"==(null===(l=i.g)||void 0===l||null===(a=l.filter)||void 0===a?void 0:a.mode)?r.deliveryQueueService.filter({input:{type:null===(f=i.g)||void 0===f||null===(m=f.filter)||void 0===m?void 0:m.type,filter:null===(x=i.g)||void 0===x||null===(h=x.filter)||void 0===h?void 0:h.filter,page:null===(g=i.g)||void 0===g||null===(C=g.filter)||void 0===C?void 0:C.page,limit:null===(P=i.g)||void 0===P||null===(S=P.filter)||void 0===S?void 0:S.limit}}):r.deliveryQueueService.listDeliveryQueue(),b(!y);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=(0,I.useMemo)((function(){var e,t;return(0,W.jsx)(G,{data:Z(r.reportDeliveryList)||[],totalSize:null===(e=Z(r.reportDeliveryList))||void 0===e?void 0:e.length,isPagination:"SYSADMIN"==(null===(t=l.login)||void 0===t?void 0:t.role),selectedId:m,holdRecord:S,isView:z.o.checkPermission(o.userPermission,"View"),isDelete:z.o.checkPermission(o.userPermission,"Delete"),isUpdate:z.o.checkPermission(o.userPermission,"Update"),isExport:z.o.checkPermission(o.userPermission,"Export"),isGenerateReport:z.o.checkPermission(o.userPermission,"Generate Report"),isHold:z.o.checkPermission(o.userPermission,"Hold"),isCancel:z.o.checkPermission(o.userPermission,"Cancel"),isReport:z.o.checkPermission(o.userPermission,"Report"),onUpdate:function(e){return L(e)},onFilter:function(e,t,n,o){var a;if(i.g.filter={mode:"filter",type:e,filter:t,page:n,limit:o},"SYSADMIN"==(null===(a=l.login)||void 0===a?void 0:a.role))r.deliveryQueueService.filter({input:{type:e,filter:t,page:n,limit:o}});else if("filter"==e)console.log({list:N(r.reportDeliveryListCopy,t)});else{if(""==t.srText)return r.updateReportDeliveryList(r.reportDeliveryListCopy);var d=r.reportDeliveryListCopy,s=null===d||void 0===d?void 0:d.filter((function(e){var i;return JSON.stringify(e).toLocaleLowerCase().match(null===(i=t.srText)||void 0===i?void 0:i.toLocaleLowerCase())}));r.updateReportDeliveryList(s)}},onExpand:function(){var e=(0,F.Z)((0,D.Z)().mark((function e(t){return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(null===t||void 0===t?void 0:t._id),"object"==typeof t?H(t).then((function(e){r.updateOrderDeliveredList(e)})):r.updateOrderDeliveredList([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onUpdateDeliveryStatus:function(){var e,t=null===(e=r.reportDeliveryList)||void 0===e?void 0:e.filter((function(e){return"Pending"===(null===e||void 0===e?void 0:e.deliveryStatus)})),i=null===t||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e._id})),n=null===t||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.visitId}));L({type:"updateAllDeliveryStatus",ids:i,visitId:n,show:!0,title:"Are you sure?",body:"All generate pdf status update"})},onReport:function(){var e=(0,F.Z)((0,D.Z)().mark((function e(t){var i,n;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:n=e.sent,r.deliveryQueueService.listPatientReports(null===(i=n[0])||void 0===i?void 0:i.labId).then((function(e){if(e.getPatientReports.success){var t=[];null===n||void 0===n||n.filter((function(i){null!==i&&void 0!==i&&i.reportTemplate&&t.push((0,j.Z)((0,j.Z)({},e.getPatientReports.data),{},{patientResult:i}))}));var i=E().uniqBy(n,(function(e){return null===e||void 0===e?void 0:e.reportTemplate})),r=[];i.filter((function(e){var t;r.push(null===e||void 0===e||null===(t=e.reportTemplate)||void 0===t?void 0:t.split(" -")[0])})),(null===r||void 0===r?void 0:r.length)>0&&a.templatePatientResultService.getTempPatientResultListByTempCodes({input:{filter:{reportTemplateList:r}}}).then(function(){var e=(0,F.Z)((0,D.Z)().mark((function e(i){var n;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t.filter((function(e){var t=i.getTempPatientResultListByTempCodes.list.find((function(t){return t.templateCode==e.patientResult.reportTemplate.split(" -")[0]}));return Object.assign(e,{reportSettings:t})})),n=E().groupBy(t,(function(e){return e.patientResult.reportTemplate})),!E().isEmpty(n)){e.next=6;break}return e.abrupt("return",B.FN.error({message:"\ud83d\ude0c Report template not found."}));case 6:v({show:!0,data:n,templateDetails:i.getTempPatientResultListByTempCodes.list});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else alert(e.getPatientReports.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPagination:function(e){var t=r.orderDeliveryPageNo;"next"==e?t=r.orderDeliveryPageNo+1:0==t?t=0:t-=1,r.deliveryQueueService.listDeliveryQueue(t,100),r.updateOrderDeliveryPageNo(t),i.g.filter={mode:"pagination",pageNo:t,limit:100}},onFindDeliveryStatus:function(e){"All"==e?r.deliveryQueueService.listDeliveryQueue():r.deliveryQueueService.findByFields({input:{filter:{deliveryStatus:e}}}).then((function(e){var t,i,n,o;null!==(t=e.findByFieldsDeliveryQueue)&&void 0!==t&&t.success?r.updateReportDeliveryList({deliveryQueues:{data:null===(i=e.findByFieldsDeliveryQueue)||void 0===i?void 0:i.data,paginatorInfo:{count:null===(n=e.findByFieldsDeliveryQueue)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.length}}}):r.updateReportDeliveryList([])}))}})}),[r.reportDeliveryList,m,y,S]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(B._q,{title:(null===(e=o.selectedComponents)||void 0===e?void 0:e.title)||"",store:l}),(0,W.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,W.jsx)("span",{className:"font-bold text-lg underline",children:"Report Delivery"}),M]}),(null===(t=r.orderDeliveredList)||void 0===t?void 0:t.length)>0&&(0,W.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,W.jsx)("span",{className:"font-bold text-lg underline",children:"Order Delivered"}),(0,W.jsx)(X,{data:r.orderDeliveredList||[],totalSize:r.orderDeliveredListCount})]}),(0,W.jsx)(le,(0,j.Z)((0,j.Z)({},c),{},{onClose:function(){v({show:!1})}}))]})}))),se=de}}]);
//# sourceMappingURL=3421.b2a2073e.chunk.js.map