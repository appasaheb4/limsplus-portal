(this.webpackJsonplimsplus_portal=this.webpackJsonplimsplus_portal||[]).push([[9],{853:function(e,t,o){"use strict";o.r(t);var a={};o.r(a),o.d(a,"NoticeBoardsList",(function(){return g}));var n,r,i,c,l,d=o(3),s=o(15),u=o(1),m=o.n(u),f=o(21),p=o(2),b=o(38),g=Object(f.a)((function(e){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:{position:"relative"}},m.a.createElement(p.c.TableBootstrap,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"lab",text:"Labs",sort:!0,filter:p.c.Utils.textFilter(),editorRenderer:function(t,o,a,n,r,i){return m.a.createElement(m.a.Fragment,null,m.a.createElement("select",{name:"variable",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var o=t.target.value;e.onUpdateItem&&e.onUpdateItem(o,n.dataField,a._id)}},m.a.createElement("option",{selected:!0},"Select"),b.a.labStore.listLabs.map((function(e,t){return m.a.createElement("option",{key:t,value:e.code},e.name)}))))}},{dataField:"header",text:"Header",sort:!0,filter:p.c.Utils.textFilter()},{dataField:"message",text:"Message",sort:!0,filter:p.c.Utils.textFilter(),headerStyle:{minWidth:"200px"},editorRenderer:function(t,o,a,n,r,i){return m.a.createElement(m.a.Fragment,null,m.a.createElement(p.a.Form.MultilineInput,{rows:5,name:"message",placeholder:"Message",onBlur:function(t){a.message!==t&&t&&e.onUpdateItem&&e.onUpdateItem(t,n.dataField,a._id)}}))}},{dataField:"action",text:"Action",sort:!0,filter:p.c.Utils.textFilter(),editorRenderer:function(t,o,a,n,r,i){return m.a.createElement(m.a.Fragment,null,m.a.createElement("select",{name:"action",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var o=t.target.value;e.onUpdateItem&&e.onUpdateItem(o,n.dataField,a._id)}},m.a.createElement("option",{selected:!0},"Select"),["login","logout"].map((function(e,t){return m.a.createElement("option",{key:t,value:e},e)}))))}},{dataField:"opration",text:"Action",editable:!1,csvExport:!1,hidden:!e.isDelete,formatter:function(t,o){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"flex flex-row"},m.a.createElement(p.a.Tooltip,{tooltipText:"Delete"},m.a.createElement(p.a.Icons.IconContext,{color:"#000",size:"20",onClick:function(){return e.onDelete&&e.onDelete({type:"Delete",show:!0,id:[o._id],title:"Are you sure?",body:"Delete item"})}},p.a.Icons.getIconTag(p.a.Icons.IconBs.BsFillTrashFill)))))}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Notice_Boards",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,o,a){e.onUpdateItem&&e.onUpdateItem(t,o,a)},onPageSizeChange:function(t,o){e.onPageSizeChange&&e.onPageSizeChange(t,o)}})))})),h=(o(197),o(13)),B=o(14),S=o(34),E=o(9),v=(o(58),o(24)),w=o(6),y=o(11),N=function e(){Object(B.a)(this,e),this.noticeBoardsList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((function(o,a){y.c.get("/settings/noticeBoards/listNoticeBoards/".concat(e,"/").concat(t)).then((function(e){var t=y.a.handleResponse(e);o(t)})).catch((function(e){a(new y.b(0,e.message,void 0))}))}))},this.addNoticeBoard=function(e){return new Promise((function(t,o){y.c.post("/settings/noticeBoards/addNoticeBoards",e).then((function(e){t(e)})).catch((function(e){o({error:e})}))}))},this.deleteNoticeBoards=function(e){return new Promise((function(t,o){y.c.delete("/settings/noticeBoards/deleteNoticeBoards/".concat(e)).then((function(e){t(e)})).catch((function(e){o({error:e})}))}))},this.updateSingleFiled=function(e){return new Promise((function(t,o){y.c.post("/settings/noticeBoards/updateSingleFiled",e).then((function(e){t(e)})).catch((function(e){o({error:e})}))}))}},O={noticeBoardStore:new(Object(v.c)(.1)((r=function(){function e(){Object(B.a)(this,e),Object(h.a)(this,"noticeBoard",i,this),Object(h.a)(this,"noticeBoardList",c,this),Object(h.a)(this,"noticeBoardListCount",l,this),Object(w.makeAutoObservable)(this)}return Object(S.a)(e,[{key:"NoticeBoardService",get:function(){return new N}},{key:"fetchNoticeBoards",value:function(e,t){var o=this;this.NoticeBoardService.noticeBoardsList(e,t).then((function(e){if(!e.success)return alert(e.message);o.noticeBoardList=e.data.noticeBoard,o.noticeBoardListCount=e.data.count}))}},{key:"updateNoticeBoard",value:function(e){this.noticeBoard=e}}]),e}(),i=Object(E.a)(r.prototype,"noticeBoard",[v.b,w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=Object(E.a)(r.prototype,"noticeBoardList",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=Object(E.a)(r.prototype,"noticeBoardListCount",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(E.a)(r.prototype,"NoticeBoardService",[w.computed],Object.getOwnPropertyDescriptor(r.prototype,"NoticeBoardService"),r.prototype),Object(E.a)(r.prototype,"fetchNoticeBoards",[w.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchNoticeBoards"),r.prototype),Object(E.a)(r.prototype,"updateNoticeBoard",[w.action],Object.getOwnPropertyDescriptor(r.prototype,"updateNoticeBoard"),r.prototype),n=r))||n)},j=(m.a.createContext(O.noticeBoardStore),o(5)),F=o(4),I=o(30),C=Object(f.a)((function(){var e,t=Object(F.b)().loginStore,o=Object(j.b)(),n=o.control,r=o.handleSubmit,i=o.formState.errors,c=o.setValue,l=Object(u.useState)(),f=Object(s.a)(l,2),g=f[0],h=f[1];Object(u.useEffect)((function(){F.a.loginStore.login&&"SYSADMIN"!==F.a.loginStore.login.role&&(O.noticeBoardStore.updateNoticeBoard(Object(d.a)(Object(d.a)({},O.noticeBoardStore.noticeBoard),{},{lab:F.a.loginStore.login.lab})),c("lab",F.a.loginStore.login.lab))}),[F.a.loginStore.login]),Object(u.useEffect)((function(){O.noticeBoardStore.fetchNoticeBoards()}),[]);return m.a.createElement(m.a.Fragment,null,m.a.createElement(p.a.Header,null,m.a.createElement(p.a.PageHeading,{title:(null===(e=F.a.routerStore.selectedComponents)||void 0===e?void 0:e.title)||""}),m.a.createElement(p.a.PageHeadingLabDetails,{store:t})),m.a.createElement("div",{className:"p-2 rounded-lg shadow-xl"},m.a.createElement(p.a.Grid,{cols:2},m.a.createElement(p.a.List,{direction:"col",space:4,justify:"stretch",fill:!0},m.a.createElement(j.a,{control:n,render:function(e){var t,o=e.field.onChange;return m.a.createElement(p.a.Form.InputWrapper,{label:"Lab",id:"labs",hasError:i.lab},m.a.createElement("select",{value:null===(t=O.noticeBoardStore.noticeBoard)||void 0===t?void 0:t.lab,disabled:!(!F.a.loginStore.login||"SYSADMIN"===F.a.loginStore.login.role),className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(i.lab?"border-red-500":"border-gray-300"," rounded-md"),onChange:function(e){var t=e.target.value;o(t),O.noticeBoardStore.updateNoticeBoard(Object(d.a)(Object(d.a)({},O.noticeBoardStore.noticeBoard),{},{lab:t}))}},m.a.createElement("option",{selected:!0},"Select"),b.a.labStore.listLabs.map((function(e,t){return m.a.createElement("option",{key:t,value:e.code},e.name)}))))},name:"lab",rules:{required:!0},defaultValue:""}),m.a.createElement(j.a,{control:n,render:function(e){var t=e.field.onChange;return m.a.createElement(p.a.Form.Input,{label:"Header",name:"lblHeader",placeholder:i.header?"Please Enter Header":"Header",hasError:i.header,onChange:function(e){t(e),O.noticeBoardStore.updateNoticeBoard(Object(d.a)(Object(d.a)({},O.noticeBoardStore.noticeBoard),{},{header:e}))}})},name:"header",rules:{required:!0},defaultValue:""}),m.a.createElement(j.a,{control:n,render:function(e){var t=e.field.onChange;return m.a.createElement(p.a.Form.InputWrapper,{label:"Action",id:"lblAction",hasError:i.action},m.a.createElement("select",{name:"action",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(i.action?"border-red-500":"border-gray-300"," rounded-md"),onChange:function(e){var o=e.target.value;t(o),O.noticeBoardStore.updateNoticeBoard(Object(d.a)(Object(d.a)({},O.noticeBoardStore.noticeBoard),{},{action:o}))}},m.a.createElement("option",{selected:!0},"Select"),["login","logout"].map((function(e,t){return m.a.createElement("option",{key:t,value:e},e)}))))},name:"action",rules:{required:!0},defaultValue:""})),m.a.createElement(p.a.List,{direction:"col",space:4,justify:"stretch",fill:!0},m.a.createElement(j.a,{control:n,render:function(e){var t=e.field.onChange;return m.a.createElement(p.a.Form.MultilineInput,{rows:7,label:"Message",name:"lblMessage",hasError:i.message,placeholder:i.message?"Please Enter Message":"Message",onChange:function(e){t(e),O.noticeBoardStore.updateNoticeBoard(Object(d.a)(Object(d.a)({},O.noticeBoardStore.noticeBoard),{},{message:e}))}})},name:"message",rules:{required:!1},defaultValue:""}))),m.a.createElement("br",null),m.a.createElement(p.a.List,{direction:"row",space:3,align:"center"},m.a.createElement(p.a.Buttons.Button,{size:"medium",type:"solid",icon:p.a.Icon.Save,onClick:r((function(){O.noticeBoardStore.NoticeBoardService.addNoticeBoard(O.noticeBoardStore.noticeBoard).then((function(e){201===e.status?(p.a.Toast.success({message:"\ud83d\ude0a Notice created."}),setTimeout((function(){window.location.reload()}),2e3)):p.a.Toast.warning({message:"\ud83d\ude14 Notice not create.Please try again"})}))}))},"Save"),m.a.createElement(p.a.Buttons.Button,{size:"medium",type:"outline",icon:p.a.Icon.Remove,onClick:function(){window.location.reload()}},"Clear"))),m.a.createElement("br",null),m.a.createElement("div",{className:"p-2 rounded-lg shadow-xl overflow-scroll",style:{overflowX:"scroll"}},m.a.createElement(a.NoticeBoardsList,{data:O.noticeBoardStore.noticeBoardList,totalSize:O.noticeBoardStore.noticeBoardListCount,isDelete:I.a.checkPermission(Object(w.toJS)(F.a.routerStore.userPermission),"Delete"),isEditModify:I.a.checkPermission(Object(w.toJS)(F.a.routerStore.userPermission),"Edit/Modify"),onDelete:function(e){return h(e)},onSelectedRow:function(e){h({show:!0,type:"Delete",id:e,title:"Are you sure?",body:"Delete selected items!"})},onUpdateItem:function(e,t,o){h({show:!0,type:"Update",data:{value:e,dataField:t,id:o},title:"Are you sure?",body:"Update recoard!"})},onPageSizeChange:function(e,t){O.noticeBoardStore.fetchNoticeBoards(e,t)}})),m.a.createElement(p.b.ModalConfirm,Object.assign({},g,{click:function(e){"Delete"===e?O.noticeBoardStore.NoticeBoardService.deleteNoticeBoards(g.id).then((function(e){console.log({res:e}),200===e.status&&(p.a.Toast.success({message:"\ud83d\ude0aItems deleted."}),h({show:!1}),setTimeout((function(){window.location.reload()}),2e3))})):"Update"===e&&O.noticeBoardStore.NoticeBoardService.updateSingleFiled(g.data).then((function(e){200===e.status&&(p.a.Toast.success({message:"Item updated."}),h({show:!1}),setTimeout((function(){window.location.reload()}),1e3))}))},onClose:function(){return h({show:!1})}})))}));t.default=C}}]);