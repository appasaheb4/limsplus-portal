"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[5031],{25031:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var o,r,i,a,l,d,s,c=n(4942),u=n(74165),f=n(15861),m=n(1413),v=n(29439),g=n(72791),h=n(71672),p=n(93960),x=n(28337),b=n(80184),S=(0,h.Pi)((function(e){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{style:{position:"relative"},children:(0,b.jsx)(p.tM,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"lab",text:"Labs",headerClasses:"textHeader2",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,p.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,p.DN)({getFilter:function(e){o=e}}),editorRenderer:function(t,n,o,r,i,a){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(y,{onSelect:function(t){e.onUpdateItem&&e.onUpdateItem(t.code,r.dataField,o._id)}})})}},{dataField:"header",text:"Header",headerClasses:"textHeader1",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,p.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,p.DN)({getFilter:function(e){r=e}})},{dataField:"message",text:"Message",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,p.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,p.DN)({getFilter:function(e){i=e}}),headerClasses:"textHeader2",editorRenderer:function(t,n,o,r,i,a){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(p.l0.$l,{rows:5,name:"message",placeholder:"Message",onBlur:function(t){o.message!==t&&t&&e.onUpdateItem&&e.onUpdateItem(t,r.dataField,o._id)}})})}},{dataField:"status",text:"Status",headerClasses:"textHeader2",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,p.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,p.DN)({getFilter:function(e){l=e}}),editable:function(e,t,n,o){return"D"!=t.status&&"I"!=t.status},editorRenderer:function(t,n,o,r,i,a){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("select",{className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var n=t.target.value;e.onUpdateItem&&e.onUpdateItem(n,r.dataField,o._id)},children:[(0,b.jsx)("option",{selected:!0,children:"Select"}),(0,x.fc)(e.extraData.lookupItems,"STATUS").filter((function(e){return"D"!=e.code})).map((function(e,t){return(0,b.jsx)("option",{value:e.code,children:(0,x.w9)(e)},t)}))]})})}},{dataField:"environment",text:"Environment",headerClasses:"textHeader4",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,p.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,p.DN)({getFilter:function(e){d=e}}),editorRenderer:function(t,n,o,r,i,a){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("select",{value:o.environment,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var n=t.target.value;e.onUpdateItem&&e.onUpdateItem(n,r.dataField,o._id)},children:[(0,b.jsx)("option",{selected:!0,children:"Select"}),(0,x.fc)(e.extraData.lookupItems,"ENVIRONMENT").map((function(e,t){return(0,b.jsx)("option",{value:e.code,children:(0,x.w9)(e)},t)}))]})})}},{dataField:"action",text:"Action",headerClasses:"textHeader2",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,p.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,p.DN)({getFilter:function(e){a=e}}),editorRenderer:function(t,n,o,r,i,a){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("select",{name:"action",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var n=t.target.value;e.onUpdateItem&&e.onUpdateItem(n,r.dataField,o._id)},children:[(0,b.jsx)("option",{selected:!0,children:"Select"}),["login","logout"].map((function(e,t){return(0,b.jsx)("option",{value:e,children:e},t)}))]})})}},{dataField:"opration",text:"Action",editable:!1,csvExport:!1,hidden:!e.isDelete,formatter:function(t,n){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"flex flex-row",children:[(0,b.jsx)(p.u,{tooltipText:"Delete",children:(0,b.jsx)(p.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onDelete&&e.onDelete({type:"Delete",show:!0,id:[n._id],title:"Are you sure?",body:"Delete item"})},children:p.PJ.getIconTag(p.PJ.IconBs.BsFillTrashFill)})}),"D"==n.status&&(0,b.jsx)(p.u,{tooltipText:"Approval",children:(0,b.jsx)(p.PJ.RIcon,{nameIcon:"AiOutlineCheckCircle",propsIcon:{size:24,color:"#ffffff"},onClick:function(){return e.onApproval(n)}})})]})})},headerClasses:"sticky right-0  bg-gray-500 text-white z-50",classes:function(e,t,n,o){return"sticky right-0 bg-gray-500"},style:function(t,n,o,r){var i;return{zIndex:(null===(i=e.data)||void 0===i?void 0:i.length)-o}}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Notice_Boards",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,n,o){e.onUpdateItem&&e.onUpdateItem(t,n,o)},onPageSizeChange:function(t,n){e.onPageSizeChange&&e.onPageSizeChange(t,n)},onFilter:function(t,n,o,r){e.onFilter&&e.onFilter(t,n,o,r)},clearAllFilter:function(){o(""),i(""),a(""),r(""),l(""),d("")},dynamicStylingFields:["lab","header","action"],hideExcelSheet:["opration","_id"]})})})})),j=n(24849),N=n(22414),y=(0,h.Pi)((function(e){var t,n=e.onSelect,o=(0,N.mZ)(),r=o.loading,i=o.labStore,a=(0,g.useState)(""),l=(0,v.Z)(a,2),d=l[0],s=l[1],c=(0,g.useState)(),u=(0,v.Z)(c,2),f=u[0],m=u[1],h=(0,g.useState)(!1),x=(0,v.Z)(h,2),S=x[0],y=x[1],F=(0,g.useRef)(null);t=F,(0,g.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&S&&(y(!1),s(""))}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,S]),(0,g.useEffect)((function(){m(i.listLabs)}),[i.listLabs]);var w=function(e){i.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{ref:F,children:[(0,b.jsxs)("div",{className:"flex items-center leading-4 p-2 focus:outline-none focus:ring  w-full shadow-sm sm:text-base border-2  rounded-md",children:[(0,b.jsx)("input",{placeholder:"Search by name",value:d,className:"w-full focus:outline-none bg-none",onKeyUp:function(e){if(8===(e.which?e.which:e.keyCode)){var t=e.target.value;w(t)}},onChange:function(e){var t=e.target.value;s(t),w(t)},onClick:function(){return y(!0)}}),r&&(0,b.jsx)(j.Z,{animation:"border",className:"mr-2 h-4 w-4"}),S?(0,b.jsx)(p.PJ.IconFa.FaChevronUp,{}):(0,b.jsx)(p.PJ.IconFa.FaChevronDown,{})]}),f&&S?f.length>0&&(0,b.jsx)("div",{className:"mt-1 absolute bg-gray-100 p-2 rounded-sm z-50",children:(0,b.jsx)("ul",{children:null===f||void 0===f?void 0:f.map((function(e,t){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("li",{className:"text-gray-400 flex items-center",onClick:function(){s(e.name),y(!1),i.updateLabList(i.listLabsCopy),n(e)},children:[" ",(0,b.jsxs)("label",{className:"ml-2 mt-1 text-black",children:[" ",e.name]})]},t)})}))})}):null]})})})),F=(n(70042),n(61134)),w=n(763),B=n.n(w),C=n(10621),Z=n(84098),I=n(65028),k=(n(58484),s=(0,h.Pi)((function(){var e,t=(0,N.mZ)(),o=t.loginStore,r=t.labStore,i=t.noticeBoardStore,a=t.routerStore,l=t.loading,d=(0,F.cI)(),s=d.control,h=d.handleSubmit,j=d.formState.errors,y=d.setValue,w=d.reset,k=(0,g.useState)(),E=(0,v.Z)(k,2),D=E[0],P=E[1],U=(0,g.useState)(!1),z=(0,v.Z)(U,2),A=z[0],L=z[1],M=(0,g.useState)([]),R=(0,v.Z)(M,2),_=R[0];R[1],(0,g.useEffect)((function(){var e,t;y("lab",o.login.lab),y("status",null===(e=i.noticeBoard)||void 0===e?void 0:e.status),y("environment",null===(t=i.noticeBoard)||void 0===t?void 0:t.environment)}),[o.login]);var T=(0,g.useMemo)((function(){return(0,b.jsx)(S,{data:i.noticeBoardList||[],totalSize:i.noticeBoardListCount,extraData:{listLabs:r.listLabs},isDelete:C.o.checkPermission((0,Z.ZN)(a.userPermission),"Delete"),isEditModify:C.o.checkPermission((0,Z.ZN)(a.userPermission),"Edit/Modify"),onDelete:function(e){return P(e)},onSelectedRow:function(e){P({show:!0,type:"Delete",id:e,title:"Are you sure?",body:"Delete selected items!"})},onUpdateItem:function(e,t,n){P({show:!0,type:"Update",data:{value:e,dataField:t,id:n},title:"Are you sure?",body:"Update recoard!"})},onPageSizeChange:function(e,t){i.fetchNoticeBoards(e,t),n.g.filter={mode:"pagination",page:e,limit:t}},onFilter:function(e,t,o,r){i.NoticeBoardService.filter({input:{type:e,filter:t,page:o,limit:r}}),n.g.filter={mode:"filter",type:e,filter:t,page:o,limit:r}},onApproval:function(){var e=(0,f.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:e.sent||P({show:!0,type:"Update",data:{value:"A",dataField:"status",id:t._id},title:"Are you sure?",body:"Update deginisation!"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),[i.noticeBoardList]),V=function(){var e=(0,f.Z)((0,u.Z)().mark((function e(){var t,n,o,r,a,l=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:i.noticeBoard,n=l.length>1&&void 0!==l[1]?l[1]:0,o=l.length>2&&void 0!==l[2]?l[2]:"A",!(a=(r=["lab","header","action","environment","status"]).find((function(e){if(B().isEmpty((0,m.Z)((0,m.Z)({},t),{},{status:o})[e]))return e})))){e.next=8;break}return p.FN.error({message:"\ud83d\ude14 Required ".concat(a," value missing. Please enter correct value")}),e.abrupt("return",!0);case 8:return e.abrupt("return",i.NoticeBoardService.findByFields({input:{filter:(0,m.Z)({},B().pick((0,m.Z)((0,m.Z)({},t),{},{status:o}),r))}}).then((function(e){var t,o;return!!(null!==(t=e.findByFieldsNoticeBoard)&&void 0!==t&&t.success&&(null===(o=e.findByFieldsNoticeBoard.data)||void 0===o?void 0:o.length)>n)&&(p.FN.error({message:"\ud83d\ude14 Already some record exists."}),!0)})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(p.h4,{children:[(0,b.jsx)(p.CD,{title:(null===(e=a.selectedComponents)||void 0===e?void 0:e.title)||""}),(0,b.jsx)(p.Nd,{store:o})]}),(0,b.jsxs)("div",{className:"p-2 rounded-lg shadow-xl",children:[(0,b.jsxs)(p.rj,{cols:2,children:[(0,b.jsxs)(p.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[r.listLabs&&(0,b.jsx)(F.Qr,{control:s,render:function(e){var t=e.field,n=t.onChange;return t.value,(0,b.jsx)(p.l0.SP,{label:"Lab",id:"labs",hasError:!!j.lab,children:(0,b.jsx)(p.T3,{loader:l,placeholder:"Search by name",disable:!(!o.login||"SYSADMIN"===o.login.role),data:{list:r.listLabs,displayKey:"name",findKey:"name"},hasError:!!j.name,onFilter:function(e){r.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})},onSelect:function(e){n(e.name),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{lab:e.code})),r.updateLabList(r.listLabsCopy)}})})},name:"lab",rules:{required:!0},defaultValue:""}),(0,b.jsx)(F.Qr,{control:s,render:function(e){var t=e.field,n=t.onChange,o=t.value;return(0,b.jsx)(p.l0.II,{label:"Header",name:"lblHeader",placeholder:j.header?"Please Enter Header":"Header",hasError:!!j.header,value:o,onChange:function(e){n(e),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{header:e}))}})},name:"header",rules:{required:!0},defaultValue:""}),(0,b.jsx)(F.Qr,{control:s,render:function(e){var t=e.field,n=t.onChange,o=t.value;return(0,b.jsx)(p.l0.SP,{label:"Action",id:"lblAction",hasError:!!j.action,children:(0,b.jsxs)("select",{name:"action",value:o,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(j.action?"border-red":"border-gray-300"," rounded-md"),onChange:function(e){var t=e.target.value;n(t),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{action:t}))},children:[(0,b.jsx)("option",{selected:!0,children:"Select"}),["login","logout"].map((function(e,t){return(0,b.jsx)("option",{value:e,children:e},t)}))]})})},name:"action",rules:{required:!0},defaultValue:""}),(0,b.jsx)(F.Qr,{control:s,render:function(e){var t,n=e.field,r=n.onChange,l=n.value;return(0,b.jsx)(p.l0.SP,{label:"Environment",hasError:!!j.environment,children:(0,b.jsxs)("select",{value:l,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(j.environment?"border-red  ":"border-gray-300"," rounded-md"),disabled:!(!o.login||"SYSADMIN"===o.login.role),onChange:function(e){var t=e.target.value;r(t),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{environment:t}))},children:[(0,b.jsx)("option",{selected:!0,children:o.login&&"SYSADMIN"!==o.login.role?"Select":(null===(t=i.noticeBoard)||void 0===t?void 0:t.environment)||"Select"}),(0,x.fc)(a.lookupItems,"ENVIRONMENT").map((function(e,t){return(0,b.jsx)("option",{value:e.code,children:(0,x.w9)(e)},t)}))]})})},name:"environment",rules:{required:!0},defaultValue:""}),(0,b.jsx)(F.Qr,{control:s,render:function(e){var t=e.field,n=t.onChange,o=t.value;return(0,b.jsx)(p.l0.SP,{label:"Status",hasError:!!j.status,children:(0,b.jsxs)("select",{value:o,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(j.status?"border-red  ":"border-gray-300"," rounded-md"),onChange:function(e){var t=e.target.value;n(t),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{status:t}))},children:[(0,b.jsx)("option",{selected:!0,children:"Select"}),(0,x.fc)(a.lookupItems,"STATUS").map((function(e,t){return(0,b.jsx)("option",{value:e.code,children:(0,x.w9)(e)},t)}))]})})},name:"status",rules:{required:!1},defaultValue:""})]}),(0,b.jsx)(p.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:(0,b.jsx)(F.Qr,{control:s,render:function(e){var t=e.field,n=t.onChange,o=t.value;return(0,b.jsx)(p.l0.$l,{rows:7,label:"Message",name:"lblMessage",hasError:!!j.message,placeholder:j.message?"Please Enter Message":"Message",value:o,onChange:function(e){n(e),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{message:e}))}})},name:"message",rules:{required:!1},defaultValue:""})})]}),(0,b.jsx)("br",{}),(0,b.jsxs)(p.aV,{direction:"row",space:3,align:"center",children:[(0,b.jsx)(p.EK.zx,{size:"medium",type:"solid",icon:p.ny.vc,onClick:h((function(){i.NoticeBoardService.addNoticeBoard({input:A?{isImport:A,arrImportRecords:_}:(0,m.Z)({isImport:A},i.noticeBoard)}).then((function(e){e.createNoticeBoard.success?(p.FN.success({message:"\ud83d\ude0a ".concat(e.createNoticeBoard.message)}),w(),I.TB.emit("reload",{}),L(!1)):p.FN.warning({message:"\ud83d\ude14 Notice not create.Please try again"})}))})),children:"Save"}),(0,b.jsx)(p.EK.zx,{size:"medium",type:"outline",icon:p.ny.JW,onClick:function(){window.location.reload()},children:"Clear"})]})]}),(0,b.jsx)("div",{className:"p-2 rounded-lg shadow-xl overflow-scroll",style:{overflowX:"scroll"},children:T}),(0,b.jsx)(p.WZ,(0,m.Z)((0,m.Z)({},D),{},{click:function(e){"Delete"===e?i.NoticeBoardService.deleteNoticeBoards({input:{id:D.id}}).then((function(e){var t,o,r,a,l,d,s,c,u,f,m,v,g,h,x,b;e.removeNoticeBoard.success&&(P({show:!1}),p.FN.success({message:"\ud83d\ude0a ".concat(e.removeNoticeBoard.message)}),"pagination"==(null===(t=n.g)||void 0===t||null===(o=t.filter)||void 0===o?void 0:o.mode)?i.fetchNoticeBoards(null===(r=n.g)||void 0===r||null===(a=r.filter)||void 0===a?void 0:a.page,null===(l=n.g)||void 0===l||null===(d=l.filter)||void 0===d?void 0:d.limit):"filter"==(null===(s=n.g)||void 0===s||null===(c=s.filter)||void 0===c?void 0:c.mode)?i.NoticeBoardService.filter({input:{type:null===(u=n.g)||void 0===u||null===(f=u.filter)||void 0===f?void 0:f.type,filter:null===(m=n.g)||void 0===m||null===(v=m.filter)||void 0===v?void 0:v.filter,page:null===(g=n.g)||void 0===g||null===(h=g.filter)||void 0===h?void 0:h.page,limit:null===(x=n.g)||void 0===x||null===(b=x.filter)||void 0===b?void 0:b.limit}}):i.fetchNoticeBoards())})):"Update"===e&&i.NoticeBoardService.updateSingleFiled({input:(0,c.Z)({_id:D.data.id},D.data.dataField,D.data.value)}).then((function(e){var t,o,r,a,l,d,s,c,u,f,m,v,g,h,x,b;P({show:!1}),e.updateNoticeBoard.success&&(p.FN.success({message:"\ud83d\ude0a ".concat(e.updateNoticeBoard.message)}),"pagination"==(null===(t=n.g)||void 0===t||null===(o=t.filter)||void 0===o?void 0:o.mode)?i.fetchNoticeBoards(null===(r=n.g)||void 0===r||null===(a=r.filter)||void 0===a?void 0:a.page,null===(l=n.g)||void 0===l||null===(d=l.filter)||void 0===d?void 0:d.limit):"filter"==(null===(s=n.g)||void 0===s||null===(c=s.filter)||void 0===c?void 0:c.mode)?i.NoticeBoardService.filter({input:{type:null===(u=n.g)||void 0===u||null===(f=u.filter)||void 0===f?void 0:f.type,filter:null===(m=n.g)||void 0===m||null===(v=m.filter)||void 0===v?void 0:v.filter,page:null===(g=n.g)||void 0===g||null===(h=g.filter)||void 0===h?void 0:h.page,limit:null===(x=n.g)||void 0===x||null===(b=x.filter)||void 0===b?void 0:b.limit}}):i.fetchNoticeBoards())}))},onClose:function(){return P({show:!1})}}))]})})),(0,h.Pi)((function(e){var t=(0,N.mZ)(),n=t.loginStore,o=t.noticeBoardStore;return(0,g.useEffect)((function(){n.login&&"SYSADMIN"!==n.login.role&&o.updateNoticeBoard((0,m.Z)((0,m.Z)({},o.noticeBoard),{},{lab:n.login.lab})),o.fetchNoticeBoards()}),[n.login]),(0,b.jsx)(s,(0,m.Z)({},e))}))),E=k}}]);
//# sourceMappingURL=5031.1d6f04cd.chunk.js.map