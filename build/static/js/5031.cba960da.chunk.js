"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[5031],{25031:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var o,r,i,a,l,s,d,c,u=n(4942),f=n(74165),m=n(15861),h=n(1413),v=n(29439),g=n(72791),p=n(71672),x=n(10879),b=n(28337),S=n(80184),y=(0,p.Pi)((function(e){var t=function(e){return"I"!==e.status};return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:"".concat(e.isView?"shown":"hidden"),children:(0,S.jsx)(x.tM,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"lab",text:"Labs",headerClasses:"textHeader2",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){o=e}}),editable:function(e,n,o,r){return t(n)},editorRenderer:function(t,n,o,r,i,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(N,{onSelect:function(t){e.onUpdateItem&&e.onUpdateItem(t.code,r.dataField,o._id)}})})}},{dataField:"header",text:"Header",headerClasses:"textHeader1",sort:!0,headerStyle:{fontSize:0},editable:function(e,n,o,r){return t(n)},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){r=e}})},{dataField:"message",text:"Message",sort:!0,headerStyle:{fontSize:0},editable:function(e,n,o,r){return t(n)},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){i=e}}),headerClasses:"textHeader2",editorRenderer:function(t,n,o,r,i,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(x.l0.$l,{rows:5,name:"message",placeholder:"Message",onBlur:function(t){o.message!==t&&t&&e.onUpdateItem&&e.onUpdateItem(t,r.dataField,o._id)}})})}},{dataField:"status",text:"Status",headerClasses:"textHeader2",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){l=e}}),editable:function(e,t,n,o){return"D"!=t.status&&"I"!=t.status},editorRenderer:function(t,n,o,r,i,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("select",{className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var n=t.target.value;e.onUpdateItem&&e.onUpdateItem(n,r.dataField,o._id)},children:[(0,S.jsx)("option",{selected:!0,children:"Select"}),(0,b.fc)(e.extraData.lookupItems,"STATUS").filter((function(e){return"D"!=e.code})).map((function(e,t){return(0,S.jsx)("option",{value:e.code,children:(0,b.w9)(e)},t)}))]})})}},{dataField:"action",text:"Action",headerClasses:"textHeader2",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){a=e}}),editorRenderer:function(t,n,o,r,i,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("select",{name:"action",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var n=t.target.value;e.onUpdateItem&&e.onUpdateItem(n,r.dataField,o._id)},children:[(0,S.jsx)("option",{selected:!0,children:"Select"}),["login","logout"].map((function(e,t){return(0,S.jsx)("option",{value:e,children:e},t)}))]})})}},{text:"Company Code",dataField:"companyCode",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,x.t$)(e,t)},editable:!1,csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){d=e}}),headerClasses:"textHeader2"},{dataField:"environment",text:"Environment",headerClasses:"textHeader4",sort:!0,headerStyle:{fontSize:0},editable:!1,sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){s=e}})},{dataField:"operation",text:"Action",editable:!1,csvExport:!1,formatter:function(t,n){return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"flex flex-row",children:[e.isDelete&&(0,S.jsx)(x.u,{tooltipText:"Delete",children:(0,S.jsx)(x.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onDelete&&e.onDelete({type:"Delete",show:!0,id:[n._id],title:"Are you sure?",body:"Do you want to delete this record?"})},children:x.PJ.getIconTag(x.PJ.IconBs.BsFillTrashFill)})}),"D"==n.status&&(0,S.jsx)(x.u,{tooltipText:"Approval",children:(0,S.jsx)(x.PJ.RIcon,{nameIcon:"AiOutlineCheckCircle",propsIcon:{size:24,color:"#ffffff"},onClick:function(){return e.onApproval(n)}})})]})})},headerClasses:"sticky right-0  bg-gray-500 text-white z-50",classes:function(e,t,n,o){return"sticky right-0 bg-gray-500"},style:function(t,n,o,r){var i;return{zIndex:(null===(i=e.data)||void 0===i?void 0:i.length)-o}}}],isDelete:e.isDelete,isEditModify:e.isUpdate,isExport:e.isExport,isSelectRow:!0,fileName:"Notice_Boards",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,n,o){e.onUpdateItem&&e.onUpdateItem(t,n,o)},onPageSizeChange:function(t,n){e.onPageSizeChange&&e.onPageSizeChange(t,n)},onFilter:function(t,n,o,r){e.onFilter&&e.onFilter(t,n,o,r)},clearAllFilter:function(){o(""),i(""),a(""),r(""),l(""),s(""),d("")},dynamicStylingFields:["lab","header","action"],hideExcelSheet:["opration","_id"]})})})})),j=n(24849),F=n(22414),N=(0,p.Pi)((function(e){var t,n=e.onSelect,o=(0,F.mZ)(),r=o.loading,i=o.labStore,a=(0,g.useState)(""),l=(0,v.Z)(a,2),s=l[0],d=l[1],c=(0,g.useState)(),u=(0,v.Z)(c,2),f=u[0],m=u[1],h=(0,g.useState)(!1),p=(0,v.Z)(h,2),b=p[0],y=p[1],N=(0,g.useRef)(null);t=N,(0,g.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&b&&(y(!1),d(""))}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,b]),(0,g.useEffect)((function(){m(i.listLabs)}),[i.listLabs]);var w=function(e){i.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})};return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{ref:N,children:[(0,S.jsxs)("div",{className:"flex items-center leading-4 p-2 focus:outline-none focus:ring  w-full shadow-sm sm:text-base border-2  rounded-md",children:[(0,S.jsx)("input",{placeholder:"Search by name",value:s,className:"w-full focus:outline-none bg-none",onKeyUp:function(e){if(8===(e.which?e.which:e.keyCode)){var t=e.target.value;w(t)}},onChange:function(e){var t=e.target.value;d(t),w(t)},onClick:function(){return y(!0)}}),r&&(0,S.jsx)(j.Z,{animation:"border",className:"mr-2 h-4 w-4"}),b?(0,S.jsx)(x.PJ.IconFa.FaChevronUp,{}):(0,S.jsx)(x.PJ.IconFa.FaChevronDown,{})]}),f&&b?f.length>0&&(0,S.jsx)("div",{className:"mt-1 absolute bg-gray-100 p-2 rounded-sm z-50",children:(0,S.jsx)("ul",{children:null===f||void 0===f?void 0:f.map((function(e,t){return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("li",{className:"text-gray-400 flex items-center",onClick:function(){d(e.name),y(!1),i.updateLabList(i.listLabsCopy),n(e)},children:[" ",(0,S.jsxs)("label",{className:"ml-2 mt-1 text-black",children:[" ",e.name]})]},t)})}))})}):null]})})})),w=(n(70042),n(61134)),C=n(763),B=n.n(C),Z=n(10621),k=n(65028),I=(n(58484),c=(0,p.Pi)((function(){var e,t=(0,F.mZ)(),o=t.loginStore,r=t.labStore,i=t.noticeBoardStore,a=t.routerStore,l=t.loading,s=(0,w.cI)(),d=s.control,c=s.handleSubmit,p=s.formState.errors,j=s.setValue,N=s.reset,C=(0,g.useState)(),I=(0,v.Z)(C,2),D=I[0],P=I[1],E=(0,g.useState)(!0),z=(0,v.Z)(E,2),U=z[0],A=z[1],L=(0,g.useState)(!1),_=(0,v.Z)(L,2),H=(_[0],_[1]),R=(0,g.useState)([]),T=(0,v.Z)(R,2);T[0],T[1],(0,g.useEffect)((function(){var e;j("lab",o.login.lab),j("status",null===(e=i.noticeBoard)||void 0===e?void 0:e.status)}),[o.login,i.noticeBoard]);var V=(0,g.useMemo)((function(){return(0,S.jsx)(y,{data:i.noticeBoardList||[],totalSize:i.noticeBoardListCount,extraData:{listLabs:r.listLabs},isView:Z.o.checkPermission(a.userPermission,"View"),isDelete:Z.o.checkPermission(a.userPermission,"Delete"),isUpdate:Z.o.checkPermission(a.userPermission,"Update"),isExport:Z.o.checkPermission(a.userPermission,"Export"),onDelete:function(e){return P(e)},onSelectedRow:function(e){P({show:!0,type:"Delete",id:e,title:"Are you sure?",body:"Do you want to delete selected record?"})},onUpdateItem:function(e,t,n){P({show:!0,type:"Update",data:{value:e,dataField:t,id:n},title:"Are you sure?",body:"Do you want to update this record?"})},onPageSizeChange:function(e,t){i.fetchNoticeBoards(e,t),n.g.filter={mode:"pagination",page:e,limit:t}},onFilter:function(e,t,o,r){i.NoticeBoardService.filter({input:{type:e,filter:t,page:o,limit:r}}),n.g.filter={mode:"filter",type:e,filter:t,page:o,limit:r}},onApproval:function(){var e=(0,m.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:e.sent||P({show:!0,type:"Update",data:{value:"A",dataField:"status",id:t._id},title:"Are you sure?",body:"Do you want to update this record?"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),[i.noticeBoardList]),M=function(){var e=(0,m.Z)((0,f.Z)().mark((function e(){var t,n,o,r,a,l=arguments;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:i.noticeBoard,n=l.length>1&&void 0!==l[1]?l[1]:0,o=l.length>2&&void 0!==l[2]?l[2]:"A",!(a=(r=["lab","header","action","environment","status"]).find((function(e){if(B().isEmpty((0,h.Z)((0,h.Z)({},t),{},{status:o})[e]))return e})))){e.next=8;break}return x.FN.error({message:"\ud83d\ude14 Required ".concat(a," value missing. Please enter correct value")}),e.abrupt("return",!0);case 8:return e.abrupt("return",i.NoticeBoardService.findByFields({input:{filter:(0,h.Z)({},B().pick((0,h.Z)((0,h.Z)({},t),{},{status:o}),r))}}).then((function(e){var t,o;return!!(null!==(t=e.findByFieldsNoticeBoard)&&void 0!==t&&t.success&&(null===(o=e.findByFieldsNoticeBoard.data)||void 0===o?void 0:o.length)>n)&&(x.FN.error({message:"\ud83d\ude14 Already some record exists."}),!0)})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x._q,{title:(null===(e=a.selectedComponents)||void 0===e?void 0:e.title)||"",store:o}),Z.o.checkPermission(a.userPermission,"Add")&&(0,S.jsx)(x.EK.Kn,{show:U,onClick:function(){return A(!U)}}),(0,S.jsxs)("div",{className:"p-2 rounded-lg shadow-xl "+(U?"hidden":"shown"),children:[(0,S.jsxs)(x.rj,{cols:2,children:[(0,S.jsxs)(x.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[r.listLabs&&(0,S.jsx)(w.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange;return t.value,(0,S.jsx)(x.l0.SP,{label:"Lab",id:"labs",hasError:!!p.lab,children:(0,S.jsx)(x.T3,{loader:l,placeholder:"Search by name",disable:!(!o.login||"SYSADMIN"===o.login.role),data:{list:r.listLabs,displayKey:"name",findKey:"name"},hasError:!!p.name,onFilter:function(e){r.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})},onSelect:function(e){n(e.name),i.updateNoticeBoard((0,h.Z)((0,h.Z)({},i.noticeBoard),{},{lab:e.code})),r.updateLabList(r.listLabsCopy)}})})},name:"lab",rules:{required:!0},defaultValue:""}),(0,S.jsx)(w.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange,o=t.value;return(0,S.jsx)(x.l0.II,{label:"Header",name:"lblHeader",placeholder:p.header?"Please Enter Header":"Header",hasError:!!p.header,value:o,onChange:function(e){n(e),i.updateNoticeBoard((0,h.Z)((0,h.Z)({},i.noticeBoard),{},{header:e}))}})},name:"header",rules:{required:!0},defaultValue:""}),(0,S.jsx)(w.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange,o=t.value;return(0,S.jsx)(x.l0.SP,{label:"Action",id:"lblAction",hasError:!!p.action,children:(0,S.jsxs)("select",{name:"action",value:o,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(p.action?"border-red":"border-gray-300"," rounded-md"),onChange:function(e){var t=e.target.value;n(t),i.updateNoticeBoard((0,h.Z)((0,h.Z)({},i.noticeBoard),{},{action:t}))},children:[(0,S.jsx)("option",{selected:!0,children:"Select"}),["login","logout"].map((function(e,t){return(0,S.jsx)("option",{value:e,children:e},t)}))]})})},name:"action",rules:{required:!0},defaultValue:""}),(0,S.jsx)(w.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange,o=t.value;return(0,S.jsx)(x.l0.SP,{label:"Status",hasError:!!p.status,children:(0,S.jsxs)("select",{value:o,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(p.status?"border-red  ":"border-gray-300"," rounded-md"),onChange:function(e){var t=e.target.value;n(t),i.updateNoticeBoard((0,h.Z)((0,h.Z)({},i.noticeBoard),{},{status:t}))},children:[(0,S.jsx)("option",{selected:!0,children:"Select"}),(0,b.fc)(a.lookupItems,"STATUS").map((function(e,t){return(0,S.jsx)("option",{value:e.code,children:(0,b.w9)(e)},t)}))]})})},name:"status",rules:{required:!1},defaultValue:""})]}),(0,S.jsx)(x.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:(0,S.jsx)(w.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange,o=t.value;return(0,S.jsx)(x.l0.$l,{rows:7,label:"Message",name:"lblMessage",hasError:!!p.message,placeholder:p.message?"Please Enter Message":"Message",value:o,onChange:function(e){n(e),i.updateNoticeBoard((0,h.Z)((0,h.Z)({},i.noticeBoard),{},{message:e}))}})},name:"message",rules:{required:!1},defaultValue:""})})]}),(0,S.jsx)("br",{}),(0,S.jsxs)(x.aV,{direction:"row",space:3,align:"center",children:[(0,S.jsx)(x.EK.zx,{size:"medium",type:"solid",icon:x.ny.vc,onClick:c((function(){i.NoticeBoardService.addNoticeBoard({input:(0,h.Z)({},i.noticeBoard)}).then((function(e){e.createNoticeBoard.success?(x.FN.success({message:"\ud83d\ude0a ".concat(e.createNoticeBoard.message)}),N(),k.TB.emit("reload",{}),H(!1)):x.FN.warning({message:"\ud83d\ude14 Notice not create.Please try again"})}))})),children:"Save"}),(0,S.jsx)(x.EK.zx,{size:"medium",type:"outline",icon:x.ny.JW,onClick:function(){window.location.reload()},children:"Clear"})]})]}),(0,S.jsx)("div",{className:"p-2 rounded-lg shadow-xl overflow-scroll",style:{overflowX:"scroll"},children:V}),(0,S.jsx)(x.WZ,(0,h.Z)((0,h.Z)({},D),{},{click:function(e){"Delete"===e?i.NoticeBoardService.deleteNoticeBoards({input:{id:D.id}}).then((function(e){var t,o,r,a,l,s,d,c,u,f,m,h,v,g,p,b;e.removeNoticeBoard.success&&(P({show:!1}),x.FN.success({message:"\ud83d\ude0a ".concat(e.removeNoticeBoard.message)}),"pagination"==(null===(t=n.g)||void 0===t||null===(o=t.filter)||void 0===o?void 0:o.mode)?i.fetchNoticeBoards(null===(r=n.g)||void 0===r||null===(a=r.filter)||void 0===a?void 0:a.page,null===(l=n.g)||void 0===l||null===(s=l.filter)||void 0===s?void 0:s.limit):"filter"==(null===(d=n.g)||void 0===d||null===(c=d.filter)||void 0===c?void 0:c.mode)?i.NoticeBoardService.filter({input:{type:null===(u=n.g)||void 0===u||null===(f=u.filter)||void 0===f?void 0:f.type,filter:null===(m=n.g)||void 0===m||null===(h=m.filter)||void 0===h?void 0:h.filter,page:null===(v=n.g)||void 0===v||null===(g=v.filter)||void 0===g?void 0:g.page,limit:null===(p=n.g)||void 0===p||null===(b=p.filter)||void 0===b?void 0:b.limit}}):i.fetchNoticeBoards())})):"Update"===e&&i.NoticeBoardService.updateSingleFiled({input:(0,u.Z)({_id:D.data.id},D.data.dataField,D.data.value)}).then((function(e){var t,o,r,a,l,s,d,c,u,f,m,h,v,g,p,b;P({show:!1}),e.updateNoticeBoard.success&&(x.FN.success({message:"\ud83d\ude0a ".concat(e.updateNoticeBoard.message)}),"pagination"==(null===(t=n.g)||void 0===t||null===(o=t.filter)||void 0===o?void 0:o.mode)?i.fetchNoticeBoards(null===(r=n.g)||void 0===r||null===(a=r.filter)||void 0===a?void 0:a.page,null===(l=n.g)||void 0===l||null===(s=l.filter)||void 0===s?void 0:s.limit):"filter"==(null===(d=n.g)||void 0===d||null===(c=d.filter)||void 0===c?void 0:c.mode)?i.NoticeBoardService.filter({input:{type:null===(u=n.g)||void 0===u||null===(f=u.filter)||void 0===f?void 0:f.type,filter:null===(m=n.g)||void 0===m||null===(h=m.filter)||void 0===h?void 0:h.filter,page:null===(v=n.g)||void 0===v||null===(g=v.filter)||void 0===g?void 0:g.page,limit:null===(p=n.g)||void 0===p||null===(b=p.filter)||void 0===b?void 0:b.limit}}):i.fetchNoticeBoards())}))},onClose:function(){return P({show:!1})}}))]})})),(0,p.Pi)((function(e){var t=(0,F.mZ)(),n=t.loginStore,o=t.noticeBoardStore,r=t.routerStore;return(0,g.useEffect)((function(){n.login&&"SYSADMIN"!==n.login.role&&o.updateNoticeBoard((0,h.Z)((0,h.Z)({},o.noticeBoard),{},{lab:n.login.lab})),o.updateNoticeBoard((0,h.Z)((0,h.Z)({},o.noticeBoard),{},{status:(0,b.t9)(r.lookupItems,"STATUS")})),o.fetchNoticeBoards()}),[n.login,r.lookupItems]),(0,S.jsx)(c,(0,h.Z)({},e))}))),D=I}}]);
//# sourceMappingURL=5031.cba960da.chunk.js.map