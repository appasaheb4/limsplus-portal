"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[5031],{25031:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r,o,i,a,l,s,d,c,u=n(4942),f=n(74165),m=n(1413),h=n(15861),p=n(29439),v=n(72791),g=n(71672),x=n(20500),b=n(28337),S=n(80184),y=(0,g.Pi)((function(e){var t=function(e){return"I"!==e.status};return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:"".concat(e.isView?"shown":"hidden"),children:(0,S.jsx)(x.tM,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"lab",text:"Labs",headerClasses:"textHeader2",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){r=e}}),editable:function(e,n,r,o){return t(n)},editorRenderer:function(t,n,r,o,i,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(F,{onSelect:function(t){e.onUpdateItem&&e.onUpdateItem(t.code,o.dataField,r._id)}})})}},{dataField:"header",text:"Header",headerClasses:"textHeader1",sort:!0,headerStyle:{fontSize:0},editable:function(e,n,r,o){return t(n)},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){o=e}})},{dataField:"message",text:"Message",sort:!0,headerStyle:{fontSize:0},editable:function(e,n,r,o){return t(n)},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){i=e}}),headerClasses:"textHeader2",editorRenderer:function(t,n,r,o,i,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(x.l0.$l,{rows:5,name:"message",placeholder:"Message",onBlur:function(t){r.message!==t&&t&&e.onUpdateItem&&e.onUpdateItem(t,o.dataField,r._id)}})})}},{dataField:"status",text:"Status",headerClasses:"textHeader2",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){l=e}}),editable:function(e,t,n,r){return"D"!=t.status&&"I"!=t.status},editorRenderer:function(t,n,r,o,i,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("select",{className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var n=t.target.value;e.onUpdateItem&&e.onUpdateItem(n,o.dataField,r._id)},children:[(0,S.jsx)("option",{selected:!0,children:"Select"}),(0,b.fc)(e.extraData.lookupItems,"STATUS").filter((function(e){return"D"!=e.code})).map((function(e,t){return(0,S.jsx)("option",{value:e.code,children:(0,b.w9)(e)},t)}))]})})}},{dataField:"action",text:"Action",headerClasses:"textHeader2",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){a=e}}),editorRenderer:function(t,n,r,o,i,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("select",{name:"action",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var n=t.target.value;e.onUpdateItem&&e.onUpdateItem(n,o.dataField,r._id)},children:[(0,S.jsx)("option",{selected:!0,children:"Select"}),["login","logout"].map((function(e,t){return(0,S.jsx)("option",{value:e,children:e},t)}))]})})}},{text:"Company Code",dataField:"companyCode",sort:!0,headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,x.t$)(e,t)},editable:!1,csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){d=e}}),headerClasses:"textHeader2"},{dataField:"environment",text:"Environment",headerClasses:"textHeader4",sort:!0,headerStyle:{fontSize:0},editable:!1,sortCaret:function(e,t){return(0,x.t$)(e,t)},csvFormatter:function(e){return e||""},filter:(0,x.DN)({getFilter:function(e){s=e}})},{dataField:"operation",text:"Action",editable:!1,csvExport:!1,formatter:function(t,n){return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"flex flex-row",children:[e.isDelete&&(0,S.jsx)(x.u,{tooltipText:"Delete",children:(0,S.jsx)(x.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onDelete&&e.onDelete({type:"Delete",show:!0,id:[n._id],title:"Are you sure?",body:"Do you want to delete this record?"})},children:x.PJ.getIconTag(x.PJ.IconBs.BsFillTrashFill)})}),"D"==n.status&&(0,S.jsx)(x.u,{tooltipText:"Approval",children:(0,S.jsx)(x.PJ.RIcon,{nameIcon:"AiOutlineCheckCircle",propsIcon:{size:24,color:"#ffffff"},onClick:function(){return e.onApproval(n)}})})]})})},headerClasses:"sticky right-0  bg-gray-500 text-white z-50",classes:function(e,t,n,r){return"sticky right-0 bg-gray-500"},style:function(t,n,r,o){var i;return{zIndex:(null===(i=e.data)||void 0===i?void 0:i.length)-r}}}],isDelete:e.isDelete,isEditModify:e.isUpdate,isExport:e.isExport,isSelectRow:!0,fileName:"Notice_Boards",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,n,r){e.onUpdateItem&&e.onUpdateItem(t,n,r)},onPageSizeChange:function(t,n){e.onPageSizeChange&&e.onPageSizeChange(t,n)},onFilter:function(t,n,r,o){e.onFilter&&e.onFilter(t,n,r,o)},clearAllFilter:function(){r(""),i(""),a(""),o(""),l(""),s(""),d("")},dynamicStylingFields:["lab","header","action"],hideExcelSheet:["opration","_id"]})})})})),j=n(24849),w=n(22414),F=(0,g.Pi)((function(e){var t,n=e.onSelect,r=(0,w.mZ)(),o=r.loading,i=r.labStore,a=(0,v.useState)(""),l=(0,p.Z)(a,2),s=l[0],d=l[1],c=(0,v.useState)(),u=(0,p.Z)(c,2),f=u[0],m=u[1],h=(0,v.useState)(!1),g=(0,p.Z)(h,2),b=g[0],y=g[1],F=(0,v.useRef)(null);t=F,(0,v.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&b&&(y(!1),d(""))}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,b]),(0,v.useEffect)((function(){m(i.listLabs)}),[i.listLabs]);var N=function(e){i.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})};return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{ref:F,children:[(0,S.jsxs)("div",{className:"flex items-center leading-4 p-2 focus:outline-none focus:ring  w-full shadow-sm sm:text-base border-2  rounded-md",children:[(0,S.jsx)("input",{placeholder:"Search by name",value:s,className:"w-full focus:outline-none bg-none",onKeyUp:function(e){if(8===(e.which?e.which:e.keyCode)){var t=e.target.value;N(t)}},onChange:function(e){var t=e.target.value;d(t),N(t)},onClick:function(){return y(!0)}}),o&&(0,S.jsx)(j.Z,{animation:"border",className:"mr-2 h-4 w-4"}),b?(0,S.jsx)(x.PJ.IconFa.FaChevronUp,{}):(0,S.jsx)(x.PJ.IconFa.FaChevronDown,{})]}),f&&b?f.length>0&&(0,S.jsx)("div",{className:"mt-1 absolute bg-gray-100 p-2 rounded-sm z-50",children:(0,S.jsx)("ul",{children:null===f||void 0===f?void 0:f.map((function(e,t){return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("li",{className:"text-gray-400 flex items-center",onClick:function(){d(e.name),y(!1),i.updateLabList(i.listLabsCopy),n(e)},children:[" ",(0,S.jsxs)("label",{className:"ml-2 mt-1 text-black",children:[" ",e.name]})]},t)})}))})}):null]})})})),N=(n(70042),n(61134)),C=n(763),B=n.n(C),Z=n(10621),k=n(65028),D=(n(58484),c=(0,g.Pi)((function(){var e,t=(0,w.mZ)(),r=t.loginStore,o=t.labStore,i=t.noticeBoardStore,a=t.routerStore,l=t.loading,s=(0,N.cI)(),d=s.control,c=s.handleSubmit,g=s.formState.errors,j=s.setValue,F=s.reset,C=(0,v.useState)(),D=(0,p.Z)(C,2),I=D[0],P=D[1],E=(0,v.useState)(!0),z=(0,p.Z)(E,2),U=z[0],A=z[1],L=(0,v.useState)(!1),_=(0,p.Z)(L,2),H=(_[0],_[1]),R=(0,v.useState)([]),T=(0,p.Z)(R,2),V=(T[0],T[1],(0,v.useState)(!1)),M=(0,p.Z)(V,2),$=M[0],q=M[1];(0,v.useEffect)((function(){var e;j("lab",r.login.lab),j("status",null===(e=i.noticeBoard)||void 0===e?void 0:e.status)}),[r.login,i.noticeBoard]);var J=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=7;break}return e.next=3,Q();case 3:e.sent?x.FN.warning({message:"\ud83d\ude14 Duplicate record found"}):i.NoticeBoardService.addNoticeBoard({input:(0,m.Z)({},i.noticeBoard)}).then((function(e){e.createNoticeBoard.success&&(x.FN.success({message:"\ud83d\ude0a ".concat(e.createNoticeBoard.message)}),F(),k.TB.emit("reload",{}),H(!1))})),e.next=8;break;case 7:x.FN.warning({message:"\ud83d\ude14 Duplicate record found"});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=(0,v.useMemo)((function(){return(0,S.jsx)(y,{data:i.noticeBoardList||[],totalSize:i.noticeBoardListCount,extraData:{listLabs:o.listLabs},isView:Z.o.checkPermission(a.userPermission,"View"),isDelete:Z.o.checkPermission(a.userPermission,"Delete"),isUpdate:Z.o.checkPermission(a.userPermission,"Update"),isExport:Z.o.checkPermission(a.userPermission,"Export"),onDelete:function(e){return P(e)},onSelectedRow:function(e){P({show:!0,type:"Delete",id:e,title:"Are you sure?",body:"Do you want to delete selected record?"})},onUpdateItem:function(e,t,n){P({show:!0,type:"Update",data:{value:e,dataField:t,id:n},title:"Are you sure?",body:"Do you want to update this record?"})},onPageSizeChange:function(e,t){i.fetchNoticeBoards(e,t),n.g.filter={mode:"pagination",page:e,limit:t}},onFilter:function(e,t,r,o){i.NoticeBoardService.filter({input:{type:e,filter:t,page:r,limit:o}}),n.g.filter={mode:"filter",type:e,filter:t,page:r,limit:o}},onApproval:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:e.sent||P({show:!0,type:"Update",data:{value:"A",dataField:"status",id:t._id},title:"Are you sure?",body:"Do you want to update this record?"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),[i.noticeBoardList]),Q=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n,r,o,a=arguments;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:i.noticeBoard,n=a.length>1&&void 0!==a[1]&&a[1],!(o=(r=["lab","header","action","status"]).find((function(e){if(B().isEmpty((0,m.Z)({},t)[e]))return e})))||n){e.next=7;break}return x.FN.error({message:"\ud83d\ude14 Required ".concat(o," value missing. Please enter correct value")}),e.abrupt("return",!0);case 7:return e.abrupt("return",i.NoticeBoardService.findByFields({input:{filter:n?(0,m.Z)({},t):(0,m.Z)({},B().pick((0,m.Z)({},t),r))}}).then((function(e){var t;return null!==(t=e.findByFieldsNoticeBoard)&&void 0!==t&&t.success?(q(!0),x.FN.error({message:"\ud83d\ude14 Already some record exists."}),!0):(q(!1),!1)})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x._q,{title:(null===(e=a.selectedComponents)||void 0===e?void 0:e.title)||"",store:r}),(0,S.jsx)("div",{className:"flex justify-end",style:{position:"fixed",right:"17px"},children:Z.o.checkPermission(a.userPermission,"Add")&&(0,S.jsx)(x.EK.n6,{show:U,onClick:function(){return A(!U)}})}),(0,S.jsxs)("div",{className:"p-2 rounded-lg shadow-xl "+(U?"hidden":"shown"),children:[(0,S.jsxs)(x.rj,{cols:2,children:[(0,S.jsxs)(x.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[o.listLabs&&(0,S.jsx)(N.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange;return t.value,(0,S.jsx)(x.l0.SP,{label:"Lab",id:"labs",hasError:!!g.lab,children:(0,S.jsx)(x.T3,{loader:l,placeholder:"Search by name",disable:!(!r.login||"SYSADMIN"===r.login.role),data:{list:o.listLabs,displayKey:"name",findKey:"name"},hasError:!!g.name,onFilter:function(e){o.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})},onSelect:function(e){n(e.name),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{lab:e.code})),o.updateLabList(o.listLabsCopy)}})})},name:"lab",rules:{required:!0},defaultValue:""}),(0,S.jsx)(N.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,S.jsx)(x.l0.II,{label:"Header",name:"lblHeader",placeholder:g.header?"Please Enter Header":"Header",hasError:!!g.header,value:r,onChange:function(e){n(e),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{header:e}))}})},name:"header",rules:{required:!0},defaultValue:""}),(0,S.jsx)(N.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,S.jsx)(x.l0.SP,{label:"Action",id:"lblAction",hasError:!!g.action,children:(0,S.jsxs)("select",{name:"action",value:r,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(g.action?"border-red":"border-gray-300"," rounded-md"),onChange:function(e){var t=e.target.value;n(t),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{action:t}))},children:[(0,S.jsx)("option",{selected:!0,children:"Select"}),["login","logout"].map((function(e,t){return(0,S.jsx)("option",{value:e,children:e},t)}))]})})},name:"action",rules:{required:!0},defaultValue:""}),(0,S.jsx)(N.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,S.jsx)(x.l0.SP,{label:"Status",hasError:!!g.status,children:(0,S.jsxs)("select",{value:r,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(g.status?"border-red  ":"border-gray-300"," rounded-md"),onChange:function(e){var t=e.target.value;n(t),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{status:t}))},children:[(0,S.jsx)("option",{selected:!0,children:"Select"}),(0,b.fc)(a.lookupItems,"STATUS").map((function(e,t){return(0,S.jsx)("option",{value:e.code,children:(0,b.w9)(e)},t)}))]})})},name:"status",rules:{required:!1},defaultValue:""})]}),(0,S.jsx)(x.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:(0,S.jsx)(N.Qr,{control:d,render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,S.jsx)(x.l0.$l,{rows:7,label:"Message",name:"lblMessage",hasError:!!g.message,placeholder:g.message?"Please Enter Message":"Message",value:r,onChange:function(e){n(e),i.updateNoticeBoard((0,m.Z)((0,m.Z)({},i.noticeBoard),{},{message:e}))}})},name:"message",rules:{required:!1},defaultValue:""})})]}),(0,S.jsx)("br",{}),(0,S.jsxs)(x.aV,{direction:"row",space:3,align:"center",children:[(0,S.jsx)(x.EK.zx,{size:"medium",type:"solid",icon:x.ny.vc,onClick:c(J),children:"Save"}),(0,S.jsx)(x.EK.zx,{size:"medium",type:"outline",icon:x.ny.JW,onClick:function(){window.location.reload()},children:"Clear"})]})]}),(0,S.jsx)("div",{className:"p-2 rounded-lg shadow-xl overflow-scroll",style:{overflowX:"scroll"},children:K}),(0,S.jsx)(x.WZ,(0,m.Z)((0,m.Z)({},I),{},{click:function(e){"Delete"===e?i.NoticeBoardService.deleteNoticeBoards({input:{id:I.id}}).then((function(e){var t,r,o,a,l,s,d,c,u,f,m,h,p,v,g,b;e.removeNoticeBoard.success&&(P({show:!1}),x.FN.success({message:"\ud83d\ude0a ".concat(e.removeNoticeBoard.message)}),"pagination"==(null===(t=n.g)||void 0===t||null===(r=t.filter)||void 0===r?void 0:r.mode)?i.fetchNoticeBoards(null===(o=n.g)||void 0===o||null===(a=o.filter)||void 0===a?void 0:a.page,null===(l=n.g)||void 0===l||null===(s=l.filter)||void 0===s?void 0:s.limit):"filter"==(null===(d=n.g)||void 0===d||null===(c=d.filter)||void 0===c?void 0:c.mode)?i.NoticeBoardService.filter({input:{type:null===(u=n.g)||void 0===u||null===(f=u.filter)||void 0===f?void 0:f.type,filter:null===(m=n.g)||void 0===m||null===(h=m.filter)||void 0===h?void 0:h.filter,page:null===(p=n.g)||void 0===p||null===(v=p.filter)||void 0===v?void 0:v.page,limit:null===(g=n.g)||void 0===g||null===(b=g.filter)||void 0===b?void 0:b.limit}}):i.fetchNoticeBoards())})):"Update"===e&&i.NoticeBoardService.updateSingleFiled({input:(0,u.Z)({_id:I.data.id},I.data.dataField,I.data.value)}).then((function(e){var t,r,o,a,l,s,d,c,u,f,m,h,p,v,g,b;P({show:!1}),e.updateNoticeBoard.success&&(x.FN.success({message:"\ud83d\ude0a ".concat(e.updateNoticeBoard.message)}),"pagination"==(null===(t=n.g)||void 0===t||null===(r=t.filter)||void 0===r?void 0:r.mode)?i.fetchNoticeBoards(null===(o=n.g)||void 0===o||null===(a=o.filter)||void 0===a?void 0:a.page,null===(l=n.g)||void 0===l||null===(s=l.filter)||void 0===s?void 0:s.limit):"filter"==(null===(d=n.g)||void 0===d||null===(c=d.filter)||void 0===c?void 0:c.mode)?i.NoticeBoardService.filter({input:{type:null===(u=n.g)||void 0===u||null===(f=u.filter)||void 0===f?void 0:f.type,filter:null===(m=n.g)||void 0===m||null===(h=m.filter)||void 0===h?void 0:h.filter,page:null===(p=n.g)||void 0===p||null===(v=p.filter)||void 0===v?void 0:v.page,limit:null===(g=n.g)||void 0===g||null===(b=g.filter)||void 0===b?void 0:b.limit}}):i.fetchNoticeBoards())}))},onClose:function(){return P({show:!1})}}))]})})),(0,g.Pi)((function(e){var t=(0,w.mZ)(),n=t.loginStore,r=t.noticeBoardStore,o=t.routerStore;return(0,v.useEffect)((function(){n.login&&"SYSADMIN"!==n.login.role&&r.updateNoticeBoard((0,m.Z)((0,m.Z)({},r.noticeBoard),{},{lab:n.login.lab})),r.updateNoticeBoard((0,m.Z)((0,m.Z)({},r.noticeBoard),{},{status:(0,b.t9)(o.lookupItems,"STATUS")})),r.fetchNoticeBoards()}),[n.login,o.lookupItems]),(0,S.jsx)(c,(0,m.Z)({},e))}))),I=D}}]);
//# sourceMappingURL=5031.2c4e62d7.chunk.js.map