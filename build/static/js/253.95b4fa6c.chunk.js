(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[253],{56253:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return de}});var n,o,r,a,l,s,d,c,u,f,p,v,x,m,g,h,y,b,F,w,C,D,j,S,P=i(1413),N=i(29439),R=i(47313),I=i(92126),k=i(48703),T=i(75627),M=i(42490),E=i(10658),U=i.n(E),L=i(4942),z=i(43701),Z=i(16031),H=i.n(Z),A=i(66233),B=i.n(A),Q=i(36620),O=i(94118),J=(i(35509),i(74629)),Y=i(46417),_=A.Search.SearchBar,V=A.Search.ClearSearchButton,W=A.CSVExport.ExportCSVButton,q=function(e){var t=e.id,i=e.data,n=e.totalSize,o=void 0===n?10:n,r=e.searchPlaceholder,a=void 0===r?"Search...":r,l=e.page,s=void 0===l?0:l,d=e.sizePerPage,c=void 0===d?10:d,u=e.columns,f=e.fileName,p=e.isEditModify,v=(e.isSelectRow,e.selectedItem),x=e.isPagination,m=void 0===x||x,g=(e.onSelectedRow,e.onUpdateItem),h=e.onPageSizeChange,y=e.onUpdateDeliveryStatus,b=e.onFilter,F=e.clearAllFilter,w=e.onClickRow,C=(0,R.useState)(),D=(0,N.Z)(C,2),j=(D[0],D[1],(0,R.useState)(!1)),S=(0,N.Z)(j,2),I=S[0],T=S[1],M={cutome:!0,totalSize:o,paginationSize:5,pageStartIndex:0,firstPageText:"<<",prePageText:"<",nextPageText:">",lastPageText:">>",disablePageTitle:!0,paginationTotalRenderer:function(e,t,i){return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{className:"clearfix"}),(0,Y.jsxs)("span",{children:["Showing ",e," to ",t," of ",i," Results"]})]})},hideSizePerPage:!0,showTotal:!1,alwaysShowAllBtns:!0,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50}],hidePageListOnlyOnePage:!0,sizePerPageRenderer:function(e){var t=e.options,i=e.currSizePerPage,n=e.onSizePerPageChange;return(0,Y.jsxs)("div",{className:"btn-group items-center",role:"group",children:[(0,Y.jsx)("input",{type:"number",min:"0",placeholder:"No",onChange:function(e){e.target.value&&n(e.target.value)},className:"mr-2 ml-2 leading-4 p-2 w-14 focus:outline-none focus:ring block  shadow-sm sm:text-base border border-gray-300 rounded-md"}),t.map((function(e){return(0,Y.jsx)("button",{type:"button",onClick:function(){return n(e.page)},className:"btn  ".concat(i==="".concat(e.page)?"bg-primary":"bg-grey"),children:e.text},e.text)}))]})}},E={placeholder:a},Z=function(e,t){var i=t.data,n=t.cellEdit,r=t.page,a=t.sizePerPage,l=t.filters,s=t.sortField,d=t.sortOrder,c=t.searchText;if("cellEdit"===e&&p&&g&&g(n.newValue,n.dataField,n.rowId),"pagination"===e&&H().isEmpty(l)&&h&&h(r,a),"filter"===e||"pagination"===e&&!H().isEmpty(l)){if("pagination"===e){if(a>o)return alert("You have not more records.");if(r*a>o)return alert("You have not more records.")}for(var u={},f=0,v=Object.entries(l);f<v.length;f++){var x=(0,N.Z)(v[f],2),m=x[0],y=x[1],F=(0,L.Z)({},m,y.filterVal);u=Object.assign(u,F)}b&&(0,J.Ds)((function(){b(e,u,"filter"===e&&1===r?0:r,a)}))}("search"===e&&(0,J.Ds)((function(){b&&b(e,{srText:c},r,a)})),"sort"===e)&&("asc"===d?i.sort((function(e,t){return e[s]>t[s]?1:t[s]>e[s]?-1:0})):i.sort((function(e,t){return e[s]>t[s]?-1:t[s]>e[s]?1:0})))},A=function(e){var t=e.columns,i=e.onColumnToggle,n=e.toggles;return(0,Y.jsx)("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons",children:t.map((function(e){return(0,P.Z)((0,P.Z)({},e),{},{toggle:n[e.dataField]})})).map((function(e,t){if(t>0)return(0,Y.jsx)("button",{type:"button",className:" btn btn-primary  btn-sm whitespace-nowrap ".concat(e.toggle?"active":""),"data-toggle":"button","aria-pressed":e.toggle?"true":"false",onClick:function(){return i(e.dataField)},children:e.text},e.dataField)}))})},q={onClick:function(e,t,i){w&&w(t,i)}},G=function(e,t){if(e._id==(null===v||void 0===v?void 0:v._id))return{backgroundColor:"#a9a9a9"}};return(0,Y.jsx)(Q.bN,{pagination:(0,Q.ZP)(0!==o?M:{page:s,sizePerPage:c,totalSize:o}),keyField:t,columns:u,data:i,children:function(e){var n=e.paginationProps,o=e.paginationTableProps;return(0,Y.jsx)(B(),{keyField:t,bootstrap4:!0,data:i,columns:u,search:!0,exportCSV:{fileName:"".concat(f,"_").concat(U()(new Date).format("YYYY-MM-DD HH:mm"),".csv"),noAutoBOM:!1,blobType:"text/csv;charset=ansi",exportAll:!1,onlyExportFiltered:!0},columnToggle:!0,children:function(e){return(0,Y.jsxs)("div",{children:[(0,Y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Y.jsx)(_,(0,P.Z)((0,P.Z)((0,P.Z)({},E),e.searchProps),{},{onChange:function(e){console.log({value:e})},style:{marginTop:10}})),(0,Y.jsx)(V,(0,P.Z)({className:"inline-flex bg-gray-500 items-center small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.searchProps)),(0,Y.jsx)("button",{className:"px-2 focus:outline-none bg-gray-500 items-center  outline shadow-sm  font-medium  text-center rounded-md h-9 text-white",onClick:F,children:"Clear all filters"}),(0,Y.jsx)(W,(0,P.Z)((0,P.Z)({className:"inline-flex bg-gray-500 items-center  small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.csvProps),{},{children:"Export CSV!!"})),I?(0,Y.jsx)(k.EK.zx,{size:"medium",type:"outline",onClick:function(){T(!I)},children:(0,Y.jsx)(k.PJ.IconFa.FaChevronUp,{})}):(0,Y.jsx)(k.EK.zx,{size:"medium",type:"outline",onClick:function(){T(!I)},children:(0,Y.jsx)(k.PJ.IconFa.FaChevronDown,{})}),(0,Y.jsx)(k.u,{tooltipText:"All records delivery status update",position:"top",children:(0,Y.jsx)(k.EK.zx,{size:"medium",type:"outline",onClick:function(){y&&y()},children:(0,Y.jsx)(k.PJ.IconTb.TbExchange,{})})})]}),I&&(0,Y.jsx)("div",{className:"mb-2 overflow-auto h-10",children:(0,Y.jsx)(A,(0,P.Z)({contextual:"primary",className:"list-custom-class",btnClassName:"list-btn-custom-class"},e.columnToggleProps))}),(0,Y.jsx)("div",{className:"scrollTable",children:(0,Y.jsx)(z.Z,(0,P.Z)((0,P.Z)((0,P.Z)({remote:!0},e.baseProps),{},{noDataIndication:"Table is Empty",hover:!0},o),{},{filter:(0,O.ZP)(),headerClasses:"bg-gray-500 text-white whitespace-nowrap",onTableChange:Z,rowEvents:q,rowStyle:G}))}),m&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,Y.jsx)(Q.dE,(0,P.Z)({},Object.assign({},(0,P.Z)((0,P.Z)({},n),{},{hideSizePerPage:!1})))),(0,Y.jsx)(Q.yJ,(0,P.Z)({},n))]}),(0,Y.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,Y.jsx)(Q.NJ,(0,P.Z)({},n))})]})]})}})}})},G=(0,I.Pi)((function(e){var t=(0,R.useState)({}),i=(0,N.Z)(t,2),P=i[0],I=i[1];return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)("div",{style:{position:"relative"},children:(0,Y.jsx)(q,{id:"_id",data:e.data,totalSize:e.totalSize,selectedItem:P,isPagination:e.isPagination,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"labId",text:"Lab Id",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){n=e}})},{dataField:"externalLabId",text:"External Lab Id",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){o=e}})},{dataField:"employeeCode",text:"Employee Code",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){r=e}})},{dataField:"deliveryId",text:"Delivery Id",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.w9)({getFilter:function(e){a=e}}),filterRenderer:function(e,t){return(0,Y.jsx)(k.Tj,{onFilter:e,column:t})}},{dataField:"deliveryDate",text:"Delivery Date",sort:!0,editable:!1,headerClasses:"textHeader11",filter:(0,k.w9)({getFilter:function(e){l=e}}),filterRenderer:function(e,t){return(0,Y.jsx)(k.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,Y.jsx)(Y.Fragment,{children:t.deliveryDate?U()(t.deliveryDate).format("YYYY-MM-DD"):""})}},{dataField:"reportDate",text:"Report Date",sort:!0,editable:!1,headerClasses:"textHeader11",filter:(0,k.w9)({getFilter:function(e){s=e}}),filterRenderer:function(e,t){return(0,Y.jsx)(k.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,Y.jsx)(Y.Fragment,{children:t.reportDate?U()(t.reportDate).format("YYYY-MM-DD"):""})}},{dataField:"deliveryStatus",text:"Delivery Status",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){d=e}})},{dataField:"reportType",text:"Report Type",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){c=e}})},{dataField:"deliveryMode",text:"Delivery Mode",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){u=e}})},{dataField:"destination",text:"Destination",sort:!0,editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){f=e}})},{dataField:"comments",text:"Comments",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){p=e}})},{dataField:"startDate",text:"Start Date",sort:!0,editable:!1,headerClasses:"textHeader11",filter:(0,k.w9)({getFilter:function(e){v=e}}),filterRenderer:function(e,t){return(0,Y.jsx)(k.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,Y.jsx)(Y.Fragment,{children:t.startDate?U()(t.startDate).format("YYYY-MM-DD"):""})}},{dataField:"endDate",text:"End Date",sort:!0,editable:!1,headerClasses:"textHeader11",filter:(0,k.w9)({getFilter:function(e){x=e}}),filterRenderer:function(e,t){return(0,Y.jsx)(k.fU,{onFilter:e,column:t})},formatter:function(e,t){return(0,Y.jsx)(Y.Fragment,{children:t.endDate?U()(t.endDate).format("YYYY-MM-DD"):""})}},{dataField:"errorMsg",text:"Error Msg",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){m=e}})},{dataField:"clientCode",text:"Client Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){g=e}})},{dataField:"clientName",text:"Client Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){h=e}})},{dataField:"registrationLocation",text:"Registration Location",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader8",filter:(0,k.DN)({getFilter:function(e){y=e}})},{dataField:"registrationLocationCode",text:"Registration Location Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader8",filter:(0,k.DN)({getFilter:function(e){b=e}})},{dataField:"doctorCode",text:"Doctor Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){F=e}})},{dataField:"doctorName",text:"Doctor Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){w=e}})},{dataField:"qrCode",text:"Qr Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){C=e}})},{dataField:"pdf",text:"PDF",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){D=e}})},{dataField:"enteredBy",text:"Entered By",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){j=e}})},{dataField:"userComments",text:"User Comments",sort:!0,csvFormatter:function(e){return e||""},editable:!1,headerClasses:"textHeader5",filter:(0,k.DN)({getFilter:function(e){S=e}})},{dataField:"operation",text:"Action",editable:!1,csvExport:!1,hidden:!e.isDelete,formatter:function(t,i){return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)("div",{className:"flex flex-row",children:[(0,Y.jsx)(k.u,{tooltipText:"Cancel",position:"bottom",children:(0,Y.jsx)(k.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"cancel",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Cancel item"})},children:k.PJ.getIconTag(k.PJ.IconGi.GiCancel)})}),(0,Y.jsx)(k.u,{tooltipText:"Hold",position:"bottom",children:(0,Y.jsx)(k.PJ.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"hold",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Hold item"})},children:k.PJ.getIconTag(k.PJ.Iconmd.MdBackHand)})}),(0,Y.jsx)(k.u,{tooltipText:"Delivery Status",children:(0,Y.jsx)(k.PJ.IconContext,{color:"#ffffff",size:"20",onClick:function(){return e.onUpdate&&e.onUpdate({type:"generatePdf",visitId:null===i||void 0===i?void 0:i.visitId,show:!0,id:i._id,title:"Are you sure?",body:"Generate pdf status update"})},children:k.PJ.getIconTag(k.PJ.IconTb.TbExchange)})}),(0,Y.jsx)(k.u,{tooltipText:"Medical Report",children:(0,Y.jsx)(k.PJ.IconContext,{color:"#ffffff",size:"20",onClick:function(){return e.onMedicalReport&&e.onMedicalReport(null===i||void 0===i?void 0:i.labId)},children:k.PJ.getIconTag(k.PJ.IconBs.BsFilePdf)})})]})})},headerClasses:"sticky right-0  bg-gray-500 text-white z-50",classes:function(e,t,i,n){return"sticky right-0 bg-gray-500"},style:function(t,i,n,o){var r;return{zIndex:(null===(r=e.data)||void 0===r?void 0:r.length)-n}}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Report Delivery",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,i,n){e.onUpdateItem&&e.onUpdateItem(t,i,n)},onPageSizeChange:function(t,i){e.onPageSizeChange&&e.onPageSizeChange(t,i)},onFilter:function(t,i,n,o){e.onFilter&&e.onFilter(t,i,n,o)},clearAllFilter:function(){n(""),o(""),r(""),a(""),l(),s(),d(""),c(""),u(""),f(""),p(""),v(),x(),m(""),g(""),h(""),y(""),b(""),F(""),w(""),C(""),D(""),j(""),S("")},onClickRow:function(t,i){I(t),e.onClickRow&&e.onClickRow(t,i)},onUpdateDeliveryStatus:function(){e.onUpdateDeliveryStatus&&e.onUpdateDeliveryStatus()}})})})})),K=(0,I.Pi)((function(e){return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)("div",{style:{position:"relative"},children:(0,Y.jsx)(q,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"deliveryId",text:"Delivery Id",sort:!0,editable:!1},{dataField:"labId",text:"Lab Id",sort:!0,editable:!1},{dataField:"orderId",text:"Order Id",sort:!0,editable:!1},{dataField:"panelCode",text:"Panel Code",sort:!0,editable:!1},{dataField:"panelName",text:"Panel Name",sort:!0,editable:!1},{dataField:"testCode",text:"Test Code",sort:!0,editable:!1},{dataField:"testName",text:"Test Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"analyteCode",text:"Analyte Code",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"analyteName",text:"Analyte Name",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"rep",text:"Rep",sort:!0,csvFormatter:function(e){return e||""},editable:!1},{dataField:"delivered",text:"Delivered",sort:!0,csvFormatter:function(e,t){return"".concat(t.delivered&&t.delivered?"Yes":"No")},editable:!1,formatter:function(e,t){return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(k.l0.ZD,{disabled:!0,value:t.delivered})})}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Order Delivered",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,i,n){e.onUpdateItem&&e.onUpdateItem(t,i,n)},onPageSizeChange:function(t,i){e.onPageSizeChange&&e.onPageSizeChange(t,i)},onFilter:function(t,i,n,o){e.onFilter&&e.onFilter(t,i,n,o)},clearAllFilter:function(){}})})})})),X=i(74165),$=i(15861),ee=i(18209),te=i(57293),ie=i(338),ne=i(78925),oe=i(86431),re=i.n(oe),ae=function(e){var t=e.show,i=void 0!==t&&t,n=e.data,o=e.onClose,r=(e.onReceiptUpload,R.useState(i)),a=(0,N.Z)(r,2),l=a[0],s=a[1];(0,R.useEffect)((function(){s(i)}),[i]);return(0,Y.jsx)(ee.W2,{children:l&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{className:"justify-center items-center  overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:(0,Y.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,Y.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,Y.jsxs)("div",{className:"flex items-start justify-between p-3 border-b border-solid border-gray-300 rounded-t",children:[(0,Y.jsx)("h3",{className:"text-3xl font-semibold",children:"Medical Report Share"}),(0,Y.jsx)("button",{className:"p-1  border-0 text-black opacity-1 ml-6 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:function(){s(!1),o&&o()},children:(0,Y.jsx)("span",{className:" text-black h-6 w-6 text-2xl block outline-none focus:outline-none",children:"\xd7"})})]}),(0,Y.jsx)("div",{className:"relative p-2 flex-auto",children:(0,Y.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:n&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(k.u,{tooltipText:"Download",children:(0,Y.jsx)(k.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,$.Z)((0,X.Z)().mark((function e(){var t,i,o;return(0,X.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,Y.jsx)(ie.wm,{data:n}),(i=(0,te.eA)(t)).updateContainer(t),e.next=5,i.toBlob();case 5:o=e.sent,(0,ne.saveAs)(o,"MedicalReport.pdf");case 7:case"end":return e.stop()}}),e)}))),children:k.PJ.getIconTag(k.PJ.Iconhi.HiOutlineFolderDownload)})}),(0,Y.jsx)(k.u,{tooltipText:"Medical Report With Header Footer",children:(0,Y.jsx)(k.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,$.Z)((0,X.Z)().mark((function e(){var t,i;return(0,X.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,te.eA)((0,Y.jsx)(ie.wm,{data:n})).toBlob();case 2:t=e.sent,i=URL.createObjectURL(t),re()(i);case 5:case"end":return e.stop()}}),e)}))),children:k.PJ.getIconTag(k.PJ.IconBi.BiPrinter)})}),(0,Y.jsx)(k.u,{tooltipText:"Medical Report Without Header Footer",children:(0,Y.jsx)(k.PJ.IconContext,{color:"#fff",size:"25",style:{backgroundColor:"#808080",width:32,height:32,borderRadius:16,align:"center",padding:4},onClick:(0,$.Z)((0,X.Z)().mark((function e(){var t,i;return(0,X.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,te.eA)((0,Y.jsx)(ie.wm,{data:n,isWithHeaderFooter:!1})).toBlob();case 2:t=e.sent,i=URL.createObjectURL(t),re()(i);case 5:case"end":return e.stop()}}),e)}))),children:k.PJ.getIconTag(k.PJ.IconBi.BiPrinter)})})]})})}),(0,Y.jsx)("div",{className:"flex items-center justify-end p-3 border-t border-solid border-gray-300 rounded-b",children:(0,Y.jsx)("button",{className:"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1",type:"button",style:{transition:"all .15s ease"},onClick:function(){s(!1),o&&o()},children:"Close"})})]})})}),(0,Y.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})})},le=(i(80594),i(65733)),se=(i(9479),(0,I.Pi)((function(){var e,t=(0,le.mZ)(),i=(t.loading,t.deliveryQueueStore),n=t.routerStore,o=t.loginStore,r=t.receiptStore,a=(0,T.cI)(),l=(a.control,a.handleSubmit,a.formState.errors,a.setValue,(0,R.useState)()),s=(0,N.Z)(l,2),d=s[0],c=s[1],u=(0,R.useState)(),f=(0,N.Z)(u,2),p=f[0],v=f[1],x=(0,R.useState)(),m=(0,N.Z)(x,2),g=m[0],h=m[1];(0,R.useEffect)((function(){!function(){var e=o.login;"SYSADMIN"!=(null===e||void 0===e?void 0:e.role)?"CORPORATE_PORTAL"!=(null===e||void 0===e?void 0:e.role)?k.FN.warning({message:"\ud83d\ude1e You don't have access permission for delivery queue. Please contact to admin"}):i.deliveryQueueService.findByFields({input:{filter:{clientCode:e.lab}}}).then((function(e){var t,n,o;e.findByFieldsDeliveryQueue.success&&i.updateReportDeliveryList({deliveryQueues:{data:null===(t=e.findByFieldsDeliveryQueue)||void 0===t?void 0:t.data,paginatorInfo:{count:null===(n=e.findByFieldsDeliveryQueue)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.length}}})})):i.deliveryQueueService.listDeliveryQueue()}()}),[]);var y=function(e){return"string"===typeof e?e.toUpperCase():e},b=function(e,t){var i=Object.keys(t);return e.filter((function(e){return console.log({item:e}),i.every((function(i){return console.log({key:i}),!t[i].length||t[i].find((function(t){return y(t)===y(e[i])}))}))}))},F=(0,R.useMemo)((function(){var e;return(0,Y.jsx)(G,{data:i.reportDeliveryList||[],totalSize:i.reportDeliveryListCount,isPagination:"SYSADMIN"==(null===(e=o.login)||void 0===e?void 0:e.role),isDelete:M.o.checkPermission(n.userPermission,"Delete"),isEditModify:M.o.checkPermission(n.userPermission,"Edit/Modify"),onUpdate:function(e){return c(e)},onPageSizeChange:function(e,t){i.deliveryQueueService.listDeliveryQueue(e,t)},onFilter:function(e,t,n,r){var a;if("SYSADMIN"==(null===(a=o.login)||void 0===a?void 0:a.role))i.deliveryQueueService.filter({input:{type:e,filter:t,page:n,limit:r}});else if("filter"==e)console.log({list:b(i.reportDeliveryListCopy,t)});else{if(""==t.srText)return i.updateReportDeliveryList(i.reportDeliveryListCopy);var l=i.reportDeliveryListCopy,s=null===l||void 0===l?void 0:l.filter((function(e){var i;return JSON.stringify(e).toLocaleLowerCase().match(null===(i=t.srText)||void 0===i?void 0:i.toLocaleLowerCase())}));i.updateReportDeliveryList(s)}},onClickRow:function(e,t){i.updateOrderDeliveredList([e])},onUpdateDeliveryStatus:function(){var e,t;c({type:"updateAllDeliveryStatus",ids:null===(e=i.reportDeliveryList)||void 0===e?void 0:e.map((function(e){return e._id})),visitId:null===(t=i.reportDeliveryList)||void 0===t?void 0:t.map((function(e){return e.visitId})),show:!0,title:"Are you sure?",body:"All generate pdf status update"})},onMedicalReport:function(e){i.deliveryQueueService.getMedicalReportDetails({input:{filter:{labId:e}}}).then((function(e){var t;e.getMedicalReportDetailsForDeliveryQueue.success?(console.log({data:e.getMedicalReportDetailsForDeliveryQueue}),v({show:!0,data:null===(t=e.getMedicalReportDetailsForDeliveryQueue)||void 0===t?void 0:t.resultMedicalReport})):k.FN.error({message:"\ud83d\ude1e ".concat(e.getMedicalReportDetailsForDeliveryQueue.message)})}))}})}),[i.reportDeliveryList]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(k.h4,{children:[(0,Y.jsx)(k.CD,{title:(null===(e=n.selectedComponents)||void 0===e?void 0:e.title)||""}),(0,Y.jsx)(k.Nd,{store:o})]}),(0,Y.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,Y.jsx)("span",{className:"font-bold text-lg underline",children:"Report Delivery"}),F]}),(0,Y.jsxs)("div",{className:"p-3 rounded-lg shadow-xl overflow-auto",children:[(0,Y.jsx)("span",{className:"font-bold text-lg underline",children:"Order Delivered"}),(0,Y.jsx)(K,{data:i.orderDeliveredList||[],totalSize:i.orderDeliveredListCount,isDelete:M.o.checkPermission(n.userPermission,"Delete"),isEditModify:M.o.checkPermission(n.userPermission,"Edit/Modify"),onDelete:function(e){return c(e)},onSelectedRow:function(e){c({show:!0,type:"delete",id:e,title:"Are you sure?",body:"Delete selected items!"})},onUpdateItem:function(e,t,i){c({show:!0,type:"update",data:{value:e,dataField:t,id:i},title:"Are you sure?",body:"Update items!"})},onPageSizeChange:function(e,t){},onFilter:function(e,t,i,n){}}),(0,Y.jsx)(k.WZ,(0,P.Z)((0,P.Z)({},d),{},{click:function(e){"cancel"==e||"hold"==e||"generatePdf"==e?i.deliveryQueueService.updateDeliveryQueue({input:{_id:d.id,visitId:null===d||void 0===d?void 0:d.visitId,deliveryStatus:"cancel"==e?"Cancel":"hold"==e?"Hold":"Done"}}).then((function(e){c({show:!1}),e.updateDeliveryQueue.success&&(k.FN.success({message:"\ud83d\ude0a ".concat(e.updateDeliveryQueue.message)}),i.deliveryQueueService.listDeliveryQueue())})):i.deliveryQueueService.updateDeliveryQueueByVisitIds({input:{filter:{ids:null===d||void 0===d?void 0:d.ids,visitId:null===d||void 0===d?void 0:d.visitId,deliveryStatus:"Done"}}}).then((function(e){c({show:!1}),e.updateByVisitIdsDeliveryQueue.success&&(k.FN.success({message:"\ud83d\ude0a ".concat(e.updateByVisitIdsDeliveryQueue.message)}),i.deliveryQueueService.listDeliveryQueue())}))},onClose:function(){c({show:!1})}})),(0,Y.jsx)(ae,(0,P.Z)((0,P.Z)({},p),{},{onClose:function(){v({show:!1})},onReceiptUpload:function(e,t){g?window.open(t+g,"_blank"):r.receiptService.paymentReceiptUpload({input:{file:e}}).then((function(e){var i,n;e.paymentReceiptUpload.success&&(h(null===(i=e.paymentReceiptUpload)||void 0===i?void 0:i.receiptPath),window.open("".concat(t," ").concat(null===(n=e.paymentReceiptUpload)||void 0===n?void 0:n.receiptPath),"_blank"))}))}}))]})]})}))),de=se},78925:function(e,t,i){var n,o,r;o=[],n=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,i){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,i)},n.onerror=function(){console.error("could not download file")},n.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i.g&&i.g.global===i.g?i.g:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,i){var l=a.URL||a.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?r(s):o(s.href)?n(e,t,i):r(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(s.href)}),4e4),setTimeout((function(){r(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,i,a){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),i);else if(o(e))n(e,i,a);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){r(l)}))}}:function(e,t,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,i);var r="application/octet-stream"===e.type,s=/constructor/i.test(a.HTMLElement)||a.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||r&&s||l)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(e)}else{var u=a.URL||a.webkitURL,f=u.createObjectURL(e);o?o.location=f:location.href=f,o=null,setTimeout((function(){u.revokeObjectURL(f)}),4e4)}});a.saveAs=s.saveAs=s,e.exports=s},void 0===(r="function"===typeof n?n.apply(t,o):n)||(e.exports=r)}}]);