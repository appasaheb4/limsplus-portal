(this.webpackJsonplimsplus_portal=this.webpackJsonplimsplus_portal||[]).push([[9],{915:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"NoticeBoardsList",(function(){return v}));var o,r,l,i,c,s=a(18),d=a(3),u=a(9),m=a(1),f=a.n(m),b=a(14),g=a(2),p=a(688),h=a(4),E=Object(b.a)((function(e){var t,a=e.onSelect,n=Object(h.b)(),o=n.loading,r=n.labStore,l=Object(m.useState)(""),i=Object(u.a)(l,2),c=i[0],s=i[1],d=Object(m.useState)(),b=Object(u.a)(d,2),E=b[0],v=b[1],F=Object(m.useState)(!1),S=Object(u.a)(F,2),y=S[0],w=S[1],B=Object(m.useRef)(null);t=B,Object(m.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&y&&(w(!1),s(""))}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,y]),Object(m.useEffect)((function(){v(r.listLabs)}),[r.listLabs]);var j=function(e){r.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})};return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{ref:B},f.a.createElement("div",{className:"flex items-center leading-4 p-2 focus:outline-none focus:ring  w-full shadow-sm sm:text-base border-2  rounded-md"},f.a.createElement("input",{placeholder:"Search by name",value:c,className:"w-full focus:outline-none bg-none",onKeyUp:function(e){if(8===(e.which?e.which:e.keyCode)){var t=e.target.value;j(t)}},onChange:function(e){var t=e.target.value;s(t),j(t)},onClick:function(){return w(!0)}}),o&&f.a.createElement(p.a,{animation:"border",className:"mr-2 h-4 w-4"}),y?f.a.createElement(g.a.Icons.IconFa.FaChevronUp,null):f.a.createElement(g.a.Icons.IconFa.FaChevronDown,null)),E&&y?E.length>0&&f.a.createElement("div",{className:"mt-1 absolute bg-gray-100 p-2 rounded-sm z-50"},f.a.createElement("ul",null,null===E||void 0===E?void 0:E.map((function(e,t){return f.a.createElement(f.a.Fragment,null,f.a.createElement("li",{key:t,className:"text-gray-400 flex items-center",onClick:function(){s(e.name),w(!1),r.updateLabList(r.listLabsCopy),a(e)}}," ",f.a.createElement("label",{className:"ml-2 mt-1 text-black"}," ",e.name)))})))):null))})),v=Object(b.a)((function(e){return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{style:{position:"relative"}},f.a.createElement(g.c.TableBootstrap,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"lab",text:"Labs",headerClasses:"textHeader2",sort:!0,csvFormatter:function(e){return e||""},filter:g.c.Utils.textFilter({getFilter:function(e){o=e}}),editorRenderer:function(t,a,n,o,r,l){return f.a.createElement(f.a.Fragment,null,f.a.createElement(E,{onSelect:function(t){e.onUpdateItem&&e.onUpdateItem(t.code,o.dataField,n._id)}}))}},{dataField:"header",text:"Header",headerClasses:"textHeader1",sort:!0,csvFormatter:function(e){return e||""},filter:g.c.Utils.textFilter({getFilter:function(e){r=e}})},{dataField:"message",text:"Message",sort:!0,csvFormatter:function(e){return e||""},filter:g.c.Utils.textFilter({getFilter:function(e){l=e}}),headerClasses:"textHeader2",editorRenderer:function(t,a,n,o,r,l){return f.a.createElement(f.a.Fragment,null,f.a.createElement(g.a.Form.MultilineInput,{rows:5,name:"message",placeholder:"Message",onBlur:function(t){n.message!==t&&t&&e.onUpdateItem&&e.onUpdateItem(t,o.dataField,n._id)}}))}},{dataField:"action",text:"Action",headerClasses:"textHeader2",sort:!0,csvFormatter:function(e){return e||""},filter:g.c.Utils.textFilter({getFilter:function(e){i=e}}),editorRenderer:function(t,a,n,o,r,l){return f.a.createElement(f.a.Fragment,null,f.a.createElement("select",{name:"action",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border border-gray-300 rounded-md",onChange:function(t){var a=t.target.value;e.onUpdateItem&&e.onUpdateItem(a,o.dataField,n._id)}},f.a.createElement("option",{selected:!0},"Select"),["login","logout"].map((function(e,t){return f.a.createElement("option",{key:t,value:e},e)}))))}},{dataField:"opration",text:"Action",editable:!1,csvExport:!1,hidden:!e.isDelete,formatter:function(t,a){return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"flex flex-row"},f.a.createElement(g.a.Tooltip,{tooltipText:"Delete",position:"top"},f.a.createElement(g.a.Icons.IconContext,{color:"#fff",size:"20",onClick:function(){return e.onDelete&&e.onDelete({type:"Delete",show:!0,id:[a._id],title:"Are you sure?",body:"Delete item"})}},g.a.Icons.getIconTag(g.a.Icons.IconBs.BsFillTrashFill)))))},headerClasses:"sticky right-0  bg-gray-500 text-white",classes:function(e,t,a,n){return"sticky right-0 bg-gray-500"}}],isEditModify:e.isEditModify,isSelectRow:!0,fileName:"Notice_Boards",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,a,n){e.onUpdateItem&&e.onUpdateItem(t,a,n)},onPageSizeChange:function(t,a){e.onPageSizeChange&&e.onPageSizeChange(t,a)},onFilter:function(t,a,n,o){e.onFilter&&e.onFilter(t,a,n,o)},clearAllFilter:function(){o(""),l(""),i(""),r("")}})))})),F=(a(281),a(6)),S=a(19),y=a(5),w=(c=Object(b.a)((function(){var e,t=Object(h.b)(),a=t.loginStore,o=t.labStore,r=t.noticeBoardStore,l=t.routerStore,i=t.loading,c=Object(F.b)(),b=c.control,p=c.handleSubmit,E=c.formState.errors;(0,c.setValue)("lab",a.login.lab);var v=Object(m.useState)(),w=Object(u.a)(v,2),B=w[0],j=w[1],N=Object(m.useMemo)((function(){return f.a.createElement(n.NoticeBoardsList,{data:r.noticeBoardList,totalSize:r.noticeBoardListCount,extraData:{listLabs:o.listLabs},isDelete:S.a.checkPermission(Object(y.toJS)(l.userPermission),"Delete"),isEditModify:S.a.checkPermission(Object(y.toJS)(l.userPermission),"Edit/Modify"),onDelete:function(e){return j(e)},onSelectedRow:function(e){j({show:!0,type:"Delete",id:e,title:"Are you sure?",body:"Delete selected items!"})},onUpdateItem:function(e,t,a){j({show:!0,type:"Update",data:{value:e,dataField:t,id:a},title:"Are you sure?",body:"Update recoard!"})},onPageSizeChange:function(e,t){r.fetchNoticeBoards(e,t)},onFilter:function(e,t,a,n){r.NoticeBoardService.filter({input:{type:e,filter:t,page:a,limit:n}})}})}),[r.noticeBoardList]);return f.a.createElement(f.a.Fragment,null,f.a.createElement(g.a.Header,null,f.a.createElement(g.a.PageHeading,{title:(null===(e=l.selectedComponents)||void 0===e?void 0:e.title)||""}),f.a.createElement(g.a.PageHeadingLabDetails,{store:a})),f.a.createElement("div",{className:"p-2 rounded-lg shadow-xl"},f.a.createElement(g.a.Grid,{cols:2},f.a.createElement(g.a.List,{direction:"col",space:4,justify:"stretch",fill:!0},o.listLabs&&f.a.createElement(F.a,{control:b,render:function(e){var t=e.field.onChange;return f.a.createElement(g.a.Form.InputWrapper,{label:"Lab",id:"labs",hasError:E.lab},f.a.createElement(g.b.AutoCompleteFilterSingleSelect,{loader:i,placeholder:"Search by name",disable:!(!a.login||"SYSADMIN"===a.login.role),data:{list:o.listLabs,displayKey:"name",findKey:"name"},hasError:E.name,onFilter:function(e){o.LabService.filter({input:{type:"filter",filter:{name:e},page:0,limit:10}})},onSelect:function(e){t(e.name),r.updateNoticeBoard(Object(d.a)(Object(d.a)({},r.noticeBoard),{},{lab:e.code})),o.updateLabList(o.listLabsCopy)}}))},name:"lab",rules:{required:!0},defaultValue:""}),f.a.createElement(F.a,{control:b,render:function(e){var t=e.field.onChange;return f.a.createElement(g.a.Form.Input,{label:"Header",name:"lblHeader",placeholder:E.header?"Please Enter Header":"Header",hasError:E.header,onChange:function(e){t(e),r.updateNoticeBoard(Object(d.a)(Object(d.a)({},r.noticeBoard),{},{header:e}))}})},name:"header",rules:{required:!0},defaultValue:""}),f.a.createElement(F.a,{control:b,render:function(e){var t=e.field.onChange;return f.a.createElement(g.a.Form.InputWrapper,{label:"Action",id:"lblAction",hasError:E.action},f.a.createElement("select",{name:"action",className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(E.action?"border-red-500":"border-gray-300"," rounded-md"),onChange:function(e){var a=e.target.value;t(a),r.updateNoticeBoard(Object(d.a)(Object(d.a)({},r.noticeBoard),{},{action:a}))}},f.a.createElement("option",{selected:!0},"Select"),["login","logout"].map((function(e,t){return f.a.createElement("option",{key:t,value:e},e)}))))},name:"action",rules:{required:!0},defaultValue:""})),f.a.createElement(g.a.List,{direction:"col",space:4,justify:"stretch",fill:!0},f.a.createElement(F.a,{control:b,render:function(e){var t=e.field.onChange;return f.a.createElement(g.a.Form.MultilineInput,{rows:7,label:"Message",name:"lblMessage",hasError:E.message,placeholder:E.message?"Please Enter Message":"Message",onChange:function(e){t(e),r.updateNoticeBoard(Object(d.a)(Object(d.a)({},r.noticeBoard),{},{message:e}))}})},name:"message",rules:{required:!1},defaultValue:""}))),f.a.createElement("br",null),f.a.createElement(g.a.List,{direction:"row",space:3,align:"center"},f.a.createElement(g.a.Buttons.Button,{size:"medium",type:"solid",icon:g.a.Icon.Save,onClick:p((function(){r.NoticeBoardService.addNoticeBoard({input:Object(d.a)({},r.noticeBoard)}).then((function(e){e.createNoticeBoard.success?(g.a.Toast.success({message:"\ud83d\ude0a ".concat(e.createNoticeBoard.message)}),setTimeout((function(){window.location.reload()}),2e3)):g.a.Toast.warning({message:"\ud83d\ude14 Notice not create.Please try again"})}))}))},"Save"),f.a.createElement(g.a.Buttons.Button,{size:"medium",type:"outline",icon:g.a.Icon.Remove,onClick:function(){window.location.reload()}},"Clear"))),f.a.createElement("div",{className:"p-2 rounded-lg shadow-xl overflow-scroll",style:{overflowX:"scroll"}},N),f.a.createElement(g.b.ModalConfirm,Object.assign({},B,{click:function(e){"Delete"===e?r.NoticeBoardService.deleteNoticeBoards({input:{id:B.id}}).then((function(e){e.removeNoticeBoard.success&&(g.a.Toast.success({message:"\ud83d\ude0a ".concat(e.removeNoticeBoard.message)}),j({show:!1}),r.fetchNoticeBoards())})):"Update"===e&&r.NoticeBoardService.updateSingleFiled({input:Object(s.a)({_id:B.data.id},B.data.dataField,B.data.value)}).then((function(e){e.updateNoticeBoard.success&&(g.a.Toast.success({message:"\ud83d\ude0a ".concat(e.updateNoticeBoard.message)}),j({show:!1}),setTimeout((function(){window.location.reload()}),1e3))}))},onClose:function(){return j({show:!1})}})))})),Object(b.a)((function(e){var t=Object(h.b)(),a=t.loginStore,n=t.noticeBoardStore;return Object(m.useEffect)((function(){a.login&&"SYSADMIN"!==a.login.role&&n.updateNoticeBoard(Object(d.a)(Object(d.a)({},n.noticeBoard),{},{lab:a.login.lab})),n.fetchNoticeBoards()}),[a.login]),f.a.createElement(c,e)})));t.default=w}}]);