"use strict";(self.webpackChunklimsplus_portal=self.webpackChunklimsplus_portal||[]).push([[4366],{24366:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var n,r,l,o=a(1413),i=a(29439),s=a(72791),d=a(71672),u=a(79476),c=a(20500),m=a(61134),v=a(10621),p=a(28337),h=a(53946),f=a(4942),x=a(2002),b=a(763),g=a.n(b),y=a(33294),C=a.n(y),j=a(36161),P=a(92746),I=a(97892),A=a.n(I),S=(a(26192),a(65028)),N=a(80184),F=y.Search.SearchBar,w=y.Search.ClearSearchButton,E=y.CSVExport.ExportCSVButton,Z=function(e){var t=e.id,a=e.data,n=e.totalSize,r=void 0===n?10:n,l=e.searchPlaceholder,d=void 0===l?"Search...":l,u=e.page,m=void 0===u?0:u,p=e.sizePerPage,b=void 0===p?10:p,y=e.columns,I=e.fileName,Z=(e.isDelete,e.isEditModify),k=e.isExport,D=void 0===k||k,V=(e.isSelectRow,e.onSelectedRow,e.onUpdateItem),z=e.onPageSizeChange,T=e.onFilter,O=e.clearAllFilter,R=e.onClickRow,M=e.setHideForm,q=e.isHideForm,Q=void 0!==q&&q,L=(0,s.useState)(),B=(0,i.Z)(L,2),H=(B[0],B[1],(0,s.useState)(!1)),G=(0,i.Z)(H,2),U=G[0],Y=G[1],_=(0,h.mZ)().routerStore,K={cutome:!0,totalSize:r,paginationSize:5,pageStartIndex:0,firstPageText:"<<",prePageText:"<",nextPageText:">",lastPageText:">>",disablePageTitle:!0,paginationTotalRenderer:function(e,t,a){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"clearfix"}),(0,N.jsxs)("span",{children:["Showing ",e," to ",t," of ",a," Results"]})]})},hideSizePerPage:!0,showTotal:!1,alwaysShowAllBtns:!0,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50}],hidePageListOnlyOnePage:!0,sizePerPageRenderer:function(e){var t=e.options,a=e.currSizePerPage,n=e.onSizePerPageChange;return(0,N.jsxs)("div",{className:"btn-group items-center",role:"group",children:[(0,N.jsx)("input",{type:"number",min:"0",placeholder:"No",onChange:function(e){e.target.value&&n(e.target.value)},className:"mr-2 ml-2 leading-4 p-2 w-14 focus:outline-none focus:ring block  shadow-sm sm:text-base border border-gray-300 rounded-md"}),t.map((function(e){return(0,N.jsx)("button",{type:"button",onClick:function(){return n(e.page)},className:"btn  ".concat(a==="".concat(e.page)?"bg-primary":"bg-grey"),children:e.text},e.text)}))]})}},J={placeholder:d},W=function(e,t){var a=t.data,n=t.cellEdit,l=t.page,o=t.sizePerPage,s=t.filters,d=t.sortField,u=t.sortOrder,c=t.searchText;if("cellEdit"===e&&Z&&V&&V(n.newValue,n.dataField,n.rowId),"pagination"===e&&g().isEmpty(s)&&z&&z(l,o),"filter"===e||"pagination"===e&&!g().isEmpty(s)){if("pagination"===e){if(o>r)return alert("You have not more records.");if(l*o>r)return alert("You have not more records.")}for(var m={},v=0,p=Object.entries(s);v<p.length;v++){var h=(0,i.Z)(p[v],2),x=h[0],b=h[1],y=(0,f.Z)({},x,b.filterVal);m=Object.assign(m,y)}T&&(0,S.Ds)((function(){T(e,m,"filter"===e&&1===l?0:l,o)}))}("search"===e&&(0,S.Ds)((function(){T&&T(e,{srText:c},l,o)})),"sort"===e)&&("asc"===u?a.sort((function(e,t){return e[d]>t[d]?1:t[d]>e[d]?-1:0})):a.sort((function(e,t){return e[d]>t[d]?-1:t[d]>e[d]?1:0})))},$=function(e){var t=e.columns,a=e.onColumnToggle,n=e.toggles;return(0,N.jsx)("div",{className:"flex btn-group btn-group-toggle","data-toggle":"buttons",children:t.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{toggle:n[e.dataField]})})).map((function(e,t){if(t>0)return(0,N.jsx)("button",{type:"button",className:" btn btn-primary border-white  btn-sm whitespace-nowrap ".concat(e.toggle?"active":"inactive"),style:{height:"31px"},"data-toggle":"button","aria-pressed":e.toggle?"true":"false",onClick:function(){return a(e.dataField)},children:e.text},e.dataField)}))})},X={onClick:function(e,t,a){R&&R(t,a)}};return(0,N.jsx)(j.bN,{pagination:(0,j.ZP)(0!==r?K:{page:m,sizePerPage:b,totalSize:r}),keyField:t,columns:y,data:a,children:function(e){var n=e.paginationProps,r=e.paginationTableProps;return(0,N.jsx)(C(),{keyField:t,bootstrap4:!0,data:a,columns:y,search:!0,exportCSV:{fileName:"".concat(I,"_").concat(A()(new Date).format("YYYY-MM-DD HH:mm"),".csv"),noAutoBOM:!1,blobType:"text/csv;charset=ansi",exportAll:!1,onlyExportFiltered:!0},columnToggle:!0,children:function(e){return(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"flex flex-row justify-between items-center flex-wrap",children:[(0,N.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,N.jsx)("div",{className:"mt-2",children:(0,N.jsx)(F,(0,o.Z)((0,o.Z)((0,o.Z)({},J),e.searchProps),{},{onChange:function(e){console.log({value:e})}}))}),(0,N.jsx)(w,(0,o.Z)({className:"inline-flex ml-4 bg-gray-500 items-center small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.searchProps)),(0,N.jsx)("button",{className:"ml-2 px-2 focus:outline-none bg-gray-500 items-center  outline shadow-sm  font-medium  text-center rounded-md h-9 text-white",onClick:O,children:"Clear all filters"}),D&&(0,N.jsx)(E,(0,o.Z)((0,o.Z)({className:"inline-flex m-2.5 bg-gray-500 items-center  small outline shadow-sm  font-medium  disabled:opacity-50 disabled:cursor-not-allowed text-center h-9 text-white"},e.csvProps),{},{children:"Export CSV!!"})),U?(0,N.jsx)("div",{className:"ml-2",children:(0,N.jsx)(c.EK.zx,{size:"medium",type:"outline",onClick:function(){Y(!U)},children:(0,N.jsx)(c.PJ.IconFa.FaChevronUp,{})})}):(0,N.jsx)("div",{className:"ml-2",children:(0,N.jsx)(c.EK.zx,{size:"medium",type:"outline",onClick:function(){Y(!U)},children:(0,N.jsx)(c.PJ.IconFa.FaChevronDown,{})})})]}),U&&(0,N.jsx)("div",{className:"flex overflow-auto",children:(0,N.jsx)($,(0,o.Z)({contextual:"primary",className:"list-custom-class",btnClassName:"list-btn-custom-class"},e.columnToggleProps))}),(0,N.jsx)("div",{children:Q&&(0,N.jsx)(N.Fragment,{children:v.o.checkPermission(_.userPermission,"Add")&&(0,N.jsx)(c.EK.n6,{show:Q,onClick:function(){return null===M||void 0===M?void 0:M(!Q)}})})})]}),(0,N.jsx)("div",{className:"scrollTable",children:(0,N.jsx)(x.Z,(0,o.Z)((0,o.Z)((0,o.Z)({remote:!0},e.baseProps),{},{noDataIndication:"Table is Empty",hover:!0},r),{},{filter:(0,P.ZP)(),headerClasses:"bg-gray-500 text-white whitespace-nowrap",onTableChange:W,rowEvents:X}))}),(0,N.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,N.jsx)(j.dE,(0,o.Z)({},Object.assign({},(0,o.Z)((0,o.Z)({},n),{},{hideSizePerPage:!1})))),(0,N.jsx)(j.yJ,(0,o.Z)({},n))]}),(0,N.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,N.jsx)(j.NJ,(0,o.Z)({},n))})]})}})}})},k=function(e){return(0,N.jsx)("div",{className:"".concat(e.isView?"shown":"hidden"),children:(0,N.jsx)(Z,{id:"_id",data:e.data,totalSize:e.totalSize,columns:[{dataField:"_id",text:"Id",hidden:!0,csvExport:!1},{dataField:"pId",text:"PId",sort:!0,filter:(0,c.DN)({placeholder:"PId",getFilter:function(e){n=e}}),headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,c.t$)(e,t)},editable:!1,headerClasses:"textHeader"},{dataField:"labId",text:"Lab Id",sort:!0,filter:(0,c.DN)({placeholder:"LabId",getFilter:function(e){r=e}}),headerStyle:{fontSize:0},sortCaret:function(e,t){return(0,c.t$)(e,t)},editable:!1,headerClasses:"textHeader"},{dataField:"rLab",text:"RLab",sort:!0,editable:!1},{dataField:"invoiceAC",text:"Invoice AC",sort:!0,editable:!1},{dataField:"customerName",text:"Customer Name",sort:!0,editable:!1,headerClasses:"textHeader",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,maxWidth:"250px",position:"relative"},formatter:function(e,t){return(0,N.jsx)("span",{title:t.customerName,children:e})}},{dataField:"customerGroup",text:"Customer Group",sort:!0,editable:!1},{dataField:"acClass",text:"AC Class",sort:!0,editable:!1},{dataField:"acType",text:"AC Type",sort:!0,editable:!1},{dataField:"discountCharges",text:"Other Charges",sort:!0,editable:!1,headerClasses:"textHeader",formatter:function(e,t){return(0,N.jsx)("span",{children:t.discountCharges})}},{dataField:"invoiceDate",text:"Invoice Date",sort:!0,editable:!1,headerClasses:"textHeaderm",formatter:function(e,t){return A()(t.invoiceDate).format("DD-MM-YYYY HH:mm:ss")}},{dataField:"grossAmount",text:"Gross Amount",sort:!0,editable:!1},{dataField:"netAmount",text:"Net Amount",sort:!0,editable:!1},{dataField:"discountAmount",text:"Discount Amount",sort:!0,editable:!1},{dataField:"discountPer",text:"Discount %",sort:!0,editable:!1},{dataField:"miscellaneousCharges",text:"Miscellaneous Charges",sort:!0,editable:!1},{dataField:"allMiscCharges",text:"All Misc Charges",headerClasses:"textHeader3",sort:!0,csvFormatter:function(e,t){return e||""},editable:!1,formatter:function(e,t){var a;return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("div",{className:"flex flex-row gap-2",children:null===t||void 0===t||null===(a=t.allMiscCharges)||void 0===a?void 0:a.map((function(e){var t;return(0,N.jsx)("span",{children:(null===e||void 0===e?void 0:e.code)+" - "+(null===e||void 0===e||null===(t=e.amount)||void 0===t?void 0:t.toString())})}))})})}},{dataField:"amountPayable",text:"Amount Payable",sort:!0,editable:!1},{dataField:"receivedAmount",text:"Received Amount",sort:!0,editable:!1},{dataField:"balance",text:"Balance",sort:!0,editable:!1},{dataField:"modeOfPayment",text:"Mode Of Payment",sort:!0,editable:!1},{dataField:"paymentRemark",text:"Payment Remark",sort:!0,editable:!1},{dataField:"status",text:"Status",sort:!0,editable:!1},{dataField:"enteredBy",text:"Entered By",sort:!0,editable:!1},{text:"Company Code",dataField:"companyCode",sort:!0,editable:!1},{text:"Environment",dataField:"environment",editable:!1,sort:!0}],isDelete:e.isDelete,isEditModify:e.isUpdate,isExport:e.isExport,isSelectRow:!0,fileName:"Payments",onSelectedRow:function(t){e.onSelectedRow&&e.onSelectedRow(t.map((function(e){return e._id})))},onUpdateItem:function(t,a,n){e.onUpdateItem&&e.onUpdateItem(t,a,n)},onPageSizeChange:function(t,a){e.onPageSizeChange&&e.onPageSizeChange(t,a)},onFilter:function(t,a,n,r){e.onFilter&&e.onFilter(t,a,n,r)},clearAllFilter:function(){n(""),r("")}})})},D=a(39567),V=a(75344),z=(l=(0,d.Pi)((function(){var e,t,a,n,r,l,d,f=(0,h.mZ)(),x=f.loading,b=f.routerStore,g=f.loginStore,y=f.paymentStore,C=f.transactionDetailsStore,j=(0,m.cI)(),P=j.control,I=j.handleSubmit,A=j.formState.errors,S=j.setValue,F=j.clearErrors,w=j.setError,E=j.reset,Z=(0,s.useState)(),z=(0,i.Z)(Z,2),T=(z[0],z[1]),O=(0,s.useState)(!0),R=(0,i.Z)(O,2),M=R[0],q=R[1],Q=(0,s.useState)(0),L=(0,i.Z)(Q,2),B=L[0],H=L[1];(0,s.useEffect)((function(){var e,t,a,n,r,l,o,i,s,d,u,c,m,v,p,h,f;S("modeOfPayment",null===(e=y.payment)||void 0===e?void 0:e.modeOfPayment),S("invoiceAc",null===(t=y.payment)||void 0===t?void 0:t.invoiceAC),S("rLab",null===(a=y.payment)||void 0===a?void 0:a.rLab),S("customerName",null===(n=y.payment)||void 0===n?void 0:n.customerName),S("customerGroup",null===(r=y.payment)||void 0===r?void 0:r.customerGroup),S("acClass",null===(l=y.payment)||void 0===l?void 0:l.acClass),S("acType",null===(o=y.payment)||void 0===o?void 0:o.acType),S("otherCharges",null===(i=y.payment)||void 0===i?void 0:i.discountCharges),S("invoiceDate",null===(s=y.payment)||void 0===s?void 0:s.invoiceDate),S("grossAmount",null===(d=y.payment)||void 0===d?void 0:d.grossAmount),S("netAmount",null===(u=y.payment)||void 0===u?void 0:u.netAmount),S("discountAmount",null===(c=y.payment)||void 0===c?void 0:c.discountAmount),S("discountPer",null===(m=y.payment)||void 0===m?void 0:m.discountPer),S("miscellaneousCharges",null===(v=y.payment)||void 0===v?void 0:v.miscellaneousCharges),S("amountPayable",null===(p=y.payment)||void 0===p?void 0:p.amountPayable),S("status",null===(h=y.payment)||void 0===h?void 0:h.status),S("balance",null===(f=y.payment)||void 0===f?void 0:f.balance)}),[y.payment]),(0,s.useEffect)((function(){var e;y.updatePayment((0,o.Z)((0,o.Z)({},y.payment),{},{enteredBy:null===(e=g.login)||void 0===e?void 0:e.userId}))}),[null===(e=g.login)||void 0===e?void 0:e.userId,y]);var G=function(e){var t,a,n="number"==typeof(null===(t=e.discountCharges)||void 0===t?void 0:t.amount)?Number.parseFloat(null===e||void 0===e||null===(a=e.discountCharges)||void 0===a?void 0:a.amount):0;return Number.parseFloat(null===e||void 0===e?void 0:e.netAmount)+Number.parseFloat(null===e||void 0===e?void 0:e.miscellaneousCharges)+n-Number.parseFloat(null===e||void 0===e?void 0:e.receivedAmount)},U=function(e){var t,a,n;y.updatePayment((0,o.Z)((0,o.Z)({},y.payment),{},{pId:Number.parseInt(null===e||void 0===e?void 0:e.pId),labId:Number.parseInt(null===e||void 0===e?void 0:e.labId),rLab:null===e||void 0===e?void 0:e.rLab,invoiceAC:Number.parseInt(null===e||void 0===e?void 0:e.invoiceAC),customerName:null===e||void 0===e?void 0:e.customerName,customerGroup:null===e||void 0===e?void 0:e.customerGroup,acClass:null===e||void 0===e?void 0:e.acClass,acType:null===e||void 0===e?void 0:e.accountType,discountCharges:"".concat(null===(t=e.discountCharges)||void 0===t?void 0:t.code," - ").concat(null===(a=e.discountCharges)||void 0===a||null===(n=a.amount)||void 0===n?void 0:n.toString()),invoiceDate:null===e||void 0===e?void 0:e.invoiceDate,grossAmount:Number.parseFloat(null===e||void 0===e?void 0:e.grossAmount),netAmount:Number.parseFloat(null===e||void 0===e?void 0:e.netAmount),discountAmount:Number.parseFloat(null===e||void 0===e?void 0:e.discountAmount),discountPer:Number.parseFloat(null===e||void 0===e?void 0:e.discountPer),miscellaneousCharges:Number.parseFloat(null===e||void 0===e?void 0:e.miscellaneousCharges),allMiscCharges:null===e||void 0===e?void 0:e.allMiscCharges,amountPayable:G(e),patientOrderId:null===e||void 0===e?void 0:e.patientOrderId,transactionHeaderId:null===e||void 0===e?void 0:e._id,visitId:null===e||void 0===e?void 0:e.visitId})),H(Number.parseFloat(null===e||void 0===e?void 0:e.receivedAmount)),S("pId",null===e||void 0===e?void 0:e.pId),S("labId",null===e||void 0===e?void 0:e.labId),F("pId"),F("labId")};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c._q,{title:(null===(t=b.selectedComponents)||void 0===t?void 0:t.title)||"",store:g}),(0,N.jsx)("div",{className:"flex justify-end",style:{position:"fixed",right:"30px",top:"135px",zIndex:9999},children:v.o.checkPermission(b.userPermission,"Add")&&(0,N.jsx)(c.EK.n6,{show:M,onClick:function(){return q(!M)}})}),(0,N.jsxs)("div",{className:" mx-auto flex-wrap",children:[(0,N.jsxs)("div",{className:"p-2 rounded-lg shadow-xl "+(M?"hidden":"shown"),children:[(0,N.jsxs)(c.rj,{cols:3,children:[(0,N.jsxs)(c.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=t.onChange,n=t.value;return(0,N.jsx)(c.l0.SP,{label:"PId",hasError:!!A.pId,children:(0,N.jsx)(c.FJ,{loader:x,placeholder:"Search by pId or customer name",data:{list:C.transactionHeaderList.filter((function(e){if(0!==(null===e||void 0===e?void 0:e.balance))return e}))||[],displayKey:["pId","customerName"]},disable:!1,displayValue:null===n||void 0===n?void 0:n.toString(),hasError:!!A.pId,onFilter:function(e){},onSelect:function(e){a(e.pId),U(e)}})})},name:"pId",rules:{required:!0},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=t.onChange,n=t.value;return(0,N.jsx)(c.l0.SP,{label:"Lab Id",hasError:!!A.labId,children:(0,N.jsx)(c.FJ,{loader:x,placeholder:"Search by labId or customer name",data:{list:C.transactionHeaderList.filter((function(e){if(0!==(null===e||void 0===e?void 0:e.balance))return e}))||[],displayKey:["labId","customerName"]},disable:!1,displayValue:null===n||void 0===n?void 0:n.toString(),hasError:!!A.labId,onFilter:function(e){},onSelect:function(e){a(e.pId),U(e)}})})},name:"labId",rules:{required:!0},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"RLab",placeholder:"RLab",hasError:!!A.rLab,disabled:!0,value:a})},name:"rLab",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Invoice AC",placeholder:"Invoice AC",hasError:!!A.invoiceAC,disabled:!0,value:a})},name:"invoiceAC",rules:{required:!1},defaultValue:null===(a=y.payment)||void 0===a?void 0:a.invoiceAC}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Customer Name",placeholder:"Customer Name",hasError:!!A.customerName,disabled:!0,value:a})},name:"customerName",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Customer Group",placeholder:"Customer Group",hasError:!!A.customerGroup,disabled:!0,value:a})},name:"customerGroup",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"AC Class",placeholder:"AC Class",hasError:!!A.acClass,disabled:!0,value:a})},name:"acClass",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Ac Type",placeholder:"Ac Type",hasError:!!A.acType,disabled:!0,value:a})},name:"acType",rules:{required:!1},defaultValue:""})]}),(0,N.jsxs)(c.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Other Charges",placeholder:"Other Charges",hasError:!!A.discountCharges,disabled:!0,value:a})},name:"discountCharges",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Invoice Date",placeholder:"Invoice Date",hasError:!!A.invoiceDate,disabled:!0,value:a})},name:"invoiceDate",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Gross Amount",placeholder:"Gross Amount",hasError:!!A.grossAmount,disabled:!0,value:null===a||void 0===a?void 0:a.toString()})},name:"grossAmount",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Net Amount",placeholder:"Net Amount",hasError:!!A.netAmount,disabled:!0,value:null===a||void 0===a?void 0:a.toString()})},name:"netAmount",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Discount Amount",placeholder:"Discount Amount",hasError:!!A.discountAmount,disabled:!0,value:null===a||void 0===a?void 0:a.toString()})},name:"discountAmount",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Discount Per",placeholder:"Discount Per",hasError:!!A.discountPer,disabled:!0,value:null===a||void 0===a?void 0:a.toString()})},name:"discountPer",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Miscellaneous Charges",placeholder:"Miscellaneous Charges",hasError:!!A.miscellaneousCharges,disabled:!0,value:null===a||void 0===a?void 0:a.toString()})},name:"miscellaneousCharges",rules:{required:!1},defaultValue:""}),(0,N.jsxs)(u.iA,{striped:!0,bordered:!0,children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{className:"p-0 text-xs",children:[(0,N.jsx)("th",{className:"text-white sticky left-0 z-10",children:"MISC CHARGES"}),(0,N.jsx)("th",{className:"text-white",children:"AMOUNT"})]})}),(0,N.jsx)("tbody",{className:"text-xs",children:null===(n=y.payment)||void 0===n||null===(r=n.allMiscCharges)||void 0===r?void 0:r.map((function(e,t){return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"sticky left-0",children:(null===e||void 0===e?void 0:e.value)+" - "+(null===e||void 0===e?void 0:e.code)}),(0,N.jsx)("td",{className:"sticky left-0",children:(0,N.jsx)(c.l0.II,{style:{height:30},label:"",type:"number",placeholder:"Amount",value:e.amount,disabled:!0})})]},e.code)}))})]})]}),(0,N.jsxs)(c.aV,{direction:"col",space:4,justify:"stretch",fill:!0,children:[(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=t.onChange,n=t.value;return(0,N.jsx)(c.l0.SP,{label:"Mode of payment",children:(0,N.jsxs)("select",{value:n,className:"leading-4 p-2 focus:outline-none focus:ring block w-full shadow-sm sm:text-base border-2 ".concat(A.modeOfPayment?"border-red  ":"border-gray-300"," rounded-md"),onChange:function(e){var t=e.target.value;a(t),y.updatePayment((0,o.Z)((0,o.Z)({},y.payment),{},{modeOfPayment:t}))},children:[(0,N.jsx)("option",{selected:!0,children:"Select"}),(0,p.fc)(b.lookupItems,"MODE_OF_PAYMENT").map((function(e,t){return(0,N.jsx)("option",{value:e.code,children:(0,p.w9)(e)},t)}))]})})},name:"modeOfPayment",rules:{required:!0},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=t.onChange,n=t.value;return(0,N.jsx)(c.l0.$l,{label:"Payment Remark",placeholder:"Payment Remark",hasError:!!A.paymentRemark,value:n,onChange:function(e){a(e),y.updatePayment((0,o.Z)((0,o.Z)({},y.payment),{},{paymentRemark:e}))}})},name:"paymentRemark",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Amount Payable",placeholder:"Amount Payable",hasError:!!A.amountPayable,disabled:!0,value:null===a||void 0===a?void 0:a.toString()})},name:"amountPayable",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=t.onChange;return t.value,(0,N.jsx)(c.l0.II,{label:"Received Amount",placeholder:"Received Amount",type:"number",hasError:!!A.receivedAmount,onChange:function(e){var t;if((null===(t=y.payment)||void 0===t?void 0:t.amountPayable)-Number.parseFloat(e)<0)alert("Please enter correct amount!"),w("receivedAmount",{type:"onBlur"});else if(""==e)y.updatePayment((0,o.Z)((0,o.Z)({},y.payment),{},{receivedAmount:e})),w("receivedAmount",{type:"onBlur"});else{var n,r;a(Number.parseFloat(e)),y.updatePayment((0,o.Z)((0,o.Z)({},y.payment),{},{receivedAmount:Number.parseFloat(e),balance:(null===(n=y.payment)||void 0===n?void 0:n.amountPayable)-Number.parseFloat(e),totalReceivedAmount:B+Number.parseFloat(e),status:(null===(r=y.payment)||void 0===r?void 0:r.amountPayable)-Number.parseFloat(e)===0?"Complete":"Partial"})),F("receivedAmount")}}})},name:"receivedAmount",rules:{required:!0},defaultValue:null===(l=y.payment)||void 0===l?void 0:l.receivedAmount}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Balance",placeholder:"Balance",type:"number",hasError:!!A.balance,value:null===a||void 0===a?void 0:a.toString()})},name:"balance",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t=e.field,a=(t.onChange,t.value);return(0,N.jsx)(c.l0.II,{label:"Status",placeholder:"Status",hasError:!!A.status,value:a,disabled:!0})},name:"status",rules:{required:!1},defaultValue:""}),(0,N.jsx)(m.Qr,{control:P,render:function(e){var t,a=e.field;return a.onChange,a.value,(0,N.jsx)(c.l0.II,{label:"Entered By",placeholder:"Entered By",hasError:!!A.status,value:null===(t=y.payment)||void 0===t?void 0:t.enteredBy,disabled:!0})},name:"enteredBy",rules:{required:!1},defaultValue:null===(d=y.payment)||void 0===d?void 0:d.enteredBy})]})]}),(0,N.jsx)("br",{}),(0,N.jsxs)(c.aV,{direction:"row",space:3,align:"center",children:[(0,N.jsx)(c.EK.zx,{size:"medium",type:"solid",icon:c.ny.vc,onClick:I((function(){y.paymentService.create({input:(0,o.Z)({},y.payment)}).then((function(e){e.createPayment.success&&(c.FN.success({message:"\ud83d\ude0a ".concat(e.createPayment.message)}),q(!0),E(),(0,D.G)(),H(0),y.updatePayment(new V.F({})))}))})),children:"Save"}),(0,N.jsx)(c.EK.zx,{size:"medium",type:"outline",icon:c.ny.JW,onClick:function(){window.location.reload()},children:"Clear"})]})]}),(0,N.jsx)("div",{className:"p-2 rounded-lg shadow-xl",children:(0,N.jsx)(k,{data:y.paymentList||[],totalSize:y.paymentListCount,extraData:{lookupItems:b.lookupItems},isView:v.o.checkPermission(b.userPermission,"View"),isDelete:v.o.checkPermission(b.userPermission,"Delete"),isUpdate:v.o.checkPermission(b.userPermission,"Update"),isExport:v.o.checkPermission(b.userPermission,"Export"),onDelete:function(e){return T(e)},onSelectedRow:function(e){T({show:!0,type:"Delete",id:e,title:"Are you sure?",body:"Do you want to delete selected record?"})},onUpdateItem:function(e,t,a){T({show:!0,type:"Update",data:{value:e,dataField:t,id:a},title:"Are you sure?",body:"Update deginisation!"})},onPageSizeChange:function(e,t){},onFilter:function(e,t,a,n){}})})]})]})})),(0,d.Pi)((function(e){var t=(0,h.mZ)(),a=t.loginStore,n=t.routerStore,r=t.paymentStore;return(0,s.useEffect)((function(){r.updatePayment((0,o.Z)((0,o.Z)({},r.payment),{},{modeOfPayment:(0,p.t9)(n.lookupItems,"MODE_OF_PAYMENT")}))}),[a.login,n.lookupItems]),(0,N.jsx)(l,(0,o.Z)({},e))})))}}]);
//# sourceMappingURL=4366.6aee381e.chunk.js.map