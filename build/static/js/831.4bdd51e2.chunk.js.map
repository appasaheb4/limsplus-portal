{"version":3,"file":"static/js/831.4bdd51e2.chunk.js","mappings":"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","sources":["features/patient-reports/generate-reports/screens/generate-reports.screen.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { observer } from 'mobx-react';\nimport _ from 'lodash';\nimport {\n  AutoCompleteFilterSingleSelectMultiFieldsDisplay,\n  AutocompleteSearch,\n  Header,\n  PageHeading,\n  PageHeadingLabDetails,\n} from '@/library/components';\nimport { useForm } from 'react-hook-form';\n\nimport '@/library/assets/css/accordion.css';\nimport { useStores } from '@/stores';\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport { PDFDownloadLink } from '@react-pdf/renderer';\nimport { connect } from 'react-redux';\nimport { RouterFlow } from '@/flows';\nimport { useHistory } from 'react-router-dom';\n\nconst GenerateReport = observer(({ sidebar }) => {\n  const {\n    loading,\n    patientManagerStore,\n    routerStore,\n    patientVisitStore,\n    patientRegistrationStore,\n    loginStore,\n    generateReportsStore,\n    reportSettingStore,\n  } = useStores();\n  const history = useHistory();\n  const [tempCode, setTempCode] = useState('');\n\n  const {\n    control,\n    handleSubmit,\n    formState: { errors },\n    setValue,\n  } = useForm();\n\n  useEffect(() => {\n    // Default value initialization\n    setValue('species', patientManagerStore.patientManger.species);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [patientManagerStore.patientManger]);\n\n  const getTemplate = (tempCode: string, data: any) => {\n    switch (tempCode) {\n      // case 'TEMP0001':\n      //   return <PdfTPRTemp0001 data={data} />;\n      // case 'TEMP0002':\n      //   return <PdfTPRTemp0002 data={data} />;\n      // case 'TEMP0003':\n      //   return <PdfTPRTemp0003 data={data} />;\n      // case 'TEMP0004':\n      //   return <PdfTemp0004 data={data} />;\n      // case 'TEMP0005':\n      //   return <PdfTemp0005 data={data} />;\n      default:\n        return (\n          <div className='justify-center items-center'>\n            <h4 className='text-center mt-10 text-red'>\n              Template not found. Please select correct template code and labId.\n              ðŸš¨\n            </h4>\n          </div>\n        );\n        break;\n    }\n\n    // return (\n    //   <div className='justify-center items-center'>\n    //     <h4 className='text-center mt-10 text-red'>\n    //       Template not found. Please select correct template code and labId. ðŸš¨\n    //     </h4>\n    //   </div>\n    // );\n  };\n\n  return (\n    <>\n      <Header>\n        <div className='flex flex-row gap-2 items-center'>\n          <PageHeading title={routerStore.selectedComponents?.title || ''} />\n          <AutoCompleteFilterSingleSelectMultiFieldsDisplay\n            loader={loading}\n            placeholder='Lab Id'\n            className='h-4'\n            data={{\n              list: _.uniqBy(\n                patientVisitStore.labIdList?.filter(\n                  item => item.labId !== undefined,\n                ),\n                'labId',\n              ),\n              displayKey: ['labId'],\n            }}\n            onFilter={(labId: string) => {\n              patientVisitStore.patientVisitService.filterByLabId({\n                input: {\n                  filter: { labId },\n                },\n              });\n            }}\n            onSelect={item => {\n              // generateReportsStore.generateReportsService\n              //   .listPatientReports(item.labId)\n              //   .then(res => {\n              //     if (res.getPatientReports.success) {\n              //       const uniqByPatientResult = _.uniqBy(\n              //         res.getPatientReports.data?.patientResultList,\n              //         (item: any) => {\n              //           return item.reportTemplate;\n              //         },\n              //       );\n              //       const reportTemplateList: any[] = [];\n              //       uniqByPatientResult.filter(item => {\n              //         reportTemplateList.push(\n              //           item?.reportTemplate.split(' -')[0],\n              //         );\n              //       });\n              //       if (reportTemplateList?.length > 0) {\n              //         reportSettingStore.templatePatientResultService\n              //           .getTempPatientResultListByTempCodes({\n              //             input: {\n              //               filter: {\n              //                 reportTemplateList,\n              //               },\n              //             },\n              //           })\n              //           .then(res => {\n              //             console.log({res});\n              //           });\n              //       }\n              //     } else {\n              //       alert(res.getPatientReports.message);\n              //     }\n              //     // generateReportsStore.updatePatientReports(res?.data);\n              //     // generateReportsStore.updatePageBranding(\n              //     //   res?.data?.templatePatientResult?.pageBranding,\n              //     // );\n              //   })\n              //   .catch(errors => {\n              //     return Toast.error({\n              //       message: `ðŸ˜” ${errors.message}`,\n              //     });\n              //   });\n            }}\n          />\n        </div>\n        <div style={{ width: '50%' }}>\n          {!sidebar.isOpen && (\n            <>\n              <AutocompleteSearch\n                data={routerStore.userRouter}\n                onChange={async (item: any, children: any) => {\n                  const { permission, selectedComp } =\n                    await RouterFlow.updateSelectedCategory(\n                      item?.name,\n                      children?.name,\n                    );\n                  routerStore.updateSelectedComponents(selectedComp);\n                  routerStore.updateUserPermission(permission);\n                  history.replace(children.path);\n                }}\n              />\n            </>\n          )}\n        </div>\n        <PageHeadingLabDetails store={loginStore} />\n      </Header>\n      {window.innerWidth <= 768 ? (\n        <PDFDownloadLink\n          document={\n            <>\n              {getTemplate(tempCode, {\n                patientReports: generateReportsStore.patientReports,\n                pageBranding: generateReportsStore.pageBranding,\n              })}\n            </>\n          }\n          fileName='Patient Reports'\n          style={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            textAlign: 'center',\n            minHeight: '100%',\n          }}\n        >\n          {({ loading, error }) =>\n            loading ? (\n              <button>Loading document...</button>\n            ) : (\n              <button className='border-2 p-2 rounded-md bg-blue-500 text-white'>\n                Pdf Patient Reports\n              </button>\n            )\n          }\n        </PDFDownloadLink>\n      ) : (\n        <>\n          {/* <PdfTPRTemp0001\n            data={{\n              patientReports: generateReportsStore.patientReports,\n              pageBranding: generateReportsStore.pageBranding,\n            }}\n          /> */}\n        </>\n      )}\n    </>\n  );\n});\nexport default connect((store: any) => ({\n  sidebar: store.sidebar,\n}))(GenerateReport);\n"],"names":["GenerateReport","observer","_ref","_routerStore$selected","_patientVisitStore$la","sidebar","_useStores","useStores","loading","patientManagerStore","routerStore","patientVisitStore","loginStore","patientRegistrationStore","generateReportsStore","history","reportSettingStore","useHistory","_useState","useState","_useState2","_slicedToArray","_useForm","useForm","setValue","control","handleSubmit","formState","errors","useEffect","patientManger","species","_jsxs","_Fragment","children","Header","className","_jsx","PageHeading","title","selectedComponents","AutoCompleteFilterSingleSelectMultiFieldsDisplay","loader","placeholder","data","list","_","labIdList","filter","item","undefined","labId","displayKey","onFilter","patientVisitService","filterByLabId","input","onSelect","style","width","isOpen","AutocompleteSearch","userRouter","onChange","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$RouterFlow$upd","permission","selectedComp","wrap","_context","prev","next","RouterFlow","name","sent","updateSelectedComponents","updateUserPermission","replace","path","stop","_x","_x2","apply","arguments","PageHeadingLabDetails","store","window","innerWidth","PDFDownloadLink","document","patientReports","pageBranding","fileName","display","justifyContent","alignItems","textAlign","minHeight","_ref3","error","connect"],"sourceRoot":""}